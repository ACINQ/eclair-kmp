package fr.acinq.lightning.serialization

import fr.acinq.bitcoin.Transaction
import fr.acinq.bitcoin.byteVector
import fr.acinq.lightning.CltvExpiryDelta
import fr.acinq.lightning.Lightning
import fr.acinq.lightning.blockchain.BITCOIN_FUNDING_DEPTHOK
import fr.acinq.lightning.blockchain.WatchEventConfirmed
import fr.acinq.lightning.channel.*
import fr.acinq.lightning.channel.TestsHelper.processEx
import fr.acinq.lightning.channel.states.WaitForFundingConfirmedTestsCommon
import fr.acinq.lightning.tests.TestConstants
import fr.acinq.lightning.utils.UUID
import fr.acinq.lightning.utils.msat
import fr.acinq.lightning.wire.FundingLocked
import fr.acinq.lightning.wire.UpdateAddHtlc
import fr.acinq.secp256k1.Hex
import kotlin.test.*

class CompatibilityTestsCommon {
    @Ignore
    @Test
    fun `generate data`() {
        // generate test data
        val (alice, bob, fundingTx) = run {
            val (alice0, bob0, txSigsBob) = WaitForFundingConfirmedTestsCommon.init(ChannelType.SupportedChannelType.AnchorOutputs)
            val (alice1, actions1) = alice0.processEx(ChannelEvent.MessageReceived(txSigsBob))
            assertIs<WaitForFundingConfirmed>(alice1)
            val fundingTx = actions1.find<ChannelAction.Blockchain.PublishTx>().tx
            Triple(alice1, bob0, fundingTx)
        }
        println("funding_tx: ${Transaction.write(fundingTx).byteVector().toHex()}")
        val bin = Serialization.encrypt(TestConstants.Bob.nodeParams.nodePrivateKey, bob)
        println("wait_for_funding_confirmed: ${bin.data}")

        val (bob1, actionsBob) = bob.processEx(ChannelEvent.WatchReceived(WatchEventConfirmed(bob.channelId, BITCOIN_FUNDING_DEPTHOK, 42, 0, fundingTx)))
        val fundingLocked = actionsBob.findOutgoingMessage<FundingLocked>()
        assertTrue(bob1 is WaitForFundingLocked)

        val bin1 = Serialization.encrypt(TestConstants.Bob.nodeParams.nodePrivateKey, bob1)
        println("wait_for_funding_locked: ${bin1.data}")

        val (alice1, actionsAlice) = alice.processEx(ChannelEvent.MessageReceived(fundingLocked))
        assertTrue(alice1 is WaitForFundingConfirmed && alice1.deferred == fundingLocked)

        assertTrue(actionsAlice.isEmpty()) // alice waits until she sees on-chain confirmations herself
        val (alice2, actionsAlice2) = alice1.processEx(ChannelEvent.WatchReceived(WatchEventConfirmed(alice.channelId, BITCOIN_FUNDING_DEPTHOK, 0, 42, fundingTx)))
        val fundingLockedAlice = actionsAlice2.findOutgoingMessage<FundingLocked>()
        val (bob2, _) = bob1.processEx(ChannelEvent.MessageReceived(fundingLockedAlice))
        assertTrue(bob2 is Normal)

        val bin2 = Serialization.encrypt(TestConstants.Bob.nodeParams.nodePrivateKey, bob2)
        println("normal: ${bin2.data}")

        val add1 = CMD_ADD_HTLC(
            10_000.msat,
            Lightning.randomBytes32(),
            CltvExpiryDelta(144).toCltvExpiry(TestConstants.defaultBlockHeight.toLong()),
            TestConstants.emptyOnionPacket,
            UUID.randomUUID()
        )
        val add2 = CMD_ADD_HTLC(
            10_000.msat,
            Lightning.randomBytes32(),
            CltvExpiryDelta(144).toCltvExpiry(TestConstants.defaultBlockHeight.toLong()),
            TestConstants.emptyOnionPacket,
            UUID.randomUUID()
        )
        val (alice3, actionsAlice3) = alice2.processEx(ChannelEvent.ExecuteCommand(add1))
        val (_, actionsAlice4) = alice3.processEx(ChannelEvent.ExecuteCommand(add2))
        val htlc1 = actionsAlice3.findOutgoingMessage<UpdateAddHtlc>()
        val htlc2 = actionsAlice4.findOutgoingMessage<UpdateAddHtlc>()

        val (bob3, _) = bob2.processEx(ChannelEvent.MessageReceived(htlc1))
        val (bob4, _) = bob3.processEx(ChannelEvent.MessageReceived(htlc2))
        val (bob5, _) = bob4.processEx(ChannelEvent.ExecuteCommand(add1))
        val (bob6, _) = bob5.processEx(ChannelEvent.ExecuteCommand(add2))
        assertTrue(bob6 is Normal)

        val bin3 = Serialization.encrypt(TestConstants.Bob.nodeParams.nodePrivateKey, bob6)
        println("normal_with_htlcs: ${bin3.data}")
    }

    @Test
    fun `read compatibility test data`() {
        // data was generated with lightning-kmp v1.4.2
        // README: it this test fails it means that we cannot decrypt and/or deserialize data created with on older version of the app !!
        val fundingTx = Transaction.read(
            "02000000000102c45e96531dd860e1ba3b273247762b2ca985767132ceb892b218d5cfd4151f9200000000000000000017a5d968398abe630ffa8d07883d1572953c7e82094643717b906a8e6a98cca20000000000000000000140420f0000000000220020b8f3eb54d18be81579bb287e4626259021f91c084d62d7d156329c4ef6cac7b90248304502210089412b7bd4479342ae4bb9e89d6ab4730cc193b6880d99c5bd303d764d4ae7e102204a45ecd7abf3678f8c123c585eaa33a56f6a70e09f80aefb8ea70e56d583831d0121029aabf33c14dd60dc5fa6212b5311cb65020309fd542ba232328d9dae2eb3b2c002483045022100af0927bf5b81b773c795df3684e5a6793a3f9fe4067e2fda76f0ea657ac2ab59022070a26c2f15bbf4a99eb58cee22125617502e2290de7c3423a1b5b7f4631770700121024bf65c708b974abc1587f0e5a21c555bb229661e5d6feeb7371115b07ecde9b7801a0600"
        )
        val waitForFundingConfirmed = Hex.decode(
            "0441f3c8f8aa029868f345784202944b9df6a03e9b2863db17c4b89d27da94bb9a1680c851dd06c32f5b7bd641a31cd19066ce8ff80d5a60270917982c84e13e0168648670a896bcc90ef13f528334c9cee33d83ebae890cc19c550708f6cd9aacc507c89332f5b11457681f1e8bd8aabb621866b41e5a84b03907c2773c9409bbb0f041b2d0325442ad60106616de28846816e455d65597f0c999f9620b5e7f63d02aeb92c4ddd93c6082e8cfbbe49dfbe95e877f78798440b6e8db84bf450007f3e9f2ff387e5a520938bb886790d9fee1989f13506d3174db75364f3fe2fa999cdf964107ea58c2b9e1cfee396986322a7458a88890bf121a97958070fc48ea1da4c1b8a7de12e8531d575adce1aaa7b2b105c16f8998b52f586ed27dd95ce3ed589d1cc122b485f006b1d7945c74308ed4dd61e55169f73ec5b2289161644791aa6717254c72bf7d3d4cb67922c3165e8603fba2868c5a86866cf05b3ea825530cc5ebe3bbcb4e35d981ea59e594be7b05eec25913ae3da9e085458a087dff43abeb75d937ba231f21e970d7530139732be3fd2766503fbc906407716ba19239ce0f7ff5346db733361a37346cab8986a696e24f5615efdc5148ea8e88dc8e94285321b2084b76cd16880833e9e2263cbf34d29b2ff90d50ff5c042080b72f181d1219f49d286710dffc91ec492c5c3f5b65043310e09408c6b674b56727a718441e4110ec610eaa64015cb4e70333daddae67773fc01508d486113b70745581ac0cb02f97ff8fa0226367886b54e6ea7d05e011e15227d1a42aa084405cd359587a2e22ffefa8a6edc332eaafc3b8ec72ca3715bacf3ad2cf88bb5bc6b5862431f19feb388857a00fd69bd6c4d0802efe1080d404d107df02ada37381780ecea9065147da74088097186d2ff4088598c45428395f4a93e80e8dce4ffed999323b151a8158cf94da45e179f0a172583cee93f9458377a97b8cf47e22010241c40191e4e1ce386db72c4c2835e9b61f97179358ae7a3dc838d9327da30fbf649d1c5d7b5776ea24ecd7435dec74efceeb37f5f91f3c7c9c192fc3ba6bf2c53d0dc2a0f51ddbace89bd41303bce5f4b680729eaccf8a295f009d10a17885e90b3dc9cf6c63d1ee382a0fb065545e93187e0b86add4612ff9e8216abefa59ade375340697b8edfca3baa4f566d1d9bc6f9fe6dfc9d45dc90518871d69509fcfceb94371ad086bf49e5805a74e666f31844fbc2a8b0c9cdf4835fce3dde76aa317d8a043753d7e79899f2dd9991db582f5f58243494d1ecc6b9c09c8c11feef132b0bdb4c4716242f81b440ea7d822ed84e6bbdf308e7d4ff7467708d6752afbf306d0929612eba5296dbaa0dc808e4082ea2719dd7e93048b5bda5bee1b9b6cc3a223f97fe28e5a12e3c796ea80dde104da7ef2248cd283656c9dd994c7c6f0130969ac46301e491534bd13e1f2bb5f85203f8066836693671cb2bbe47b7035b71382bf54d93bce464fd93436d7e670e2c203b09a95db70cf89bd0b718072347346dde50a972fabeab3fa54155bb31538c15fa561a31e460086ba2c2ab216b859b5b61361f24e34c9207fe4b8647425bb9d7db938e5e2e4846273dacf59894befa4cdaa11c2c6b1e1f8f1116eec0f61210a84612393603b4fa1ef258828af9e1484eef1956bc26460e81a47bab68ec5e0e471b21aa67bbdade72520ef57d971f9cca21c5ca2e556791caa0902de9b75e47f3ae13b05f57d6a50639cd2fd7eb7cce4ccfc6cf9d0e353ed81041d2133b1930cfbc8eafc52cad49801a6da3a194f604688e933b8fd2057b7f02436a29266d66fb6080d8588958bf8b0c586d4d2dd090226f7fd5a6602a26e99fbb37b334a637c67f7e082a65f4d56a789cdf1b970da3f0a2140b82b1d5e964eecc377aaa7ae1614fc810d7aa3a7f69cf145fbdd0326d2fbe27851dc143d71199b1913669e73ea558ef094e132ec3a40a6a1b649c8e6bfd27b942829a276b6a2983075a5552ec25e9ce409b8e4c88aee388c002a9fb6a25eab3ccb5de38cd564f3261609bf8f1f65167fc3fe943345183e559831ba1ed15cca99e44530ab96517f03ac0f7574fb2ba4cf681530787b2b5f4fe163843691cef32f7aed2002f26f15f2beadb90618645bf55caa8d502a363f6d0e119fe54e31d7de0bbba1cf3238519577292d5052b00f0a838d18dc90f0c01eb67411c5c67686e04720c6c580ceb5ab5972083c95704cc66510c52b860afe5a87ba6c43a75742ba568780dd11ff2824c36fbe0fbcbe1cb6335bb04b15da047c4e5cfad7edac88ddb02767ca61e77424463f118eaae89d3128b8a6620490b3f6936e41b315eb73483adbc49d2dc4cef9a4fd80037b6f510552f8500aa1984cc19d5e6a93335559f0a8a37aba40a86f90ff44fa2dfb28c548e21cbcde7949c44db06843c75df02295d069bd92ca4f7a7a44ba7989071ea0a22832ddbbf44433c561622e8c599ac080edd3ae318928ad2caa109880ee3692d6ff997c843459d29df758138bef45e050feb4b5ac092588c32af492fcd476dc56d4bc38f5c12177e9d70191732f0567a5c8a77c41295d60cfcfb669e85aef3340258e230a8b346688fddfef9899ee1cd28f93aa3cda52551dd6aba812f43f544c82f1e3613eb19e4a362465f9710a41a3120f6d71c55a1e6272f083e447a7cbc6264d7b006825a69e775c1495cfe432415e5c2a173b9a6df9d3f7749bf67f81028e618d9eb7876a69c6de27db82aa30b14ada9f3fdeaa3e1aa4b19df9d8406ba5b4fef07e6f1f983c516bad883c48444a6a4a92d29e11f8c175f2b20b31a8326f750c3cba152c81afc057fc5b076bc3edc8222bd35ecd64d29eff663cbe39587409b993cf6e8b4c60ecceaa525b58ca3a4febf5c5defd18db88d610e3743b501039e49e928457e3ade53eb6379be1f432971eb19a76f83f5d5e5ef5be1a2b75e4d45a3fc30ece3b54a892597c211f90f9595cec16536b8f5b4e13c0a4b59a6d893b4bbbd72810c4f6ba8d1eb23ee953cda7ff7afa7a43400ad149caecbfa85e1ef5e756ae68b96eb225dda2c5efa4bc3c0fe13af1829eb578fb2ea1eb7497b5d0c4e77fc2a893b5742886634e9dd5a9efed7be1b958a577a3578d4e33f2ae585b0dca8c26e121186f8e1ec419d60582dd2995145a66ff2b4ae9e5e2db3a5b4d05e50e008bc88408f3964204f76a075edd40e01f6866f98f5940c82c12119835a4b57eae51312a8ff50b43f3463e25072ad35a62ebc5dccdc910e4345c0c79afa8ab9e43e52e3d46b81f706f5bf339e2a7675cf1da992dc7ef1efb7d981da224dd18355f37eec6d5275e8013de4b28eb49d91bc242b6946a6bca46dc55c943a9aae6c6bc04ad353e07d920854193f08b1a0810173723ad21f51a77cdcb2e80581378d6634633e3f9584d52a4d597cbf299a137b44d0e34b0e10f18e3d844047157c1b03fa4414b3df333de5e7aa327c7850ed6468d8ffbac15d5daf75015edf5807e0f57ce727b98aaad546d4a1a9d2f8ae86753d185f916ed57dc083fd583ba8f0c40024e9076bd0198c1bd4de0458c40ce3ab89f9c4227f3a3d5a14197b34a3bbd647fe65b09fcfb473847c3bde1311391571d11c486e45de8a0067b46c07f06dd9eefca8b18e1d18de980c98b61ed851f6526eca22f88edefb199d07db02fe60251b4f28dc652b275b710b65c85e3f4ce814455433e6c4d901451eff2c48f9b3bfe8b2e1a2c56ff0c29c94932a4c476c8b80a1ba027e304ca390e8757135a9f3a42c5e05e95bdc29de3b2c8b73b8fc9a0ef679705d3435d55dd85ffdc6b540cf9c20785fcd771db5db109ac45e31c90869e59ac0a6c6bac645ce2b46cfdb84df80a8908b8e15b3f21d786c7e82ecdb02de71e7911284c26822fd38f3e021caf9ae5721685b823a8d82357bf574dc096b61dad28c18234f686274182c86af34ff17521aba45bc1cc82d87b46f206baf2def55114f3bffbb27da0755886f0b3bf5ae6ea6756b6182c0bdcb6bbfe7bfeef7aaabbb6ea44d8a4183346397daa521557a36211201d3757c8d690d4c9a5dd1310621abe995fbf244c7854ca9272f2ce01c3b14269b57f23d02d3aacc01035ff57501f0ada8e2005c4ac806c899ad0d2eedd445884300f341173014579916e4551cb5ad5dbcec59c936ad4280d68ea158088c7ddec4ceb097c79fbdc2bbcb2bad49f77eef7dfce51fa02fb3b7f467527b1529bdd0cf4d23d78662b07212aa79d4ccd0ae603b9ca4cc07672bec9505fb95bc140bbe60dbe9a3c4dd06769564716eb18c595e64b73ba6ede6978ed0d3543f5175f32ee38a96baf990fda2a2ce456570c493e2f87f55aea42d8dc9c2461c2ea2e2b9886de44edc3b2fde942ef795f161d7af8c3865f4a0d4e44ea5f217f6af76193e2d22c17cd9bf6cfc3e5885de7f807be81c073d1a4522985f9d7c9a5c72e223c6b8bd32bea8845d84b645c1ab654175ca37fe8f6472ae62fc58aaaa280e0cc82806536bde9b31f120f2324246f5ce008a33c7b028d53ee1d8cfe405d43ce2da7444087dcdbb08ae86a90a6b76cdcef303c733b6db79cb30e837bf891c49e3b91732370c2eb5eda9a0748b1919f25969197c8a8614e975ea005c55d447af391749c61a13f190bceeb246d3c6fa944f5c8c3704aacc6e895fae3224566af712c907b52ff07afcfcf45fad18a1911639f98f44cbd69970fdd408d845b62e10c6adbe0962f13827fb80cf733ca1f4f269bb7825a302820b3ac7567e7062b0904fca3750f18618747e92402c3b09ce2aa337975549031de0b5a9ed2690aff7d38c063c9b93e878c570c7812b88b2479cf5625660714052ed89b6e79734e4a7fd828e33f71557e32557175d4d8ee2b044c5e22adda22f982134bd6910ddfc3410620c9bfbb0a997fea047462117a83af6c39784ab29a9863af243aa446e8b1056cc1836dd143d2ec873e94142dc49566e1f1ae5c6b6e0878eec717f31c90846adfa5125cd07f38b1840361c251a1cce96d4b82e9329640c4b480fe06fc144895097b1acbe0e9f014f4b46529f2a132522012ef08a5e73705a2536b0bb08c7061ac319a6cb99a7bdf00c47f1a21131d70f64f51c3a22556d07a7cf589cc1557c1a92d0a9cb1b8a41c6cd4fca4d8abae3a312c8b6472c3ebf8ed13a6579181771bf26814009f6da6de09270c60cd4d080da488ae1bfcbb5ee1dff821c339815b35d799cc185bae4512c6f6f9fcc4cd988ee395292c96574629e51750f0b7f78f59db5fd4f383fb36b8c4363d59ff3280cd238dee22bb0ac7c800f894f48948079411f5d0b4332cadcbdbd76afbe7582cf50643fe6ea15a326ad52e7f01c8909d03bb4d2415bbb3d9fecb55bf483571ff071ec84d04ff6665f747adc7004476336954bdc2d38af46cf57d2fc04616bc8c6814f3e93a553aed4568588c8ccc3cf5523524f501376323d6bad850970e9dd22196242602324abecc82cdb9bd9954005e94785dad08d383e4478106a8f0503c6fb30bf3ed343b3405c18c3fd9b434cdbdd63f2659f86b1a34408f69318d5848382a4f0a1f66c1cf136ebc8b7301fc02c27a26e7ed27a33e13213e9114ecf900df9876d14c500b01a39b16bb1891abaa2d38e753ff6e7930de2badeb3bc76a943d6fecef08780e62c35900cace999e0ee7835e8d9f69a8a9faedea6a7f16c6be2ef4696e057e33087c6b0e6d6b30307cbf4e1d102e4889659267df3e6dc8259da98c5c133df1ee0e12fff552b1d9fbf1b6bd5c156ade793dbda53c99a3a8c328ec02e3f7e94716f05830426268cb65a4c1ec3f6a39f3912cd53129ac454ca2c744fc1f3b95a7e1202220664690ab52927fc626b6b90c4ec4bc37f25962a973c91c08ae95a6a4cfe681fa665596e2c55fb88d32f013683757e07ad612688e76e024f37b2b7869563e34e74ac9d88d11c0a79b816fdcbac73503b3673c182df14272f60af943007f090e02c1181aa77d58f55c97fe0a55b4aeebb5449675849ce4092845c10c49d157fb96484ab79f881e74d169e3ec997c318fa7f542b4ea753c9db67eecf4e104a15894649b81da92abc7e9b810eb736bcd859df5cf145dbfd12b930354b362f537b9d4bb890979aca5ecc827719a03ca759dc9859f3a76d07dc69b12c8e765af31ae49cb470296c6dd5ee69656382377b41613fa969861a090f174f378e0e771a0a221ae43cafd6c3429778fd43914be0b006dec3e9ba7b35711123ae8bac4e918e503884c9a5f932a8fa7e92ac8c511911f5f137e463f5164c7aa8e61c1c5780e41326cd6380616b2e1cb3e3cf12df4ece7302c3fef4dc27505c4ba"
        )
        val state = Serialization.decrypt(TestConstants.Bob.nodeParams.nodePrivateKey, waitForFundingConfirmed, TestConstants.Bob.nodeParams)
        assertIs<WaitForFundingConfirmed>(state)
        assertEquals(state.commitments.fundingTxId, fundingTx.txid)
        val waitForFundingLocked = Hex.decode(
            "03bf28dec4b1a3efe1d9a5d706716d33c583b0ac0e6383fad5c188642992c43b54299c4bc0307b19b0a69fd6d5e092bf6699ab4bd32f9a8cc7fcc71a3fc2a2f2b2621080b3b1e7fc7d7cfa67fd2521577a51e093485234963cbe40b0f35557ec6c0e0a076e4864279c562fdffc222f01b5f5db5b52cb9440d7bdbcd3d2ce6616c0d291e07b34b4215ab84a6dd520c9236f98331f4ea005d3ef0b74ddd85e1fad2adf2734c6e776e3c0c8fedbe6aae3bd20b67e00f2384f7902b087d66e907f8683866455ff0b4570a4d1c4307d504958e97232f9b9cdb6145f3d961cf5194d88870e4eb15a6062f8ac6649c6a6fdec13aafdc902079f05ebf74f7dbd7502e3fa07826f23aa8ffae8c4dfe52990ad74daa33ffb1315a9cb04f5d145decef6e8948c2d9cd4a6b62dec9da0c36a2506db97a39a4bcf7c183d5c21c96ced85023ed22b7f7953edc713c1e87f882601fa882b807c5397e70556e78417a7387379dabf5420c525ecf690bbedfa022af149151b8e339d54ae89423133fcb776eac20e4e8d94621ed46fe9bdf7bd94ea92e5ed35a1523f2827578b97bf7ce7510dd1f701c158501be71fbb37f22dee66adf37e2645e18538986f243a3a906d729df0b346244209bff3c99af68debcee875627bfa314fc52bcd898e07d9234159c2a1207332e77c66bad2c8a2c46a613f13d37d88b5d275b9ad75b0c5c4a0e0210cd7fe242fe3203267f6a1659df7ce0ec60d78a6c9604ae35deaedde6258bd78c7691c0492d7e9fa96635eb7ad63ab19b698b2cf6d4e1aa7ea84b666cf1aa1b453b9d561963422b3a49486367816ff994ed1b9e8f098887d455802706c4757594eacf9144d96c89471bce82a4ffd79935ab9402e8d3c39cab1de4d36730ac6b3905936da6c2c50f178ad5c2a62e4f096c750a0047f7050e9cf4a9a47d022fed281bfb12ba0bbff4f8a8dcaca1696a46a36c7a8519c0d6c8e691ec9b0e10d18a1f5ee82fb62396083b2c7e5bbda4cc96fb9975146379d43140b7d4925115bcf777cbc55571d873cce19300e7111245115c64432f57ceef9ddfb7c48a0d54c5ff3fdde334d45cb4b826729a7f47c4d61f8b96175a562493e992abc40082ebd302bb2540bd64825b74c34215697ffb0e454fb60104a1dc84db19f2ee7a4fd1c42cf63f26c96676fda01e5a9ee025b8e04295f421d1b87e7d14d2ccd6825dea15e9a545f5b7f598ed6eb565bdbad6aa0e68e9fdbec06cfaafa96688eac0487ce5f1974cbfcbb4434db8a2f6dccc2a0f6d7941948480ab6175c5cb7eeda146acee026d8668a1dc61c206ae62dfcc841eca0b65ecb4fab68608d0684280cf4b507b7a0e079d9ebc3937be2abe174043673bab11b89dbb5283ab2619213bda60b3e61875f7855cd173fd20dbbe418942354ac929db64684a2401cf4e4a9f021cef46c79696ff693fe1a567af6f31bf2ae8e536f353304ccd422580f016b4334e632c6f2e63620f524ec71826c6a49ca90457e725dde0c1d9ea6c99ebd195c8954f56ba9fa4fcff6679b96a15990cd595d5bb233c7e5eaa0fa0b4385a3699e40b964fbe30a54c724bb2a99a9cec8e994a184b8ca3a70a0ab0361e1d2536f8c16ff9472b3271c3704b6628f9e53c155a0d216954e12dcd54f18c06ccdff52ef82a07b471b5a1c31618b5e712c67777fa33583cf25eb8af457dd7dada6bd0611a9295e62e3eb989b22154874fbc7fe130508c7f2f7b110356b10c826ca8f1a97fe2b70d1563cc1fadc788aa1f8a959a68322d5c9a1c446c099f1b7648290b9b57b7560682498536fbb6db2e6c5993fab4db53e98d2c3c4b388372e0949785fe7f75a2fc43188b9ea3d7522359de14b7f113f3396fe93472551db32c9a05532bf6b3ff8f0fa5c283387e424f6ba89009415cfbecbabdc2c9e4c64bce55eff8188c95f96cf5d5992586f2b278f9f25b153df0b0b92191b6dfa2a9d902fee0da80e762c846d9a0bc02d1c8266d68fce2c5cae433c2aa0f6a1ed29ac7915fd3705c308c7a00c269dad571c142f57369a976b2aa0df9a51da169186ac1483a2fa30ad9dc32ff94d09ec582a880bacfdba6da1de4da17c6b6636b50775a873d82e0f056d9c5650aafdf069eaf23ee94b3fb976911d8669512bc866a7548c2f4fee28065cd936ce1284e368ef99a80b994db44c1eaaf7018f541cb76d60cf80d7f8b12c02eadd23a4417c18d29ffec907ed2a2cb15989b52b7bd9a972c83098f7e95e940ffc08013e73e79acb5d615cf9a43b691c385ff7d4eabbaa915c8785908927e986333f7fa0dfcbc8b67a44a0fc3a4fb3fb9486ae8e41193fa3154c0a9d13da803f25eb48cb7dee2c3fa08d7f6c3befb05f400ccfc4a19c365e7bccd1ca05049199bcb8235aa3bc235436854fe4bb2378a1cdf7b8bb270b9bfe3d0bc4bd889e8da7a863f932c396ab9a786fdc0b60d36440599dac49e3de1540f0caef523e94ca5591a4cfca120d5c997504b8c41b3674b63de814c7fc176a3302f9a6a91c0a7d1adf11dd356d56df182cf80b65d2b6a76870b2acd877b0b84cab7f52ef8efa91cada1632f5567b51fb7f96ff9fe718d018927fb653ae8d796d24ce0eb342da2a49373aaa9cf5660fdbd6cef98a80d4a0db9b8f044317a56463e19815a36a4a3a2d463f924a95f2e11c2c5a611eacd9e8884bfb4f3dc65086a67be85317b64617adcbf94e344fc276eca490f70d2e84cb5f0ff42df8ef4af5e21d399c4182a61cc1f7192a1880694541de5dc2bf7b1be2e06f46533d67b14904af0d49690a4bbba7de3aa2660698775e5142bff52422c7ee85673ae4239f39a7970b3daa3dd3ec2b1cc7e281b33d08f2aa5c39eac639f0b4ae3c64caa2f30a511e6f7e64da78a6d19a3a88b917925052c0a208bb312eb8d087d81b25f8b98d88e3bb42bbb9c4c5149c600d7b1060e035212103981c0c2a88ab40b5fdb11b10c6dfa80a00f680942d3101c59636bb5b5d71a4323c29435f3aaedf441e1b7cd6098f3dd8824a02c105de5ac4f47a9624023348f7222890dfe9d808a00d027fa888f36c0399130d5e4994d5def7048c0360f15a1ada50f75ea09e3d641d14039c2e8bd3873091fb4d4df27ce225889250869e8a6ad890988e6b3de3a9adc282ccd809f6c959f7ffcb9d06bf8ed790ec4809cf815c2de4b4900c307ce627b22a6774bf0ac68fc2dde6b344343251d66efe15e1481e49613c64de38e993ec0b9fbcf5ccd9b658ef8af2dbf18bf3ac19e247b005653bf794228b0829141fffb6c45329861ac953be16e833cc156bfb9307fdabb9232dc9141129826769828a704174d16cac4f780422df862888dd714726d06997401a4441f37875c0e6eb317d8ca0faee5eb9692db60643486c07fabf9042c870c33ea7f27f8c793c33d52759dc3ab5d8372a2646efc32fdaf8966b38970de6ea33a15623ab5a97772b47aca2addad0eb8eb11a5fa4521ccfc77000c294b2346af052e18520077e600b002365ec146e629eb0cb33a67b4cbc6bc6d180fd52bcab1a9d0821daf963000f976885a7f4deb5f91e44d7ce5fe11d0ae1d313ac969bbcefbd827e8dedb52211e72a37d4028363d9ee91093db954c0202b7b5232c0c3bed80dd5f9468e1ae4ddfc0112d5b49a7089dc2b933edbfa9373be594cdf0510d958df3cc5637cfabaf7cad234a8eccbb75048594aa87f6e902c9ab5ad8202e6db6b8ef21e87691527a68a92f35f60a3786e961804dcac662b0c6086725c93927f8459aa458852bc0bff72971c645c572040cc021680d474bcfc1b8bf53532f5958331c2bf67b70963672602c98de5dc323736bd108bbeedd1bbb5f93a7de99e3eafb5e6208efaa4a928502252cd45de2d8d2b1730109cb1f1c41ba38b718b65469b09b06cad469fe30be85db678fb722ba18ea756c176a1ccea8a8e6ac9abcdb51e68ac3e83b2191a396e104cb5535ec9ea1d0258c9194b35620bafa63d7a0d464b475f4bb7386aa1798fb93456180adbb86de81c78e7b8cfb34e98799a8c8d9844ecbbf25a3db384b8e50515ebf1bb8acafdfe1dbe1b989cf0a850ec4641f433cd1744fb728adeb410ab6113bee4c8d56fad0799474e8230bb4f942a72c03e7866493954c4238e2faa6750f886c2d8032b7c64f438f71768a001ff5872eef1fe08d6800e2039c8b8440949e9f1d7c4c1eb58774c17bbc3499b7c6f2b193bd362b020f8a14f7287b6382eaccf6b24d41acab283d911a4ca00035a8ff4b257b837dc5d1ffe4bbbcf93b0b20bbf0e7630197a64863692559f6346ee5a6fc24d35ca4284d83d0f435e18621f4aa191f08cbac2c6a13ec62fb83094e04cebb265db17ab0a24ddde865892f346b711708713b6bdc47d50d517e4edd380b2a09ec0cba29ac5556e23e99840a62107132bb0c406c2c5a5cddd14dc3a56c017f0b391a4f899e27fef4bf0ade6a1fb121026361b3626e39d9848caa0e989591646c4ecfefe2e8281b74fc2f1cee94faa057889ff6777184663266cd968a3a5396af4e542390aee5758dbb85ec1296ff493e9d86932968ffb6a74317bc1b7c583ce3d2ca8ea45134fd49445cc0e52fce78d1441a01b0ceb886cd2264b9e9a7978044893142677ceb6ed275c50fd1b7220b665cdef9d1cdc6b1508ac80c172528628c8b7890e8b174481f9d810bc4f605da3f42af0e012a50a28d13a41726cad09c2ae3451b5c4d492951264217a69acef4abdb235c96e8ecca0251d76106238b399c7d1a575ae6d09c4e6b821e1c6a60c733c37b02b83763e35c3d4bc1cbf61cecf1edb8e1bf92217a1a1e34ddd8cd24dc92ae079bb4d2f22ec067280d32c38eaeb2cd8b9cdbe63bbc16d8793d90518922b43126865ac57de58f72aeb46552d9bdd9b9e68034501ab94b7d41456c81165aaeed60e569ea95339ee6a44aa1df3efdb02fe119c4c00f450b4794ff5be4cbbacf38975aec3651d316eb60e7292324cc595f67f5e5493c7a5f23282d18ec6a43eb9bae282b9540b931ab4a10fdc7fd39a3969686de61d55ae4b065ee272d4e1b0c2d9b4d1dd1aff46a0ad5d97b5348a0d505e1dec2430183ca007ffe6bbf18152797ea2cb5b0f011fce245b1329d3904dc4d962d34334d994a992cb439b0da06a412edfa5af2e38bf433f59395e7076adc62ad6131c6a50956368d65deab589732189d6ea6c95bfb3980229e6a6aba64ca9eb89d9f52b08ba7a11cc6683b64757f1bab6d87b0b1fc941e53d81c5d0371a1494933763bfd660bb34427b84b16bb1da0d0fa1a4c6c5cec20ee17bbbf8c6e00f6010a8c0a26f841cd7424018cedec676ecc58f530171eca825d23df2808348d2fa156a48b93c42e0b47e35b0fd63f3ba698b973adcaacec123023911aa9f3ce61a4d7bf2721f9042a9b50833c622885d4e39a4d19b6987bae101e0e72eb9d975264a47151633c15c9e33675d6f040d7c8acd2243a05637335bba38776f45cb34c2305029a18b443f6e62ff1641487311dd79e38e73d10e8f4460f1a5288d81f98af36194263fcb6c242a2c16ac0522a82a95231cefc4e6ef506e5035a3f091804f6643b9a194d4d765f8b349fa203915d5bcc7f1c47f2bdda8cc8ac9b2dc081023f1a8bedcf44041385f87af4d7038b53d2e6295b418946e31d9cba0adb7ea77566a9019d854a04415f383c464d926f5ff541db49cd5c260d6542ca8ec1ae81ced773af0517ef02637f3516bcfe558a7a79e64132ef82a69a4a52e98ef6fb119063644f9ad6c7147d341641708b03e312ba5f22da8880a1d00c3a4ad2378e4204ae6c86f5963f57de70c06f5330c0d9599843691661bb616b3cb9b3d7094df1a7981a9fda4c209905b17495ea68fcfaff3b59ceeb5beeae705d069fd01419bd18afdfc8cacdc1fb9d3fcc4a547529387af8352e3f3c40fc92b88045f9de0ad872e1fce19b261aed4404fb717a42a78e91c0f8876f8431b72483d843301b0c3aa34d8ffa4ffcb2ea07309695af4476d6c83eb7c3950cf2d0054caeb0905ee7be9a7d96e1d6ec72021aaa360b40f686ef8f1df9e56976e98b1fe67749f638e1bb19cf6be14b3e7c1a557e077dc74e7fcdc66f01026032130802f2b1f536e835017db1525711dd773e1985e47f1d298f621dcf41a3c5215c3eab11b11dc4d3494d3eee9daed82e5974a7c9ece180b7bff5f82bbe15afb7357e3822fa83732c4a532ffa8219712382e0210966be95a1ff419254c97aea9b413cdf0ac3be4dd977804b4f600606ff576ba469dcc56be11a3bb61aa537df062afab7c98d6409e7f270b2aa67276d03399efa1199e14bed32edc46c08da3f7dcfb9780dd27714e9bb44a8121826b52f6fea6e081e1a516ca7fc056df141a9328c134470a"
        )
        val state1 = Serialization.decrypt(TestConstants.Bob.nodeParams.nodePrivateKey, waitForFundingLocked, TestConstants.Bob.nodeParams)
        assertIs<WaitForFundingLocked>(state1)
        assertEquals(state1.commitments.fundingTxId, fundingTx.txid)
        val normal = Hex.decode(
            "184cc83b4135e2d77b8b327a5432ee1ea10d18f51b602f3af563633d73e7aa10ccf01634be20c79da7e879b4be7a39e14e70df66c5c46f47ae40407b5bd5ff2fee1453e97df1697e36e7dfd36dd74dd83a3244205f4b25f4a479425e446337983348e6a7c1e18796ac59529cc3177e9aed28137ee834a0b8422ff05b7d6d09158bb3abe4cd90a85af82791d6e615dac4f30d32f63ca9f13e05d779d276b624531fe405e4c03b1286c2bcde7e1b55b052602381511a524931569e7e3c91a409607b5adb0b5dd75b1a50e68bbb5d8b13b3288eca31972028a760c0153982042cd976b6ec7f97a3fe66674ddac39f546a0639a83fbb10a01e09b1faa2de2fd57c51a52d4ef406b5957dc236ac0052e322e05841eee91acec1bff20b8961b473b78722c8bcc649a80e4d0df0021f3cdad3ef2d4bb434d8f818d587a1da269fe07551b3c44d2b6668f0f0dc2d4df7af1c31105c3f044ae2bd0d0a5c49ed80e71a5fd1afb908df72bea877bd4f403cc34df73f2b4423b3922df03745ddfbb39f60c8882b37398a89376a1c0b98d2e2402ec494074b7b659f2b53c2b5f7770dfdd8bd58c6a0ab8ad7867fb1a21d3ba0abce7f0f4f3ecaaf01f4811749c7ba16af86681b722903e253c4e201893cfe662f09b0a92d430121069304eda89ad3ac40cd8c417bd30fe410eec09e6a9d9f20492314b980ce8195edaf8043bf66827aaad68d79361107c5e36393cbb100812b219397d4d159d8205e03db39f49cd868fef1f1768442fdb996e667e776f240b56b7ba7b0c3f2151ec4e69867cbc270e369be00e3202ae87f65535b517c0d3526cf8358027e96a9edc836a0fc4b3c84236da3ade4b0548433f74576b31cc88b3da926ea0c8b0ba0d87cda621b518a0086000fe00b3dfd4c17baaf16264e60fca00c47c957d9e53fd4d5936c32498324afd907cd0abc4764b4e2ecef2e17a2f4a49c36a533d66b6759c7c78489ebac4b43a55b45ef161972b278f2531e99bd7a3930c68e68fff1ae3964117866cc595e70a4aa019efa5acadc2563743be815a7927f07ff75e785460d7399be4e4b2e6a6f07731ae9bee8e1af98246daa046843727451da0547781b011a06236387feee8397bb2bbf894bb0839cecdd64b9aa949919d71fd5da305fc599192172da4d148aea315d100f16c8c546fabda31b86bf47d544aab11122d95573f42df28c84b46c4d12a8c5504a23fc79d1c49af969f1e366e5d8f6e0b2e90ed86d1fb7bc2ce0e98885656572de7b9a90e926a23e6c311a3dd2725f4cc729a8a6c9705710216bb5be3cae7c8cfa8b46bea299dc141803941b9c7133dab6bd74ba0c8cc060ea308cae1978526ac8afab7a69f3bbb949dbdecb63e2e5889f2f0085fa77282b6b756b032fef6ad384ab7d1a99574db292cc233faeafa71cead6c499b6e2156cba37394a2bae6dae0fc186ca0731a598a5c43a142e5a347417e8d519fd303cadf6e94a49a770682ec7b273143bf969270e76b4e2ec7bfad1d5192e0273ed7f21881d8c8d0a84b2553281d1d1c165b3406876b1f1a2acc5b7f0956d7793e24e414d743346b289c194d4a28b68ab10809356b9dd48f57342d09f5e8946fb206a08d9e9204c58c263279b4383057cf026f3aee770e8c2c30f423cc10534ed81bba6041555efcb4494172540251905a695595acdafce3fb688ac19931ff1f51cf19a9c42266e2ef0087c9e09e702cd8a7f5d84ef8611a1debc083b790b363195146f49a77d59c00223012226bdd25652cf3dbe38fd99499df34f2aa159b919a90a4fce6d18a3d90f4771c9a943e574ef87c687f433fbfde812b7787b1f95fbf6a3e2566d8bd9052f590a83892b1210990bbf5cbda41d57a339f316ed05df9e0f97e746638ce331ab223c722fb0de96996a1e12ad204875ac0e7fb6ba774781f5c5dc1bb08f2e2735e26af841d4df3a50c56546a962fc144d9a0ff51997e064a98370ad0dd4b91d5697704fb0414bc26090fe5713ed6240ed09118ddb64c35ca5fad453838c5a1e535b5c3d06a44e4618d24e6c4b7bdc55c985dafc2ef3cbe48dd400fbd999792a6945732dfa36145f98d279da245d83cf7f6e595c754ceeb81b702784483e0bc46c1c163e20811c8f31a099a0ea120a598ecf3c84a79b34cfca89a86b5ae760d7bb8681bf1256c4f5e45a80f7a36576090c085446945d63a81c599f2c61a6964927923c48e6c0647e79024bef332d650c6b210cd89edd464886b613ca7f9261811520ad0da9dcf2c7b29c3ea1310d7a97d3571c5a94bb6f5fac0cb8f266f008ddf92f8ec7a94eb8d2cfa9eec56d0a6fddbd7a8eb1545d9251ea0c7f86d30fdd48e80fb461ba6dded8e8b3a7bc07246395e3a2f136f62b37f0d870084bd50db5ac66a2518c3f27cb1f77ebfecd2e98bc166c6bbbb4636b2eeb2c094f97796a2eb81948af32673d94e4518dffc671889d238bc76782691baacffdb7f283c4cef4311c4ccad9aba29b0c49e0b5c7afc6e216af80561322eae1952a25a4ca165ede9cde8e1436a678936000af02256ddfdd44e1b74dbaa2426b56a3706ce102454985954b8984c0117130c7dcf46dcc30d871e3624110037494967f0db4038d0dbab6be4eafa81da8ff79220410fbfe6edbf9f96383639c0b76f6c5680573a1a90c316ff497f6d8594fe0cdecffe2554f77c77bfe2a42c3c52684aaf454361e6c6d72b1c0f8ec09e96ece1600c402420fb9b89a734c9d7e1966acf43e374fb27b2d367c653339727240c7e439b1852c4e63cd96edc676daa52138af25330854734b86ead44b02d8cf2e92545bfd8f3d57fa6f2675b55f9f687e8393d14b364471e30053cce41e3efafeea27c77a7bc497f581e734c08390ba8a835545962fd8cbd85d3e15b2c17aad62ce467bb12d2ab61a4a67a16030d7ddfb1b17859a5f7a0bae2c9e84ef76fbf704d6b4d6e0fbc59a99caedc3844e498c4d290ed4e49aa323ba3a0a416f8c0f91c3bdc9b0bd58b0c21cc34165340163cde1df7af787cc7c11e83981acaa9422c01cc55f1d65b7f8f030f8f826d6781fecdb3711ed17a66a8d9ece11966c2b6033a97980d1ee18b92c94c42c7ad94637242ff852bfcb024edad97d2fa44c1149ef48c7866cedce2dc19e9178ef3045b0282d5077761181781635a7747cbfe53e6bb945f04fbe687dd8b466d01c35df89a91af3c5b9726d5903df63c9d32e7470430728cbc84b7d5f55c3783e34b428a6c67005fce2528c4439ca35bbe3746b211bf1dd7e1fb62907f51f863995a6259e126bc97d424e5f31d9fc09b9a9b77d3e1fc187bb28cb80adc61803df7c05894d5583c57c98ce8a0c44a5bac4e22354f115a561b6713dc267fbb82c3d9d20f45b6fed39f89e8dda520aa091a735b3ae773d95e9766a99184536f960841c8f11727a69e6c300c163efdee30a69d7dc916bb0c2e2888479fdf68e08af53dbd51fe66208d8a082e978bcf5a7088cb53e14db1a1cae19d9c92a23b1287fd398179c24237751457b9113364f488712a5dd9f5d409ba7f85c02e14574c11e933b968dedc6178e12af018e4b99688661efbf49ec841b5ebf12b4241e69bcde94d30c7d56c84cf286ebbfce93e305c0b4a8c926a15c0a62a2c59d567f88db10d0b1a0d7b1e10b25e553adadce4bfe5411769b79a75361339017b32afa6866cb9399eefbe8282d42fed48b1df63da3b7d630f9be72ba34ec5b548329419f74c828d33097f608bc5bd18f50d22f319e153962af3e9cde4e6eaab69659fcf3a5561fe57cbe4c4bcd053b3fecd089ef1ebafa83e235e53fc2fdcc8b2dc1688a43dc6e5c2d9e3d606ba1836e69a01a2fd9cb201a59deea54e95635736fb887f586794a4e462465e370f4021cfe20bdb8e32cd648197070622067f64db4cf2e4c0cf91b7cdd13f69d33c30028eb593d9912eb7b7f3d27cb6f94e5e122db4eb0bae62e822bf3f3c5df67c775d1b4e0cba321e0eb63378480e9b70d826c9e87562cc2bd8efc3afbb4bca9da9cd07b501cce5e65785f521ec4e1c2dbb0c457ad74e50956969b48bbcb9a9ec588f9dbf05d2ed933c3f5f5c5d432dc731de1477fb03cc0c7f1bd424a5debbbffd36c0106f5aa42fedd9fe79ec49445ccd7f473ce91931ae210d1969b5abf438d30321943c907b62b1ad603b4483842585b390e1b84ac255d67226d503c5048d630914a0f4e2d79beb0c4e8058e6573b3362af111b3ea6bc0f83879eeb1da0b6c8a81913b6af6017594ad13ffdbaf623363df0ecd81e5f074831303bb0fa89d60fba384ba3fc1eaa9776e1caec151aef1b42de82cb721caf4cfaab558030e450cf9640b13de79b3c02fd7d9586c7e83c64afe78916944ecf775d46c2e389b7dba2b6f907da303e89b5fd60ca058472b67da43df82818c950a77eb040edb9904ca58816831c16a3828e8f000c9a48aa80a85826afb4e8b1c64adf1e6fc10645684a0b6374bf8946d6b0880ab60d6f1962b560f7cc93ee794424115aa0896a2543b54f93853aecc05baf32ff1e5f23b450121bb449872035d915a9f0febc07acb9262e63aebaa9350e81bc6ef6c1dfad2b793dc15e1272832aa93e8e647764a9b107750cc8178a9683f5841275373529463625b8bb6bea8118fbc1ca6f3bf2a891601e5c9a2b917f7785ffc660a56e99b07604c7279b84c87e2f51e7c8ae3e0044f6e1df1ad8f8452bc73d8f95f410b3290848960581ffda351885956eff24f0d28520dd7932678edacf9682841794ea652c40bbfc415789bb1936d4b0ed9010f689c7f51305b057a16aa86dbc962954a7f0b0d74ac5190d04ad45ecacd0fe3141af0d3cba112183aa77e7fc5c7753d4f72251433604de854ec8f978d443000ad2783cf132b2d956ce8f9353c6408ce8eb30ca51646d627f8edd82f2a0d1836b44a0df7cf6f0311f4e1d9986f2a17adb947fb64f2ebe6a671cdd450eaec3b2a02cefbd76725be2837f38cda5dd3aceef32cdbafb3f4589f7d5175ecacfcd56e7b41cdac45d049cbac3ed9f1a9694bc41f4dd80927d0562940140b603772181c53428681342aaeac76dc6a81cc1efc3385323f69f73355535274b84df01c3c960d681ca178028f2bd115c1ad0d0bb842d4d755ae1162de8db3466985e8816f24c84fc1c8ec83a4133dcb730704e388352f2e9f0a2034cfea45b05c31b40dc58f2c47faf85b1211e2d8714b1a1d1372d5cfcb52635c7a3e22c45b4159263473942ea5d9a98150d807a0205dd52861ab6a8523dceb211f80bae1d7a1e66d4de130a4e2961899fe59d42a26e5f02f17842bce515cadbd5105e668312fb86f733e93a027211fe724511938c5b4275c00c472f8327670d7439ec861e7e8d0aaaa05fde8482b26455720903f0da4923afe5d2cf4ba6da8eaa213503012c155e803"
        )
        val state2 = Serialization.decrypt(TestConstants.Bob.nodeParams.nodePrivateKey, normal, TestConstants.Bob.nodeParams)
        assertIs<Normal>(state2)
        assertEquals(state2.commitments.fundingTxId, fundingTx.txid)
        val normalWithHtlcs = Hex.decode(
            "9956af3581fea82833267da49f132bdff660b09149091f9e762b165adabb4e6f80c755dc42af5c251b7c64fec5f391390cb6b2c4a31397ee6ebbfdb2c30b00027ea5b2742a87a13b1e78c67543422d0edb7cf1e81e9b22820be5a9cd57f5e26cfd7849c804331b59d961f54e6cb19316c5c0b1389cf37800f0f2978287fe0593ac0e015c4930ed4c1679998eb5a186a801cfcc0158a1efae3b74d27ccb1f6627aeb31f60bf83991bf55e641a172e512922c02bbf4cec6a5975df667965b9b48d04f515111ee0dc7d3b1dbb2a4026a045ad75291d881a113cb89eb660bfcbedc1eb41534f00a1ba9ed15eefb9f030f6432f9ddd7f9f255fdec151c2c28daa80e6147872549172f41a95d32176530cd7f53c52b725ab9b7c9dd6fbeb1a13be6a7f5a04dbcfae22fffda1385725b8bfa33a32c24bd21ba717bcc503e542f0a258cb4627df03826d0aeeee05670812e42d95d3257450b78bfc675bf1d6200e951d06362262de8f5455338e992fbe66bfa0093d9b758612c273e9c8db6d05bb4c13149c8fed856372b97ca527db4e52ed6194c1c114905a43b1fc39918d10212097f3f2ed97862f7119bd4bef6dbc2a8619977210a674c54f6467480d1afb961c593d5bad8e68e4c32825d9280997845a278d63e20dc81fff2089c2ab17510d051ae6fb8ed4a10ab8ec8e133995ffd715540ce5ad75d2f6de871b8829b133c824208e6ba30bee69dd52a107995ee366cef95d876b7030f62f7ca1613b7a8d418fb7036e73f57c1da546b922e73d6d4598a350442f9e3b84985af33b8cc97ce6217d36fd2292289d94fa97622e244be1e7a5bd2e55aede9963f5c5e517182b6357fa98423bb866fd3e4d5adbf7ddaa6c1ecf840cbcdc679608833545e4e5600bcfbca8ef67b524086427b8d7ee89b3d217b4257b8c4ebf1e4dad3b1328b1b98b4bd8833fc04706a6b8095933a710f91c119be3cb2453249b01ca46c612091628117021698c74962e0027ff540aae7cc8d132fbb8ca22ca9de83b0ef8db4c83cc998fd189bcf5654f763578344cc4263c2f5380d1e4aa09cf76ae8ffda364beff9a42c357c867888205e9fdaf1189029d0bc7873eecd7dff00f143a80e2a79875c8895490c8174bc6d6d131b9c40019b5164a343e8cdea19ab4f8e01f0103c05966de881f84e6b19d3e0e1e147408ab5f4f7349154264abf24c2762f915552c734fc805ebe857edeccdf595ad15e95c7dc25474a8a6332dc79e2f440a6252c8cd47b295de60df4def7eb999548bdbf31b7e21a2599c54fbc08f85011f7fa2470bc58646b39446cc776e88ff3d9d2ccd8ce5fed4a58a77c83c53a7aee26378ac671375318cd910b9031b5c6a588c7ab05058e439733ae993c5b8fed3a1c9e3c654ec29b133da336616ee97d53e60b386e7233b923d5473cd7f8543c69d063cf3ef40bb32f69c8a7aefddf0f4d21d0757fb89454f08b7fc28178e9d81c4c4a89bc5fdbc50dd981096138776693ce27e60ad7c8f604217a6dd6c8de8ec1dc4660c0883fde253b7fc77819453029888919c5c5dc47bf17b779d76f68a664830dc6f4db1457fff527b57361a413be5ed1680c3ce360ae4b9f9b83a722ba495dc67b618d41cd7aca2fed7d9e3f66cf68313a6ce11399f23554fddd668ba877b262c38c6356c20f8a6851d4e5bafa0e82ebbdf64fdae5a83be3c5b9b4350d23936d2da9981fce2ec94f9792a78f264e332c0f0b6ec3b47d91ab365f5438c1abb54f957155ca430130db3cc642fb7efc5640f6ba00c75fdad49f0871f03e45b9980344fe8860bbd573456b9152c2c57d9c28f4f8660537f8cfa456d9c3358c0514a8e7c01dc2da0a35630903cb31b4dd38ac56fafbde4f1869980984c7232debc076410fe2125c9eebeed6a40d41b9208f8bd74ca70fb6cb5a391ec44ac17bbc2b9aabca9e2f16abb1a3102337cc09d30dfda252a4572be5fd47e854bda7ea5cbe2d29e749a61b846a73b4becc9395ac272c65482ac1f96af523722a3aeb1b08ebf8078065f330caa353c4647e5c1f09ed6f19a7856a88002162e44752957bbca596cb9b3fb440bb50ce5cfa4768523a67087ebddbe99a5b1ca95b3d0bfe4af448432dc47b1bd0ef1519791a7e55d1a0dc8138686d01923e94d0d8ae23e27341e15379bf39ea989122a8857242629be741e39df25a248879763fdc8817111a7450a08dfe195d8679bfb65700afc5832ac368c70d2723b5bbd2ded8ca48b5d944a0ef04bb438639a7842f1f5ff986261da4fad362a4379888214824b4d6daf61445602e3a6ad0755391dd3c2b4b17c0143998600f537be5474d3b5ef53941d03c5bf5f24d5d0c32ff87737da8041c25d2217f13a792978ed2f3bc50c0e359d8202daa89cc1c9a7a8747c0d7ae1717213db2054898bd4b6f4746e0174d93dc2d459a3e7202e5236eaf2c2890ba986e132c5b39a6723177be1841affd52d836f3d2dfba49f7c3a1e76b4dba58606421dd9701a884d9c1bd08ad83ac396876a3d9982456519bfd451e307e063c16fdf4f5e4a0fcca9f095a1dfb88b71c23a29be3850b87a438de3da20aa5f1af93ccabb992552c1223929a248070ac1ade7ca4de0b638cc7f11a73389aa4a606276c4ac171cc54fe4e636dad07c5187c823854eea2f1a5727de52c187390e76a1463f408dfd07b3c275fc45dfd62dbee578e470d09bcfdff4e61e43a4b9152c687ab78d2ac9608544223f5b22e79e6444df9dd3637c4bb828a334645b8d11b55fd4c73e607197ac0f612679ec78b42aa5cabee8aeff766aa8ff28227077e1b0330ecd10f5e68b575c17e237fc2644dc9bfa5e372c14e194cab44e6f8704f07b11cd40d05137175bd8a8ded4db077ca2d26faf59a32c6e05ff43ff2f5fb088b0923ef8d8c8a93dffd611d0553bb2dba550626808229e6be2234b027e8de2e60dd55f06cdd7b7f7420074db4656cda63e65f229284639109f77347ded6028c7676541aea8b3a6b916f155852231bfa00d33314a8ad8c483f52a0d93b2d87556d0671a4cc717db8f08e55fdafb0a14fdd58d4d84d45b1f56157d68655c366e51be7309fe2153d29168e9b5ebd3fcb86bea4007e803e0cb1d97e1c71f6761ac8bc125775585f674a9ab8605ae447d2c4478c3643876b6b4882818c233cd5e1bde539bcf671b66c82ce5320dd0140fc390a902baf353b314d08599c043f625298a592358c71f8dab756745e0a7d66756785d68d4410b89f9b7982b1f51b45d7e9e5a8383690017eab1d0631cacb88ed5ff260bae67b5a3f40bb60eff9fb5d5dd1d58a7121b24e86fe2fb88e0d9ab06cded97f9910f20629c422e86681b44800d0df8c4f14654eb387eb84cdbd6eb319337b962535ee412fda5440ad90dded531016ba447b6a4940c1f50e584cd3421ee34839930f446eed02a28c9c4d181c736c6e04dd3b7121737dbd37929aef999781db82902881fe001846b20c6c90539434976e4509ed4dfa07cefd02b1033704bd5703c30a28c06f46e849e5149852b5903e6413361acf76f8832dbda61432f2fed3bfeac4630b0652824cff86315d3d167ba9ea24cd8ab2af0505e1e924f5dfc2d0229d07f7e77312541dfe341701ed07039cb0348e54cb85ac5e669cd57987a8defedec6d249d6c7164fb4fe5bb63ad1c013ed754087a92f36dc11c585153d59e5e9ef66347517539d1ce147f65fd13112a1e1d125ad29cf17a4e797be788bfc87465853f78d5f9df03f882e85e68d594de7fc633d3d1b180edb3089b07a0d2b1416a575d1a8786698e9192efb643e7c5d61f608494d22c37a31dfb7f1c028b1f81d8fd49669ace3d4193486e8286ab5806f957f795d5b633a3901c27adc219729ee957e782e605d4d28a15ce79c6f8f433016fa85a9f2ea3edb9e6989e11250825155f764383fd6ee74b541c40ef042abcede9ad9ec0fbc324ead2033216831ae85e8e4ce08004d2141c8c95b879ad634e1c9537cdc21bdcfc84779327288b5d43ab890ec1dae765e1a878ed7dd648705d5352e937f9a2afcc5693447c7cb14df5d0ce86e182dc0ac0b9afb4c6ea55f54b5cd49832dd492860439568e36901ed43e2c46680556546d077a3c62082ed2a7aa82ef9ded8a7bbba53828a6f5ea62d4a4d1ed0251338f2758f4010dbc16a2770eec1c598f6a73b30ac62fe9094bfb7b3b98b969d89f2aaeb30219f56edafa61bc053d62ef68fc8b67d477c599c68ed54f39df51a88bf7274504ec5f1455c8c5e7a64f088b7703342cedd57a28cfd418d6c24604ee26b73fb4b9415e9b7ce8a8f4740bdf4d74bbeca8a03c79ea8406f6eaec5a6b1d5bd563d0c053ebb50cee0c0cc99c0edfb05e4dc22b74cdb98ed16aad6d8cf5e6b010ebfba20a07f3636698a897f4ef6b5b02e2a6469eade168ff861be1ac89c188bbb669e4cb8ce13eeb6984fabf8358d8b338ebf42a4a6d672f3636753c94969dda687e9b27ce73af5efce03d6a5287430c17558b7fbbfcb2379e95eb25db290e1a4e98999de42e449654d69538e64240e8e6caefcb8724e118b82330662123123c00b3ceb644d1f3b87e40a112556647c1dccb63bde1800ec95fe1839c58c1c2f039c4f60f9354df4ac7fa473167ab44be8d08b7651eb4ddaa5dcbbfd99b7100d9d2804aa49f0d71f84efb8318c55df912b42be489ad71e463536d9810fe817ab64030e6b13f444f265528eef47db0b4f0f3d0e595c245f407eef4188e1b0cc3cc7b7e27e114afe23e92490d7186b933c2b3700d9eebe3f3ddad9dfc154f6067e17111b5c76d68a6417c6763e4c1801b96a240886a7365337833629d5d11f7c75453eb02e10249977cefd3cb21cdf3947466fe74116dda30e9eca340b57acfba512289c5cea99725e22b77ae61962c210049834a77d73180b80b0a44f0e20c72e42c4af7431e5309c5e7b56ac717e98e770c8b2b8fc7753a997a3a445cdc22676d27a732851794393ebf206de79c635403677b5760528685d5a57815248b974fe9c37fda2c16910bc4c165c537684a998ab3a99c81608e4a13566761e980b13e0b0263139fd35d937877a83cddb4a68d56f22563af82fb5d3951974c7501fabe9ba603540351643106624443e67934831442c7707af80cc2dc95750bf53065d490d3926054dc7e8945c08fff7413e989159f19e8a3c2188890780b5759162571c4188aa6ee7082f79ead793d64b24ef2c90b770b28a883e0b7fd7858c31fbec4626ec4c29ca3c57e326d07118e4dda372f61816abbe8be3cab2657ad79c25762a5a955dacba629395c037f7d679a3b865f6f3b9b5002d57bdb97b2e2c8c42324686d474f993f5042273369febde5a377b0721644e93056d3510ba34789352be38d1a0fdfb2df044667e683c7a15e84ac5f67f1149c782fab87e0f515c7c5588652520b22c00032de918df7f5348a6d6297c041f9fa14e0c70199648f0a0cf3d57e336dbabd09df7a3667934dc78f99372c1d64289f395745cea417120086e1d2286350fcca656234eace92a4a62bd2df25c0f6fc0efb323cc17f7a12a1548b5338d451e34c5200997c64db7ce4cf99d1a93f623eac321982da79c1a3214c5f847c41e8094cfc747d467c3672090c42e2316c90f8f9331e425121142f709332197366dadf3033bf76b47d76fb148755b2f9d10f0e2995770d4b250531a57d413fd49d2a0133e3d41c06a409e9dcb4e7eb2f71e4e69fb8da6b2dae2f75ea6f9b7cd46d4baf43f3a04c282e518548addcf0e34b9cd1fde6ee74dfaece282263c477df7770ea02dbc3f9b1c74fdeefc69c1b8f385ce8d71fcc6c3aa04627f9c10185715d917fe4302b3cbdffa4ae312ed120d5f47d0bae554630bcfb45d93dece2ce21ccf5ad48d94bbf0b8fc6d123189ff3ee701a07e525ab861030a2546255afa56f36d1216b00eb6abee85bee2a1f58a54fb15e375aa3d8dc0574b87cd75b3c1463bb551cc752856c36c79a0fce359b7e720182f8288d30390c03b7d915c410b52b912a22e875aa028f371ef69b007208af21da776c922d893b7feabaf32af6484aaaf241345503c2e41f80a25261d826879ff1a2e1519eae1b4ec8697b53728713f43ffbfc0fc6dd37ab367f69a02190abc1098f4add63132cf206e58ca8bd54c1e457e3c3e5bb4a106a76f7da1474d566c1bf183d23a6983c203035cd0a04152aa3dcc358018e12c4c6f8e93e3719c5ee06e0fdd414e2663fa157fb1b6826f9b1e357b450b8cef987f67f05ee51fc510c36fd46518ae91a7453dab7213c71be9c5246846f3eb4594ebdb6c19d6c2ba2b1363405b6d61bac4cde2acae8a444e20a1fadc8fe16da9da24ba288da5037dfa36299d3d998252af694ca86932f53c3af2e0ae41c9dc8346f66a19c722b0bd4f1be5bc969c60ccd7c3f809f5b1916eed00add06d38de574825712239926ac6107b6dcc0f4213b1cda2d0510b992ee2fe5482688bbbc24f63868a9051811a307557b5c715498f984f07d888cead959f6f47df5c91b15362f64a84a21ad7ad140763eb4a99d0358d23b6daf1c2219f5cd66a6305c5673a17a5479034d4022956b84689604ea5dfc79277fc24118942e0a0730ca7e884391c0b9356661f9945a2f4499cc419d25e2cc5d22667b26fe6cb51ddf5f7c2ff12da46d7472bb4114c7efabb5b358f08dabd1dd44b58a70df609efd4f639473237beea6322d5ade577070cc680aec0028ef5c322444ab7d27764611f5b674f0cd673b0aa3b1815c8b85c1c7d346b9d7018e23ec31d96d075a654810914c3a4887d882cf14ed7abaca6c072e4738f0bd172bfcc58ad0749bd687b24797fddaf62493c52127cb2a0773c19ffcfac90d14a11f20bd2ac9d88fd099212649a4c1b5325ed2332b42cd2ee6b8d400a183d316b2c39b60af1417cff374b7fdafe214a5fabb71fcb429ae436d19c1ef055de11429f0cb74d2bafb9f83103c48bbc2854b1bab2bac8b8037679f605fc7b429ce3b24e8c5b5d022648cc838537e5b34ae04b706cd07d8fe12fc63fb8d08fe277418a3f7c251972daa2a6a0aea94d0f85662c83f9081ad0e7bd61c760b5f7d6a70b16f3de3e009d579889639e1e3f9cab64dee2de589777c023c037a4a0e2fa08359d606c80d4ab70524914f1c33528b6c81fc6665d00f122c0339d6e52e7b316b0b4c006853dd45d3ccb38dd1bbefa654609ff0bdcc82b965d1d1e127797f6b64c414ade0b0f1dacb7889ed09f17d3bf44a8b4d55fd1477808933dc6d6b7b43acfef1aa6ff8ab30b769a7fab089b3552b22c1be81c725d043b8a41b00b034702b07ed982a2e4d36609415a84b304eab6377b1ac4ad0b0c45551b8f0dcb06e104b26bf63de05fd6cc64d4b9abef535ac7a263efb28aed4d4ea0395350c2680508c9f58462e99afa28d141bf666c1d2255ecf288ba62e453fc2800127267bafa413dc01e0e0e4d8c8548b67622086f51e8df6c23612a45951949258f0899b95e85aa8b582872393469e79d6506f93b1e699f7a7ff9affd8e65d63da1ac8702255aaba74d66e86f3409c2f1459f9d9c69fcb509e19fceb44cb103f61c91df968996c62624f8a449c41520ab16bfe674c26337aed3e19d820ed0eda7cb8eb0f6e6fe29dce344aaf4b6aa782e2a1dccc5f40985898be18831cb43386e7ff699c8386a2e4040aef7addde69076888d20a6ab0f9c458c4d16b159dc250c53aa37cefbde98ff7532d84db4333903c2d3f93671792df728e3f34aa6f693a74ce08e3b6eab458ca54ac60f9cc5ebcfb35e1026a0c096e359bffb95c863da4564ac24107456011b536f348aa8f8cdea0bed7a337c7b0327aae3b720690ba4164aee725020e1992153f1551d297c644527769cad71cee7ce870091c85fa2ebf82fbd4dc87c40741a329ea231e43e77199f765fc218f310a447896423c90ab079139d79a5c458351d52e6b4be3182869cbb4909bd79c38c1f2a3ef531b5f6e4169b0c66c019bd0b538e055ba4da04383364656a14449e0efaf8b5ba589e7e7db920bd8f6b8b9503d2a6b5705619143dd6813f1bd69cd9a530ef11b05ab6ce37e7aeec1cd41e025d52d3fa089328e577ea957366b02a8e4cdf0afa9140b9bb2dedaefec15c4f17ae8df02c1fe0e93e00f76d4b182ad92e5000d8a55230ff49501bb8028a9ac26fe55aba28d9a6f15f5be1ded02956208998ab9d67cbb3e0393f9bd57404e4a4e7bc8180cdbdf574fb5b4122c5595b1d30f6e67dfc2d4cae25d4119effaac7739a72a393443f3ff0a2d7d4d6fb5829f351ee9cf0ce4dca0ad5bb20e182780242780565bd0b7340a5d95ed513a9ff50df4b2083b8f5fe8d2ca1cc7219f8c3c816bfe827d8dcab24c120ae7b2b1c199ebe99335dae5a6e3f82bbd8e68785101b7a79e4a090676d3f7e789470da85fa8ab87f48f5eebb95080083bfc039fa10ff472b4604d66f46f76a3e2f5568e0d06dd1dd4a1c966b6ab545d2b6d24648c02d6bd05c7d79978e40a4654f3d8d30a855305b25fb72416cea5e259375518100f39d0e67571feb5c318f69a4157bca31597bf5340921ba8a98fc994ef50db46c54a9b7e55ab543a17400896d1ac5476a04b76cb22e559517aa8739227d41dbe92220ed4a9d4d63c93a0fdc38f764e65ac624b87fb4b23b588e495ee04c4f17d72effac92682c4e20a8b90783c600d0a1630f8a73041bfb6ea69a9a4700095dd3707bde0d3c4b164d3c3955e879875d95d4af198cdcb986ccece3cbd23f49ea3c6658caed1c07641aafe592dd98150bb1db928e07d158018faacee6bff34d152014f3e2878df18dda07d59082ca3db158e34fa3f59658af97c991e095a42d582336a51af4a8dd2ba2c04ee54b51b1b08eda383711a3ff4894fc3e74e9e834d8fbbe6bcf013feb2d0ddb31acd3247d17b01b167d5d14238ff50f30ba3a5c53b926fc781cfcf58021ac2cc7d4d48b73b382d8c00fa93a1f973df0d0aa1ecd1bea7cd9642a7f2f6d70306e476584c59b077dcca20d017cf5293b2291b57a1e8ec3f61238a9152628ff6df972075081e686a3bfaa5116dcff34fa65e2dfdc8e566323acbd73ca98d7d0dd1173b839be4d61982dec122105ca3b260a7b947b199e3b0ce15cf4165a0d064fe5f35ba75b3335c4ffee549c1805451b29b1ad158790d64f8a472409ee075e6f8196c6d468976a181e00608f4ef18bb4a466f8d24f50e04e66506c9feda9e355ce2285f7908f08849584010bd9b8fd21a3f782e819ee9099844ad66a5a2e7be1799268f886d3af003cde574a6bb4058d3512fc52ff463cbc2cf9bb33a8e3051aea36a3475f36a23069ecb16809b198d7495a90198b355afc52117f911f787b99c3595475df6ae3ecfbae2c9b0432404301ce8ab13371fafc63adc111dfc27cf6f01ca5663999e91eba2d8ede53e7dc90eca3699ed3b170223d4a8669939c49b39f54919d9468a536623df8037091b09d05431703485a729b6482973033f68d7a0d4299dcf7b553d0a5449070cab4b8110be7628298feb9ab50618ca6abd209bb75cced3d42e53aab88a956e824f61cca4180fcd7fb2ef9b7cbce616630b6d47d1000ba044b423ebb19fa0042d530bfa8bb625034bb7643a15a961cf133345e2002da7f947d3a016d95337b12e962cf3c680eddde2d6d997e3456feada4d3ede4b06792c4d5d96ce0e93eb6dca89c047380929985c40e58dfd81bb11b953540002c9c23ae0153440fd9520600c752186ecc4f9edd724a701f03bbf54fddd08332792c5348c78c28817583c911da02eb68690156472e5117a7eec38ae200bfae2fb1b1f0f748c1e37177dce02e5ebe6bcef0f28f27ae2610dcbf2aae96b9b2a1cd53cbe7a5f46e6db8460e38ae04218a3b530bb2e49507e3ca83ffaf0a43c7e478314890ee41874cc874ffbd40b592347deca4f0c53e83f6ecf6312575a6abc351024d0e691dfe34446fd2982af29111f5acbea5c8554d6c6060607e06954a14eb9f083d7f7444cf53a09c1df2972789ae68f3f86222244103d9886bad58cfff1211a445be828d95c270bbf334de603e7683f4a65555c4ef50cac648edffa19f57a52850a2e7261b1c75238e9cf4d691d9640605bf9af65cfed359dbba7802c2f2e7d3df085cdda6039d431f8a9df4eb14b2810afb077b1ee502f5a8e54e325bdfaefe28af6bf2e42635af2789fbedf9d1109a0bb7ba7cb612c89bf242c349ae570d8e666a04e43577d1b25524820d11f3fc1f8b80778337462b7f771e0c7506fd42b5c4056099c75eef1c2b8d4f0de08325e93e5435238ddf2d4b8bac3a2164d45af99ea8f83b404f144aa6d7acf5b6d6d554178278ca8ac6265b1edfadba308c4aae51aedb9d99c08a2b7c6c86cb8b4974713a8a827832ae0bf3ba766bb536d504bc81c445a6894523e7bac3c69a91a74a6d55ffbb5464d9a010c1b82dbc9aae92563e4a181176da8720a824764b9738e15b9c30ff5b8abcb5e9656da49f2448626d034792eb458cb4d1d07da49772a0fd3ce0eea5f18ede531be57b5dd8b938eba0f09d091369467746181495542c3f75a189bef6b44c4a1a17ffdaa8555e54421efc7d3cd3af3a0677f4929950564c7afc23554361512014dbf4da4c942e7d1260c13ddb1edc82b230adc0f8fb96979c96ce4031d6ccfe1ac4106757b6220d022e76a69ee8ed060f82fe8460e7cea07107d0007aa9b70aa310bf41f540d2cb0ba57ee5f9b7c2abc2d3b703dcf7ee4bc5c34f4dcec0ecabada5e169b70cf92592e668a5d6f09a3ca33317cc83ca878626323c3560fbed9f7cfd47fa81a5cea3635f3ddfd11b2af8e5a5a21ad6ac0e2b3c2f6e78e6ca697cfd709710ef6d599268609e2512f83653d785cba404b3b1cb9b61a56d32eac5e36518afee20b250227e8036b56c3d72590e24dc3e9413f44dd4af1a5509e84e8351579ca34812f54a85cce110f2c4fbf3f5c5e3e2f28ab6c971d44345a497d5c831ec40dc1b74f853c5e90b81af39de72de9ed09ef55bf7c5a12b1a35dfc2b3f9a89507c0aaa9702f348f59ad942d52fe3e43d9f814e2f100dd0036e7ee3b9f8191c138a6d1994f20c72cff52d059851a1f9b7c1537897f4a8f469b8d0160fb92f51c416a8da7747ee6a44618c66c16bf297f349909afa946c47f52bac242c1155ab80657e75bed00d1fe15a7274ec045a5f1585a5c795d37dbf82d171c557da52561c65b2cfb39862ac3fde6e0076340181641ac70708a3ceb2c5e2336bb81a9e898afec675e189603e6a42251709a81a35ceacaa8198d886365845f24500b199a2668ae9e120e8419210b7b119bde154fd7285b99d7ef283a2e29e2358cd2c3070d1d554bd1172fe98a83bbd9cf182a50fa3e4a3e75827693faf0ed4d5bdfd57beaf0dbf1ba06b712c6ee6e3c1c4f270f88380806fe5c6794392e80d42e1aedbed1b13635b5b476a3bef7d48407f12398db5bd84caaa6ed5e13ec34b3b2c4da1435a0df272b7bb7713f5ba6fe5a2f70fde0ed00cbf191ba946a98c9db2465033d5c3ce34b2b531881ca05b66d2ec6c13fe1189802010b7656b0a6829804017074af7620f60cf87d34ecb79e2c093b4923c63538183331dbcf5816eadf253980ebf4075168fe900806b9508141902515a92118766485b141341b9417df8920d9881783caa39bef27342c06db90e15f4522db943b00b7a92789a777249de4c88695004e426e6324dd518871bc6b315c3054274eb6b32ca9a7678c5f752a3987a2707bece7cd5c4ce35593e53e62eaaf4e299e8d0564a76d03742015f5574171c6ceaa9a8783c06990584a759442a08194241c04ff5072367c28414242e8e6a9ca4934d8b478653d90263874100d80ab2b4d49ac0cf249437bf57ee95cbbb161eddcc26d671efeb1adba54380d65ecf3b26421babfbe145ceb98eaf181201f8649f9f7e770c640dae41c88cbc95a94568a351769b06e23ec91bcd4dac985fe6cdc3e17c13a7ade7a9248e81959aa938b202ea0138ce8dcadceb244ca8201d3f8908c1394fab652126501bec6b4af8d5ff0b88c66ae53d12f0cb5d05c9c5bdbf54339836876e5bbf1400e3f7a99d49884904dabbb15ca2f61f213c2f4836671020766f00cab56fd7554e7717c2fa78dd8e0aadca4f782fafb308637c7d6c04612c3d177401c636dfb12bbf30a836d7f2296f8acc1c714df9b19bfc6381f7477765a7deab2f632b013a39cd38861bee609e39aef5b63fc939a430a679c5c1cc90e1aacb899d141560230b050c195bf1fd540ec199e3161ad82377dc992ac050692aace9b23c0e908fe301473950d755c4c9bab607cfa5ed70cf362f6271f3b7943d4936d8bd96f7484c43c5691ff57e5331a22d4c95313654d7d28c9261bd1e6be969c65ea46c368d1dd14b289b0ad4cd0b7a1e6eadf4334333622d7220afd4b42a990af095672464ad6eb0f2509ebd2b0c0c48372eb25ed062d3a9f348a8d0c02e64bfce503dd203c5951cd92c7493cab934d14f0dc68792ce28b029ad282e8ed2515c8d06be745e432d50be1eee4cee8eaf0cbfd24575e9cf8e8c998ad47dee61754a6c5deadfa8620f516a21c057b85b13263bba9343f208eb19906378bae1855cb9e36f0d9f4b9c6aa7f5dbd3b39c4ab29c1d75037df778da98acf90bc195cddb8990fcdf29607ef85526540e6f07ac530a13d5ae6e89a08a7881e6970ee3cc7155d878fdd8da5b21855362aa167f95e3d82bc831d1684c630e30ab6d89e1ea180245a8bba6fdf7375993e3e4884900b23c60dfa73fa004e97e1be1139103ac29f84398d912d333a8a790d22386fd09e29f86247d61b4df0ab981ce6167019d00da49cecaddf1aba6ef56b7b0c4ab7b93dd6a86c96dd6b1129315d4d1ed5498145fb3f9bf5e3d3f9bf2645529ed2ece991a7b7ca3a6b98900475a388f2fa893a0012088f54c5c473e097cd2a2eb61b555df1f465f108c6e32eb895470391b87a088c85079a2f827ea411239504770ea9ae258cf36ffbb50ea0fdddab42b3e02bce8e776fcb4b766df08dfbd44babdd471878a8667d9739c8be8c8c2ab8f3108a6df6727f52a1b11d4ae32816d5f3acd0f7a3c51f4222c2578d7ad1fa78838a29b46fca6d873f2bb857c4c2ead538bf1f780a4d51b4bf88b125b92a441cc747c3a6c9ba249feb05a7ba2cb355ffb93aad07ef8f3dc64fc70896bc23dc9fe3f4ee85175132e53b56aef9c8ff3676510e31ecdf7ce3fb12217a72c9fd29e389dff0a2541e2194b0fc7358224d98ab785479223a98f27c20b48095c84d6dea32b39f02f9ea78d1076495a6f3c87d9cbf47d5d33e52ed46a72814e1821cf9f78cc7c624b6c4b39d1bdb6bbbc754d1572984cdc463c9bdbfb08e5ade1515d4065129b72a24ecc95e07a6697b3ad0c9bc8ffb62183a1294a724e998d223ac27d4dbb2e4e10cf1d463e2cd7f8a85399e92584f4d321ba583a66ba8ee924e1ebf6fc77a2c2aa9cd7bb6a89746727d156bca686fed2fd85b9543e323c58d06131881e110f0c5ac0b40240597738fa4f908a109465ce761b1f11d66da5e786e1e94a0fb16b3fc3301d043bcc48a2ee7fb731290363d4fd63d2189b324f7a0a2d5469264680579c2746ededae5a7610a7aaa25a2b3709ff8e793ad58c5bd7a4a953d115dc03a5ff1bce6dc2fe3aee465b4a77305cd077164f8de4ba27719ce97b5733ee7cd471bc343a661765d67e333bbfe2ee9fe3515472b86a00a2680120d5e563d5e94cb92e46b8a2f157fc20c6580b888a40faefc7b2a0207aa623bdbc8718ec4b1c9d27755b012fd0257718a6ba95a146b5d7e46355645b4d2d1c74fb08b88cac73e052adf60a436e694a690fafb31fff877519e4fd3b3e38cb09d6cf0931a086cdae31afa74a410adf9569fda9327a915f7eb2b93bd5bb5bb9eb676b373bc1139a73494173cb4058d1c47da6300304b04e2d7066475d82c631aa690e00ed00e58eef31c88f3dbb45540b064e05f951a8ecbbcc6d020258c3568ea821f669b91e9d1e59d6e743053700fa7013d2228713116ce9bb5c222b62014f61d101aefe457048da226fea3ace5fe140ab7f53c264dd930a6"
        )
        val state3 = Serialization.decrypt(TestConstants.Bob.nodeParams.nodePrivateKey, normalWithHtlcs, TestConstants.Bob.nodeParams)
        assertIs<Normal>(state3)
        assertEquals(state3.commitments.fundingTxId, fundingTx.txid)
    }
}