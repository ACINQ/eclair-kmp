package fr.acinq.lightning.serialization

import fr.acinq.lightning.CltvExpiryDelta
import fr.acinq.lightning.Lightning
import fr.acinq.lightning.blockchain.BITCOIN_FUNDING_DEPTHOK
import fr.acinq.lightning.blockchain.WatchEventConfirmed
import fr.acinq.lightning.channel.*
import fr.acinq.lightning.channel.TestsHelper.processEx
import fr.acinq.lightning.channel.states.WaitForFundingConfirmedTestsCommon
import fr.acinq.lightning.tests.TestConstants
import fr.acinq.lightning.utils.UUID
import fr.acinq.lightning.utils.msat
import fr.acinq.lightning.wire.FundingLocked
import fr.acinq.lightning.wire.UpdateAddHtlc
import fr.acinq.secp256k1.Hex
import kotlin.test.Ignore
import kotlin.test.Test
import kotlin.test.assertIs
import kotlin.test.assertTrue

class CompatibilityTestsCommon {
    @Ignore
    @Test
    fun `generate data`() {
        // generate test data
        val (alice, bob, fundingTx) = run {
            val (alice0, bob0, txSigsBob) = WaitForFundingConfirmedTestsCommon.init(ChannelType.SupportedChannelType.AnchorOutputs, TestConstants.aliceFundingAmount, TestConstants.bobFundingAmount, TestConstants.pushAmount)
            val (alice1, actions1) = alice0.processEx(ChannelEvent.MessageReceived(txSigsBob))
            assertIs<WaitForFundingConfirmed>(alice1)
            val fundingTx = actions1.find<ChannelAction.Blockchain.PublishTx>().tx
            Triple(alice1, bob0, fundingTx)
        }
        val bin = Serialization.encrypt(TestConstants.Bob.nodeParams.nodePrivateKey, bob)
        println("wait_for_funding_confirmed: ${bin.data}")

        val (bob1, actionsBob) = bob.processEx(ChannelEvent.WatchReceived(WatchEventConfirmed(bob.channelId, BITCOIN_FUNDING_DEPTHOK, 42, 0, fundingTx)))
        val fundingLocked = actionsBob.findOutgoingMessage<FundingLocked>()
        assertTrue(bob1 is WaitForFundingLocked)

        val bin1 = Serialization.encrypt(TestConstants.Bob.nodeParams.nodePrivateKey, bob1)
        println("wait_for_funding_locked: ${bin1.data}")

        val (alice1, actionsAlice) = alice.processEx(ChannelEvent.MessageReceived(fundingLocked))
        assertTrue(alice1 is WaitForFundingConfirmed && alice1.deferred == fundingLocked)

        assertTrue(actionsAlice.isEmpty()) // alice waits until she sees on-chain confirmations herself
        val (alice2, actionsAlice2) = alice1.processEx(ChannelEvent.WatchReceived(WatchEventConfirmed(alice.channelId, BITCOIN_FUNDING_DEPTHOK, 0, 42, fundingTx)))
        val fundingLockedAlice = actionsAlice2.findOutgoingMessage<FundingLocked>()
        val (bob2, _) = bob1.processEx(ChannelEvent.MessageReceived(fundingLockedAlice))
        assertTrue(bob2 is Normal)

        val bin2 = Serialization.encrypt(TestConstants.Bob.nodeParams.nodePrivateKey, bob2)
        println("normal: ${bin2.data}")

        val add1 = CMD_ADD_HTLC(
            10_000.msat,
            Lightning.randomBytes32(),
            CltvExpiryDelta(144).toCltvExpiry(TestConstants.defaultBlockHeight.toLong()),
            TestConstants.emptyOnionPacket,
            UUID.randomUUID()
        )
        val add2 = CMD_ADD_HTLC(
            10_000.msat,
            Lightning.randomBytes32(),
            CltvExpiryDelta(144).toCltvExpiry(TestConstants.defaultBlockHeight.toLong()),
            TestConstants.emptyOnionPacket,
            UUID.randomUUID()
        )
        val (alice3, actionsAlice3) = alice2.processEx(ChannelEvent.ExecuteCommand(add1))
        val (_, actionsAlice4) = alice3.processEx(ChannelEvent.ExecuteCommand(add2))
        val htlc1 = actionsAlice3.findOutgoingMessage<UpdateAddHtlc>()
        val htlc2 = actionsAlice4.findOutgoingMessage<UpdateAddHtlc>()

        val (bob3, _) = bob2.processEx(ChannelEvent.MessageReceived(htlc1))
        val (bob4, _) = bob3.processEx(ChannelEvent.MessageReceived(htlc2))
        val (bob5, _) = bob4.processEx(ChannelEvent.ExecuteCommand(add1))
        val (bob6, _) = bob5.processEx(ChannelEvent.ExecuteCommand(add2))
        assertTrue(bob6 is Normal)

        val bin3 = Serialization.encrypt(TestConstants.Bob.nodeParams.nodePrivateKey, bob6)
        println("normal_with_htlcs: ${bin3.data}")
    }

    @Test
    fun `read compatibility test data`() {
        // data was generated with lightning-kmp v1.4.2
        // README: it this test fails it means that we cannot decrypt and/or deserialize data created with on older version of the app !!
        val waitForFundingConfirmed = Hex.decode(
            "1335b1c4fddfd58133cf14f0d9f7b14e4e243670317b0af1276e0455e1a2baf75c3c715bd5f043dd72f437929f01c5c3fb1c7bc158b6c5ed788fbd1015dc8ec9029cdfdb76e793cfc29a5659b6fcc27d8812cc27813c90b08956ba26cf2860e48925978e1cbd8ddb1f4bc142a2f8465f08f277d5db1dd8d527979ed33dff7f61bd7e0c7962e1a6e25519e60cd4d4eaa745958434385a605ce7716463fe5535e1a8baf1c8718e409e6b758adf8c4d89b770d821f6563540c5e117495cf868c2c745c5281d08aa33ea8767dae65aa1021de339b0c1a85f07e26702b8222c22c2bd5f4a791df5186908b783d385fa06cd3180c5dbc77101fa1980e0014a5fae73ffab4ee8d3506168b917c61b231f9e7ca6fcd645fe386782a38819cc6d507422d628ad1cdbe6b53b31d5a443c3a42851dac8e2668844255054ea793bb1b38fd9d040466c68530a675374fe5ef5e8d350116df6e88ff0592d3a9f0c5cc52fffdc0da04903580b743c66a84a3b9fa3506c1b0b5f1f7245a1af50c111ef6864a1955b5791fd71b746a384f3915ad713f0ed39939c0c24b5704426a412e06ddbf422d2b9b812497dbca11887a30de2403f1641aaf9eb3eb5ed279c55112a5e18c77bb24ea8e2989ad55aee3ac2dfd5b7f301cbccf7abb3cb2175ba9ca28d7bbc4676c597d429fba1bcdd1476cee96bd080c9075cf9c7a44d707967ccc192a6c8435ecc12f8922b5cda9b04455b1ee6e1eb71eac9f3f8ce5b18c520efaa3b483ae6b4244433ae8e3f91d3898debca5b49cc9f9d1d8f4aebdb985ce59a932e25499c26b613c18a89846f69c723d309dc5d465cc39ca353f565bec1f1b21c11d9e2d04798d027b1540617fdafd5231a2bbd7a33b56bd25352a1813f7e77032a2c5f39d7bd510cd2680537b4bf58cc7049ab79337a1224af770e3e136cfa45834239ef9883c674face26a0357f5f6fd3041bf91aa73fab7642621d5a40df9ce989078d8aaa10ea2e053d85f204463cd2426ed2ace74f3a48c4225352e406617c184b095052e795801c7a16c5d631eddcbff66bbc25094a68da7a8e2973371b4cba11b67acba2a0f95533db47ceb1b21ba7b3cf1f1ad1a7fcaceef3cf6e388bb6509734e72da569569a19a97e6236d091b3f899abc981726004d10fd8380a19a37d9e271d7d40cc6fa3c71dafbd4d418b11952925fd8293de31ea3a8f05f5236dcf7faa3f695f6459cd0de7b33305d4b8f7489ccc523f8d4ad64d00d74509249f47c72b12cce8283bd4cb2c18018eb5ad25bd3f6a4be02a3de8e9e0f403c62d1b42d20f4c8fa5acc52d4ed0650646dd456c284062697d56ce6690d90e3429267405dd4328ef0c821bf7892936d9f7845f613977fc8e92ec572cf676dfef4cc6f6dc4c59afd4d39947eee55ec95873a1e15c8f1a0e641964c0e7b718761e61e0b29a92702c84c1bd06beba30cc841d2d7b23b6571d95df84935e01aecd38bcee3f6f35bf05c4008c5685b327daf5f4f04da2fa961d8c1bd040cb80e9f3ed3f55c8dac692dc547956c7425fbc752d677c5cc4f76c2e082d58bf802810f0e0102fba6ab97de8f14d5198a986d66fb9b3ea3047ae7cdc40392da14fc713d7b631c95336409c4005845f7d79aa1fb48007f1352018038a23f9c2a37c6d74d0f3d8fd17621fabef8c38e150d744c91d7491012233f84642fb0864abadcd204980b41e0912cf699ff85321da4168a15b0d098bf38ec9a3ec392ac441d6cb2a5d22b950aeace99cccd25e2b3a7204874f771a7ca8b7a13684ea455ff07a685f4fee84d9db74385bbf9d54346aa05f6e2a4eaf454bea1884a956ca1ad2a4b861b39e5b94ff3396338e88210d990db3b5c6317807cab851dfaefd449ddb0d9e679fa5950734cb670ac1578f54702e48a867abf7a040b60d5df05c436d11774ee3fc0629cb0b379e9ab6b3317c0b49e1ace2c1c69ee515b0889ffddfc082dd0b71d471a6e87f1ee444d7daddee6e926e8db16f9e969b1265d3fc0f0b2fbfb0c016deb583c2a50ca5296f34bb4de5dd2eda711f42ab0ff75f088197c79d707795d8ea5fd6568d280f4efe92ef18ac586379e75ae793e4f4d9aab4c7ea359f1e4b58ddd2c343b75e6b95c4cc80bb6a98d2d0651e03c31d208df3eb9cff4b3d436932cfb5e95e0d7686f7e47b9e6d19be7169fa9072b799d7097264eee07232452425ad66058e84f4e214053a3b40138370c03f1affa9858034bf2f36e65ade90f12c1664889e9165c836b1ba4e5a3a79542cff34a0d95b0999c843ef2e90da4b4f36668d1b37fd8988dff70fd29ecded7085af57b647d844768d4a10ad4eb091bb4ad7250b62f5ffa01e857c2da3d636279328b8d6891847488bc2adc488026d7113b536188a069c55f4f67ed41e12bf4fef3cfb37afc0b2baf5d766222b49a5dd28da6fcd89dc2b557098dec7e7ce2f1ffe578eb180187fa0d99d68b8c79bed57e18155919c892015257eec5a29cca4091ae89c9bce39342eff59bde0a3d5daf7d74520f8cd834b39bf43bc71e9cd811f649b475e5256eea2258523734dd8076934124298df961b6c08cb2eee66a95566c51b10c6de1935aee73afe09c678e3e5e3145f074fdf992f2d1a45782cf0f72cae1258f65487d72295c0d0aec64aac4fbec6d0edafb7f1b1c7d39ba5816464cc3286fc969fc6227f7d81b25942d3a602c2507df513a41d453c32aabe309043fe1c17126efd81d25dd757f5bd95741ce348bb5b2a3d82a5261e6321f85ccb861ae9a3c80321c976bf62994db5324787bdebad716510e846c78090a99bd3cd730cac569f227b63d4bf722eec11a7634b41a31c46757efcb30d7ce769a3be3fde9e473d2fa0aec7e74d7f71afae4795a5138e861f381febc44df7fe825f72cbb222c1cc27608cc52e07997e7462bf7b72b15cba1342560d80c59af731e127ef15b59b782caa28f2de6c4b92f575e632ea45f45763bb19641a942032acff978ea1e50016de55092cf51b350688124e8aaf4dfa3859bbeb846ed309215f55b85343357af058cd80d4a0277383827d2a40ef149a5e08ed6645207da60727add4d12ce4d61af86b737311f98f64c598631bfe28b2001ac9853398068d94e8cf34734814ecfab68692fae9b470c224dcdf3bdf933181ab0c2b51ba285e58b1e48de29900276e9cd93ae9475e0610b653b9a0a59bc779c1f6142aa95262ee48633d9c1d37514c3ef13ca5b238dc4dd1333d4fc726fb90de170fe6cdede5e9812b23297eb15ea4d94d59171b77f9670d34a9bbc552aa95ec2bc269012e632c60bfe973f95fc1e98f33b81a1ccd2e1b03af13139cc912bd6346e1657cfbcc4b3c19ac39df56be405b42963c230652146fd20c8e378ffa792fe25b01709a749b6fb098623110618c6739d7a72754f62c15ae57d7479ed27a8e449dafdd5a23d909b4af32875e71cd37b2b1fe564d043ebc92f7b8988462abdb9664a94f331a3257b6c90b7f1f1abfc5f415fd6485feb4548c93c25f4befd713b2f82610cf91884a628cd0d6f3a57771ab22ac423dcf8350eae52d5cda0ee27019bb21c6c188585c618420ef92077f290289c490ff220778e739a92b855c2e11dd7a3cd99c8d2d51ded2a9397b8e4b90e49859c088dc0951cecc1b039121fc466322a54457d6b8899562f5437fae13594810114acbe310e42c7a7f5d3c17df1aa347b54721c4e45769633e22acde9e0e0c88fb87976d7daf76f949e54b26804a16a15a2aa70e83110e736de6838288c577ad9b60f829fba21fe0c3e87c2d231a9a2142c59f54a3c0c89fab176e83dae33357431925bdcd016177030f733a61d358571a723806dcef1d7d3789b818ad162664717bfd9cb7aa17911c0877791cc84d6f4a2e2cc834bea81958d815151cfe134d22910c4cf3f589e96b0843664c4df59c7a00209f406ed70f71e9ac9958427a2d60546020fc86699c817effda8281de491f470b581e67b7a0397661c7a33045f5f4c04bfd4e4c4cbe5fe165cf6b730da505374444deaef1ad959f5fcfc2bf5fe116367f0d22b8b3d727269f0c776d30db5e6f5cba381d2abfcb1cbbc0995a2c2e68c7ca5b3e5cc72b182549ae05289d4586f1b991b7a75a7abf13f63eee95a556f928f9bc8634b2ab16c087a566dd85454e15e01425b8d268e9f1b0db0d459591c91b394737b7b63bae52ed20b0ec8e1741f0696f353f7423059fc129e5a06239c64caf0d5c145bb2e161f14ec850a55d2cfc0fe7192ca2538beb209a7dc757297ad7070c8ad6982c1370f47ed928cb9f007a68b46698269046ded5b63425a3084dbf6c40c666bb41462af26b1d5cbc96ed0f5d7ab667e9b8bc3597f7ab6f375aa8685b5343ad13d5745faa17506087c74d9a0acf4bf03a901a0bd9fe1f68c38672a0d204f989cc8963bdfd49a8dd17641a47c00db3269ca383fbb04e1da93e3d46a065c131aa535372128585f8b19558c015e0b4dc223782769d3e2e36fd2c403fe490a391f53cc15225f396d7421d1341425b1600a3d29c33b41b9549cb82181e620290ce7b5ed3706cfad901441df7e32e2bb367dfc2ac9f1f2f6667481e070ebc4ae75023236a7518797063a1102c8dedcea184b60e807c490209ec6daa3f4f69d3f701add6a63e962b419f82f4b5defc25601f799dd1b40d38e74e37aafce3af1a748fe7078a68406f4b833fbdd2450dcb47004135ab30e1569896d480b3d66546e3a76795218fb75313d058ddf89fad6373d37b88052c167d933152509ac4cf499bb9914ea3d767a01879fd2496f24780872c9d0e019b35681ac8ded1eaeba69b9654b40155157093a82505bf21bd18853cfc780fbcdb6d81137357215827939179dcd5038fd6ca604ba48c486d82aadc3b61b47a363c518547a9ef0ef475e7405ba2e366698225f0a4221c1d867c3b67964d4e1b852f2d7bdeccb8b85ae32fdca78a5b1a9fffceed785822604836f6443de94b01827f8226aa42f97bc23032840ad819b1bf3e1670bbafb38d5d8d8b5a92c1830692bd04b2958a0f598d40ca57877ed5c01cc232ccd84bb815cc211d00a72d7f81d072818c103b99dff53019ee225adc7c0012e6f2234eb0f57c1cd35d0ad6d3a30fa8f7c1d0590b76f269c034901144c5107d458d9de24fabc47c9eda28033c943a62a20f13aa0d2d7bd134eea0bccd8e44c5a8cfca0b537d3876dd04f25eb83a574908d0ce36cd9b453011d5d45a848fe9cca8071775a9160243ac9be525eb1bddffe076abcc8f6b0d31a9bc202f89257a2fa7b53c12cec50ae85bec15af639c696c45ec8dc6ebede714de4345859d050c79094320e2174f73b0910f57552d0141bda0f3de9b75d281a2b4a79f7c98d1f593ab1ef150b3c6aa274ab2aea3d68b85e38839588c081330eda037bc1186b496b2a7ca93d851a376e1789624a3fea5fe5d6d9ffa622b56331d589c2147d80927e70e8f2bf1a6e8bdd68d4f85694c34b8d017a3c52fbbe235340953084bacb444de12d87d95531cc21440dabaae761014dbe176daccb1a66245a3b543bf22cabefea1d4defd87b9992b5dded7a3a4ab0c94cb6dea717b79203843bada9347c7865e553b5ec1ac86cf6330379179220f18f03213a199387cd303675cf67d537b6387f5e105ff823114a22c6c990be2226538c256715e7f3af953f47b9b27ffec2da89b2b31388a8815dbd04370e16fa42004ec58d05ac647a6608e828b3d0e2a004a3e30823f128f67055d83e134fe17ad54a06a21f39b8e01e082824925be875cf3a1a6aeed701e07f697263f4a2eef1ff0033c5210b59743ee14c70b267f6e497fd34b778186ffd66efe8b255825481329a28e3a0691e701d3c89091869df6c21b761de2e699e7bc0057d3d60993e96842e324fd48762e37efc5dce4d5c397f8c7a0328bd18cc1cc47cf7971432d126649e8ed246a0c70c1908dc03743dbe1fa5433b79750989d9cc655a8117e93ae9e7157c44a90b66d45d2680677d17a1d9a502e2f4c86254e6df63080c5802608931ee89d85a8d505a7b28ee48449d9e12c45462e8a0563f57d65bdec6025745915a1a9810445b4f9bb84635237d9f089733077e7643d9dc5109656921463f2d4fb4b2bc1bea8d46dee57bbf38bc897105ab78ca17c263b0820baa472c4b970816b613ad6f59f28da9b97c9abcea9a517f621c6fd3fd15b93bdbcb4089e2d676d99b76ebbb7cc0b096dc124dedacd0f23d894677a0651d4cf0405abdaf57baa82e64e38de14b78bdfac0b1f0ab9fa274eb15bf144845112be84c6e1f919d8a8a4ef077c219cdd80128bca25180f0ebd81f6c092ffa5b6caa23a749fe98d7f8846521c9c"
        )
        val state = Serialization.decrypt(TestConstants.Bob.nodeParams.nodePrivateKey, waitForFundingConfirmed, TestConstants.Bob.nodeParams)
        assertIs<WaitForFundingConfirmed>(state)
        val waitForFundingLocked = Hex.decode(
            "45ec17b3f03b4d0e37565a9f9c946bbc5ab5bd1013f04da0dfac10e1480a457b295e56e3e017bce1e3008a9e1e67a46c99a9cc246948494f118405ce529390049da31045700259680e770adb4944d9f7ecf4bc0570cf86f8c89b4a85e9a6f8ff69ff19d391f45b94672e050eb14256d00d2d32e3ccad78d10c7556da9dc5f3534a562da5ed46f5be1ce6e4ffa8e8713babe1b732700407164f03be0e96ef414b1161ff4ee306770ead19db7245cb70408c4d7d8c885ad34e2d8950398135ae7fabb76d8acf0a9ad944f06d53167c9eb39dae8e5eda5b2a6a73a7a884fa00b63c322ae1e784a28c901f25e3548b6acb9757d69df04cdb2ff3369c0795fa4dd9df359df26c629f795c4c1655888f1094fc55154932b59c757570e8768c58e8bd6173bf5d51010bb1f59738031d095c386488f95e54921b171feb6fc3312afd5be3da5e6bd2affb5070bfa66c934be906b9663d8a45cd8de1b02c12b30a293c543a221f568bd1a9d69c362e4709bb646c3080eb71fe9999d38883b2b46e6a34850590b3b13e2876ff531add32b07efbd11fc3396f05938c8841fa50055fb4400d37611e89dc07c92b18958d2c842cc9b485034a4c4d69990b80d3015c37f4b13f92f1932386b98c848fbee1b9f1a90445413c0328704f69828b97da1a5f6b6ef173004d9afca4354ac8656eb294cd15684f1c3c60567e52c80d38e5fbf1d2b3f195dbfdc9302f30ebfe5db66790bb4150cfcb2328fe99d608701c3837dfc91feb2a784295ad54495e9c9bece71b2de945119068ec0048cdc80d73337b681d28ef2bf8651fc4c093320d21d83c66586b13056871cc3a47b9c32d32a80912f48daaf21e8dca2b1b411db6ddb38f2de4124e633a8ea2c18723950d8427ef3851a79b2bca625cb3b5b04da4c6c039b0e151974fbc7468ec19b366c6a879149592678659cd1528d94ce2691c76780ddbe89add74501037e122fb7602b34f58494f0996c78a06e5ef000e3e9df7ab194ea96020c039d8a574927073e9f98108a8ac90a6e6dd2136c0b4544fea7a24a3a4620dcb28f19e6c0d2b0274da8502edd7e2da7f98e71d1fb9e4ca1b64fa952cbc679e610edf4846ba2c7b307e54bab84a252e7bea0dc749199f5da876e781c0c480feca9f16154bae131ae0e903287e6cdc14e4e40aea86a9be5a7b648a6ee6c5217bba9172063f6aea434d28031d8b4b33c5e7e569bb418bc4244788dcf6c71851448113c2308104ff237bda8a292524842a06835b47f5357371a3c6fd9da8e1821195cd28499d319d9320001cd475bc741230c89e4b020f0eaa820a2a798ef6cfa588961b9ada212e4bb12fe3b652dc20cf27b512f4f3e0e5a942da80a830b8827baaab654849404be82c927ffe89a585612c71c3b679310feb8eacf5a9de6d609850525f3ab9cdcdabb40b7d2bf6bc577fc13a836576b0be710759f25967befeea628f9b0d3afe485feeb4e0c343b6d6667e392452789e5a9a96772c43bcd4a6e684746e04e9d935395725500c918626f4adfaad44897f917f4e9f338675d7d669a74cc15927dc6016e18264bd4803e5004b6450c4e4f31c47262b9d97641731464adea4fc5cb5c4a1b1eb9bf3ccb3f74710960f7035aec4b344456730be6d6183008cea849c773d12c2cd31471fe4debb4fec84695dc83131bca5022ee559a3e6b33709f253d7a816669cae7806331deb4842a3e30b58c3b2dc50d9894413cf10d483686ce9f7b1019a9b24eb2afaa2a8ab19b348b1a2e7bac5d373190d4615409bd949eb2173108489fe9587e57f3ea0ebd32be4fa19e57953805047d03c572236a21317db3d1007214536325e93370e578cce42e243c29b8b2a398875141f2e4b206b4d96fa5d7fc1e514ce67af0e31fcd4d7812a55254f9b534cec5a2a1b3d4cd00f90a6fd7b8a92d6c67c1e625b031161f4587223a57685040b47e40e7a8606654530f1d8dd1ed868eb7767180223ed877f6c7f6e860e8b6f865d32836507b8ea422b3e226c19301136620bfde38c7a0aad55331a67483d283bb96823a6893992fd3435f1040b6ecb844606f1b7b9a113810624f5f96c5e3229ad5481783c157392b6bf6260ed016ad3b9cd690ebdf84d6c1f00aafaedd5bfb9cc49085610f9476ccda8e4d4d11e03507d3971ac26c787f661753cd77b7d8b17ca4bb37d467f95b77b2b4e21c97ce1b7abb949c8c1970797f128535a3eda9f86f02a8d91b9ca1ae576c7455dd92581a907e0c530dedc64bc7a0ce3c6013fcfc171f22b38f16982e9f482a49c344706d324d7e64412a017aae75c2bfd8de789053d55c56c79a9341f6f418e150ada063203d5f77d43b138c63454e21e3c7b8b78201b52f8e001f15efb8924eef7112f27b6e2da08ffd8b9ce92c2e399e53641f8b9a34eafc082202d11ce752db9689df57abdadc2cb67a15f6627ff07d0cce3a9955d6a8c4eb2243f73b2912224d417c17086a97546598adf91ab6e18f7a77ed8f8af8e9edfe5513741621d8b7ecbd0261938cfc5086f64c80816c55efdbb584f266d64940e1f7821e7009509d5fe3ca2b018bb0ef04b08d771b52f2eefe2b20e39fe8e06bf86915b1c22b9e56c5680df25c388d5886e963e0f955323ce4f866cc03dfae973dd2b12c42d3ce3b8dd9ed9b2fdc0d15ae6fe7085feed0895388cdcaac4c539db3c115a499fbdb494241f85feea8787c2d65d27c74f3f30ba11bea8994c2eb9e3399eacf4584c72ac67f0b3d015b4e7e83ed1a6dbbcfbf3007326d331a01146f21e84e1c4a78ef9f9d122d83ca87db2b78cb46089a3328ca78e6c99a3c5ccd447cd0a86be44d3a8cdfcc4abb090d06d73e756b0b19231ce41d4d305d6901e9d4e4cb45ae1e661479364fbd6890cb9cb39b5322f3bd6c7ad23721ffd7771b1a780d3e5cb965117400d43b56e1560d916abd9fa8b730f3c776975b28922c5dfe9ae41de9d1742ad590af2cd3b8a7ba89bfcaa0d8754b46c4c673d96da3653fa0a6457545a5bf0058e8cfa49ba6438eeb1fe6f0999802f22f1ee08a90cc7bf855fd656a3622298ffa6805ca55933a7693c6703e329bebb54fb3934e1e459869eb3939edba9c695ea3e1d249dcf0181e125ab5a3bb6ad050e3b8bdb2f30b6bdaab3f6a049efac30612bef0ca25142682ee2456a9e6ce9421570a96c2e83cbeb2d3befd0b99e74c14db93500d829d57075ef670aa2d5df481846bee73a9d843b32a7bb580093fd0222640567f51a2fee07ec2b20efab05e5f360f5573beaf548fef29ec4e47ec5beaf5501fd6ef7554922d3aea1b84929d963dcbec7c26d507cc31ee41fa4b08c1cb71ff1a19f0a66cbc44389001843d52fea1d1923e128125f10953e815b81d99ea0e4eac246ca1ebd329c4bc235c51628d990fdf121549219fe24b50feb60f552f4da3368e9e0090f4d67fe136d41f11796c15d1a554ecc57250c498dae36b2af5bd984b36329e666f075f76ee77edd64a99e461aabb6466f0341fc90ca3032b24678fc59f89b871fe07e11f355fa01f25ddf1cc29a4aaca7bac17079b6d0cf9202faa4a3281449ab86b700be5535836f85a8079bf38a268adc3707f11ebbf5dde1d587bff9c00f884a46e69fbeb6c2ef955716be076567de4011db982ef54ce27e10e74675ba75df753af3d5ae6e619e6110f8dee7ef3341fc494eb68a0fec11ac23617653542feaac145a2d397bcee8d4f7f9fe1d366a22878602067469c5e5cf11eb7e8215567fa9ebeb2874b1c1d8ae0b820fc836920d1e51a776fe77dc9fda28335a2a6dfc50286a0fc93feede0419a07e228997d783f043ce47581e12f5a994d14eea232ae7111930a6e889998f54ca39cb85f193ba599b01873ef6ea61be649c617be2f7308ba4a1926b1b3f20cbcb659ab191ad61a77eeecc1e2019193e776c71e9e851d1b2576acc25db2a5017dd01720a5c4d152f94b1df6ae00cb1111f8a8e9e0fb19140141980901e90b34b69e5c432770b8bed20aa0eac72956cc9ff6b71bf7ffa92680edd9cac14216321196e073d86b3d5ca60c00c74013a4c0d1ce25e6ec90556cfe390a2c78ebabc56cf77a84543eb9156c40a2f0d6b19b886e037c42fcaeb08a181b439e4850b73f5ea38655e96d2250b673034188454256c5586ab46ebc39209a79cd212c0ca217e79c2bbc9553d869a0816cb110b978fdba8a002a198193351c77a9a2c24c793071ec7a89cc15684f8d41f07b4a7362db9c7f3586e7d3eac2b52ae6d74870e08a38dd72ccb7455e622affcec724037fdb4b88b951c5b1b83959a71e68455985f4cab879d0ae1e06bf087d6f2a9079381a313f308cd40debd0b75b91787f44c630cbb012b568e8fb93dc24c1b090133a6b578ae95e7abe25b42e1ef88d40db347f0f37ec3e40466188cd7e60bec10df33a061b1d37cf6108cdc39cbf0d7f5235c630dbcb313230956faf9bd1ab2ef9ab9a04734e65b36920c824f1706b313b068e34ad66725cf66104e63a7c2d995d3b0c4f78bfd209e65dc7d8213c0976672b12b302794cc7b04e287480221da2b9cf712253e0b7b9371aa559ac74f6f1679437496fa6d7655952be4fcfeebdf2e60ec754e9c33ff437b91b390ab199931bc6d02189bb37f7bb318435a62220d1afbcc79f4346147526afe09bd3d5211c51bc950019e823eb8d7490e86672889d6b522feeadd1e5f83f7ce99cf804bb4b689bf33ee3a087410e8f3c07e483ff592daa99222b5fe65bdcc542c3bb03feeab71b44d2b6aa09b259f8cb4071ddad178643ee5c17ddd0293d1cfb92121f4b8a1fccc4eb3d417034ef27741e119682543814b8d39888af0efdc6c32a8539a1baee07c85a6f22a46503e8bc35b66b88473563c9e4a43a53076fc3ffbbd2cb0d3146a57a08fda3e46d54a93b76642e3dd206f121a3526d4ecf73c410db26caa3e618163a4afe7ba1f4b21aea2ce21d952b46f598ccbfb5e9e872c318c89850c0e24dc940ca88ad33a6e4c09ce7f2bf1cb0b604ad739ce268623656e6b5aa0ccaa0466c19778613b6f7c61125bcbdc2b1893458256e65a3b11858460fb0791c52d97964e96cf55f12335228c63efba317dc1fdb270f134576e00d5e2ac962dedd8ff5ce9394e4a62f3f5e15475b719cd0bf22ac1d1ecc88e93bf5c819492cefd610c176f5ca2e84224f7827c093ae577decfe36b3426bd2c319ea8360309d86a86649c18348963c1e8d43d74cadfe573b78a6828306ccdf9832276ecd9657a42ba66d99d461afd5e6aff4644a95bb0d4947f21a53312f492ab0672e09fedc9bf"
        )
        val state1 = Serialization.decrypt(TestConstants.Bob.nodeParams.nodePrivateKey, waitForFundingLocked, TestConstants.Bob.nodeParams)
        assertIs<WaitForFundingLocked>(state1)
        val normal = Hex.decode(
            "29bce7edd8b887e41d1a73464d012562bac622d79ce3e3b16c15892a6be58e4826c2851329cee7e2abb5261d4def57524953a243372dc2f61ab67e73a026ec7f542c471e628a26185151cbc70b1e82c4cd953c9e6cd5197aa9f7e0bb072c2c25fbb7083e127d3e744f545eacdc2bd4232f5316714a8695ec340b3bbe8e1711892081f59f46cb0ec16359461cbe6f4efd96636e769da259f7de153673d369566ae6f473cd08cdb3d0557e072af8bdc55e82fbfbcdc5e6e5ee94a542bc9bf244cb931e7cca981f87d2209c55883d975df93f67437d1102fc6b1ddd11760a50249c23e80556659de1c1cff7e50e98a412bb17ef43912352cc2ace05ae88210347aaf1b0080d279c5d6b80e214ad070f1e3658a8c3f4b0078d263a879c02aa4c8c843a312fdc546112c130edaa282be1a000eee4c82903112bd59d5d665845d9f4d28a1108ae599772f3525f3b45e9d9e804ed585057e1bf8cce170a5d5ed29db1d94e1acd0097b4a4895a6518cfdc7a48b955a793fa6b8a44d66f9205701be009fc724faa9dfe6ccd90c13a53e59d1269a55b1573d3f2592c7ed3aae2d660747f7a65550ef27cd552a1e7bbe1dbe8f12389f55f3cbca4e22dbab1b4befe32851c6b49079fe5bd60a8c51c13b2a5436ea5204f91bfa63cc9cb8793ab7c51f10a0c96cf64a9a7353ad0bcb5cc96789e19dcd88cd24858e0545a4a37b6dec208132002a0371ca8be6cf51408f75816c52afa3039766c563eaff8651a26457af93ddf755f8fbf8bd31708f8daedc878161a8daa6831eec5884def98594397f7c94b5adc8311afb4687ea7844be883167702964cde716382b44cd0c7d91f3c3d3adc941b337f73ea02c4aad380e96c6d8dace350a78ac45d75fe896709442f29e3b59a26a136a9a9e4828676bfa22826c792c5fa0381ce14b715adedf83f71af344a7e42590f6a28e72f178e599fa77fe0271075bec6ebbce3acd07eb589b7492f8a40ef19e02f5422119ea8d6aa2df9c3eda885be65d8fe3c464ad5c9156d652aea509a3c5cee2ec7d95289e7c6e0f1e8ff467a63f76a4d5f5fd19034595d498b55eb53e05a72a2e6dccf31161f7aca200bedfbc5a83df5c34e48b34f845de55548d7c0e3742cf39e03ac2062057b73fbfa8a0cb6b0cbc403dcce9a1cbe1a06579c5bf2fa302a29c2089b33e54ecdef24a3ea7a3d5688de8e156291d570bdd37006cd9993c333720f6c4795fde0d56d335ff1ba86547af08618b3487f2c7634a92a868b66a0b532c6dbfa404908adbfb1b5491eafd969d85505e696733c1358209651cf391f6547c3736a2436dc0e458ead89f2c2dd135d347f49005481aa2bfc91eb28f82cbda1e9bd4af872e9cff077bc369a62f99aaf19984910083b11db623a4d42bff3030c96aa51cf6df2200addf01f74ba04b3b03711bb238a54552e118bfae034edff33a94a03e21ba53e7710449bbf819b7fa840af3bbdb3bc1392b02bffefedef074c8f36738c85f5b97c08ee294acfd300c80972e38d6faceb31b97822a6c3cad606d1253197e59bc654499fa98fa3d33860a4ae65fbf47bcdc8d6bdf07875b35088b66880f183c99e4c765716c3e2908f42f79637119d9763d0f6a27f48cb6868521eadfccb56dd0f6bf71d39ecef53c9459337905fa6a05c37d1d3368291d99518c99da2f867b7523db40547b96827cfa03cbd2a5e99fc605fc267b4de90fd5a39fcca547ec72a818885c04233d4292ee295cd25c02e7fc313e05b3833253b7e6dc9bee276ff48363e417b299c2b88ed700eee3fa411abdad8f116e5653355b32bdd09b44b67778cf708f6fb0fdb235b7811788cf5b7c93d6cba708778dcbdcfe1fa179bc26ddd75d1b0a1fd12b729d0a646acd4667762acbc21f354cceae766dcbfaf393ab39924c4bcb7c413fc47714168286b04b815dd9eabc7809a6b0cbf61b4633580a334c59f82dd87d30cfce6aae5aa66f23a5c730566e57bf6484f1cb77783636d9e19ee3e3766bca656b6724d7e9fc730858df95c12421e892e4f919b8c653401bb3aef755eeb5efb85bad48a3568c1592e2f0e20ab26c6cefb7113b23698099b8b801a3186c21610644cd05ec56535cbc3c77112e15d09cc6521836e2b9121309483c33b99a5dff09e3031b587c489b0c6129eff6233fca11e977b55bcdd61bd098ca4d24c985aa95dac39b6c8dd9745b4b4ccb9504680ef6bfc36aded91cf2003d090dab9db76ca17e0b55f8435b16b2e26131065b6fc9aebd3c67692a8104ee9f090765c6746dd72e7774bb148b518cf39982f167b676ca08712c5a1abd9abf8cc3c0d4ed3a6c7c41d367525650800229330a57908a0457d179405c5897233a915ed99fdeeb7d61e2c7dfe3f177ca0752701b4d4fa7c26922fe4a02797a6bafc9326cf618952e1202fb800b28f9831a9a96891213a443aac1710b92003c775d00032e7b3b0f1a8653ba888de6ccf1e358b0eec22da96b4fbe9878de65a623f32fc68ba28e8dd35bfc2435593e0532d4773b07730f53f81009180712cbf13861a8d4be926900320daaa574b02ba0b1b62b6c2ee6e44b4b51a5752c085bb68a2acdeee0955877dedc7e4631207c2cc66b028b2777a7919e5497d7c2c074aa40bd3c5ef262d70c9f0cf613d04a26b9ca876f32edc6e727f9df1d62842b083e8c6e23341ad67c29e0a62a2e073ad7f1e07cc6adb5a204ad456769270f4a42467be757bf4d524ee41fceea8ba0ac00a5822fb9e146edbcffa136b99d7eee79779ea01ee81fa15bac3a80d30b87a7220b57f27e07d88f2ba3ccc8436c405370a891be80d24d5b6ccbcaf05f94e71fdb12bdea62c3ca1c56d195de4a19afcbf5b73e422ef6814abca90b4e4fe972c64557dbd107f0303da52af48ad973cd7bd052768a22abcbcd45f124872d290215d29df1450d717be5a9f53dc1d6f380b5c2986a753d5dd142072abd57d469f1ff32a6d4d2002888471fb48fda0d2bf0803d5ed60f3f90aa325c99cac56bdf4b0a3c1957474336446489b73c96b9c20107e947295b4625640677bf9bba35f79e02e8fb7e1d7fdd068f4792bb68cd439eacc90662860b8a4ae113b71f56ccd322e68349ebd915613ae20b08ccde0c53ea019cb90554264f8ef41be33dce9aa6184309a935e86bc1fe71b428a751f2cffce788aad7161ed4d329fab5c30a4fb24546dba16a7f3db6da139512c1ad16060d82cd7d749a2e9f82b73f8c4d35f15749739c53264602376e0da000fa7307711a04a18b9bafc77f8eb400c48527e111df18a372687806c234c334507ff5294b2bbd4d973fa8efc9eb8a6f6f325afd9ab85691cc5085a6cbe94bb05022671750e438c94b39b2cf802887fa0e60d8c06bb364dc5558e733aa5d69050abdd6e837506f02a9ff23439b7bb3d3d680a9d2b68923f20043975530235ec851ce0e6b4ddd278527d719199d9499c9a5baba179bb7aff1d31f03de29d4faae78d175e01991384edaba590f8385b6fe8d1ea67683db90226d248a652809865ca8fedd932e65e039e11c49a799e188115b0e91decb8f18607e8b3b3d07cec0209aa0454ef97cf2b6fc6193a3595d8d3b9f399e6eec60c59de873df0eedc0325c849b82370752aac5a2ac3cfef8d9493461c07a46d21baf8c83a090dc189be07d464ccbe4732adde5c87d81542458222f79726a94258a860ec10af2ab05d68caec440dea0bbc30ec33ac2f1417ad2c3b121d62b55ac8aea0c25b490bbc2aa0f75b8aca53277d1860db15a0705c1014ff6689a4570344eda21b86e5382e5da295c43b3325477423c3c2d5758215d0ee462c809b296f91ad510a6bd60b9302ceaaf5d5aab2a840cd485d1bcf76079dda0f4921ae865942db191123c064f14475e5846198c1e1674d22a3efdd35d9cd7ce639942592ad7ceeb6c4a302143316b4470e3efc0eb904ef2283598ec3d7368e39cee17dcea09e7537c2bae81f1a07cbadc553faeba99a8fb95e85f5a136dbebb9b0e074fe48061b57439a61ac89d65c8dd7dfa204445fe4feef826871eb8971337a272d9604aacd8303f1317464dcaac7041e8c71535db391c9a734281b13e6b2daaab43c7f5cb38a4c45ac110c953014ed78535480ba08776f1ba57103ebc5d06a4d88715f7e5d0cec5feafcabbcaf399943d9b78558a70120bc5b2f766ddeef6cfbae89190b277818c727979092925d3c074e5d977c0b6b853b299eb4055ea602532e58ac66f8a61b56302d9706e90d593220aabeb926a07f6b6654614977c4847ad81b25de80161506368d86f2494a66f01c4874cfb1533974669a449c774bb9645f970e1949ff4f6294a493326668d2439fc1db2f41d5cefb2fc5bd667780c936acbe0c4cde4090f59ca284243a4f8608b3d4a1cc10d2c30b9232fa9697d3ece1069310c1104ab3fd1ed5185b43d2686bb91ea847a5ac8f8dbdbbb40b34ad2a18d9a14b37e531b5879ebfe63e4a04793f3f04d0bc9cb61fbd1c4df8d4999e182cdfffdbc1703c0a85eaa17423388756af216e6f3e98bc7cdf2ce7d112307d8c12d28a91818b39566e41fc09349e455bbe379c2e5462069598241a8fae4dc7d98ab3dc769bbb474b5a7ace9d9f62ff98e8a12651c93c73142c77dfeebefe014a3d091cfebb4869641bc096f3a0580ba3e43aead90f62e48b8549ca61b9aa1500f8cfed49a51490dfaba451cd61afffd9232a1421ce327321661d8a981eec71a1a64136c965eb24f8cf11a8e5c780d24c7fe76ffd9ea011b446bc0d6168e66efed546b906c78c30bbf29da9e923fe033b114200f0d1edcf0a773300b01f0450521554ee2972300b43f8fd997fe76fc2044caf3feda085cf7a5319141eb56dd5c5eff655b1080c3dac3d59757d8cb2edb40144e23bf759be78966cc10b4e0e197ee42c5beb24342704fc271ba11a5e6a5ad8ec26147fe7d04eed899e650bfa310e13f5de07c8f0a9272d73daa453eaff7614dcfcf16740fa3845e921039062c346815e5e2e7be295fac423cdb71162774635543427b9df72980c8932789e1a11bfb0c45d45b76fb9e69e698c7d71cdcdd230bdb5bdbe8a641e8c3f8aae26e4709ab4fee2c142f68fb7b9ca9db53746f9d16dbfc8c2f4260ae47df0327b0f5bf53190d67269701d75b218566f6360c61776caf0bac5d9d8d4220027e1e60b647edb096b027e812ead4f9f916830a13ad781ef6fbfa44724a69a50337738fa402fe5b715d1ce9ed357f792dc561b13bbf1ab962ee78889dd063062fc0c130f7d4c12b19e1785acd9e7650fc96c9e5f2005296d13d7582cc2b01ebba139bbe61be0528cc0bf99c7077f56cae67fb691648d110ec336ace7e50cdff771c9763a14e74a5c50f83ef3e4d6daba2b6b0606349e5c62fc9cbbbc46cb4ce3399097c4ca29dc78f205"
        )
        val state2 = Serialization.decrypt(TestConstants.Bob.nodeParams.nodePrivateKey, normal, TestConstants.Bob.nodeParams)
        assertIs<Normal>(state2)
        val normalWithHtlcs = Hex.decode(
            "4e6379e6b89c5401c0e7ddbf72e82da255c88daaa49c4d6b503b0a36ec2a8b1d2ed945cb493e6d606c2c44905f0e57d10cc24e2334ff3edc249a65c5df850fc9e90a8e3b547a00249acf935fd4bee35d3a6d3b9f907aee1736b464942c6c54226757ea68d704b56d344b38c5047df6c18ef15b9909e524b489a4cd520c75966ff1c48a8616a0df2086b503c4ef59743efa4aee96e52fa546437bbcf6f7173723ca8842dd0845387d88ab0dac0a79d8e03a4c804f21eed0fb95e271d6b605cdec462e5f88925f3a92b67e7b33459b045c72376d76f9c1c8f26358749d7ab5c93548a40e3dac0a74432e22ed653635c0f9b636e702a979125bb21de12b193eef815630d7b2b861a5e1d0a6bca873c6c31fbe2884f3cd3d1ffdd1c69a1e2f2075825459c2a007a5dfff10a220eabf9b4fc24b978e072867786446ce2753948d5bf471930fc356cd58bf601a8d3ca04dd99472e9de22544cbaae3e2e73cbe94ed23195343ff1add4b3aa5c968f374fcc2f5a6f6aad5be5cd82912ffef22ed9af0122103ebde9f036f6b2822d2405b8be059a61d35e0593daf5e8821de5dd2b90cd64d2401c109269944c6ae8640f510d1e36cace8e09a5013ab06da136de68e0c73bee9078cd6db1c5fe867b09a2afd25933317c72c60c8bdca26c3893476dffbea19b3009ef78b392c59c1aed785eb24248564a77d99dfbb7fe9ebf3e98d80768c3eeb8740575cfa2a3ad6533423e5d15aea1d70be0f6e6cdb41f1f80a16771033febd179f0f44b9801221e7c94f7fa8ee232ac291965c580a8b471a7f88ad92514dfde4c7f961aded1e1fc67a7621b11fcc0e9ba4b1cf0f4b63bb7c528e05338ff0c8182b0a887aaf4381618dbb7ff1f543ff562594c14b58e1d506dbdb04587744709d6854fee1b55f73a2e854a9eb1ce37594313df884aacd60fae7f1bc9e7a45c3a34415b6d2c447c8d39a7f4a69206912073eed5cb8ccef4df934b59535f9f2e926695ac1c820a7e7927f2aa238fd549d64b2020e651ae069296b3bfdb43c3a95d732a73a65aaba69156ebb84c924a69eed03aae4e43cd8b5223642a5d97237f342698ba3e60c6db05674d21ebdbdeadf8861350bebb381abc2725d66322ee3c49987af4a25933bed9f3259a97781043dc6a196b92ed4148342602137944eb33dde688b8515d9caca687e4d4a4d0ea1c98ce73110e59f10685d862a40d5471043a7c7430427c1947e3d2e99bd00e6f43d1175ce8bc70c0d6f788a2f58772c393272827887beec28a3261b166162e2cb2124fd28a794cdbc9476cd9a159ddb6b92460d727a2d33f3c0fcb57d169ae18027fc98b6381d3100b799f5f6ec2629581e72c371bc6aa9417894b20757fd32a3482e1377f45ee6460206525a161d488225daee741afb7e6e4af41c7ce87a6e84d2e97c8aa76e03bc8eaa829469784b750fad087529603e3c6c091a61365507ec2d71e84af7716f89b98bede17429f0d0c9a2d98bf8fb522e489d3e4bfaa9f23995dd370ee2c4d1ee319d78a63b7cb767a4a7af4cb17040ea4055dfcaf8f5d9ba72f1e9e7606db57e7ef44aee9644422a91dbf796a98d0c06792a99633267c9ef3335815d8b4d9a9a0350473f976021f2ebd74158cf10eab53517a2791b5799af8d0f32613989a13540793db53524b8e6411a5d9f1a1609c91fc4cc3ad77fae7f1ea381cbb6fd362a30d17a10c7022bd153dce84d4ca1b14caad95c638f269317f76dc6714e261263e40f5a784bf338c924e21f27601654d675c0ae61d3841e51bdd502736c8d0d1337e8afccde8e16e5774b5973ff8ede4922feaa965fc63b21a33cbfea570f28b80dc8c54b25842d5acad3f71614e2375324c55827c8348708d73318064cc6fe10903680529279d931b1ad425380f55276732baa2690e8602302e349edfcbd4587015bf4d08895570f534d26f94f0341412f7b9667483487c47e607e545e040f99176556a49e8b47be1c21580e1328e66c3975fd6dee9f436a77bd1b61b99e724c1336bc785862ef0110f9dcaf85c0fcbc351ae663dc473d99e2a13134b6503572b6affb60b2cb74d5b488c73c4fae8bb7fea4dfa6e22b6debaf9eb49b7851701c64423c23f65cdc9ae722e5a32ae99d58e5fe9550bd1704b1e44079ad55b91d3488123c56b0d543689cef77a3323bb85ae89ac051015d51d30da8a417cf6540af661009dacdfd90b9a67fa8951d4df57c3444522a88a9da76fdd9108f94d5679b746327372092d904681e4cf432eb75bed96b5a747ea4db15e7ceb812c549d15d050f406b49f61d31460e5ecc804f05e4b410171fb755e82edf3d675454b1e7783ad9172b6ca4a0e633340991a1a532cfa851b3f308a0d27b72f6aa02eefbea7a89d30c8c43a36d99b9467d371fc2bd3886fe25b9b5a9c943ed826a55df6659c68241c0aeb54ed76580491042ffd0f12ab1f3d40cd464e5844634f2f5b4c057070ba6832ee977c126f34f7dbc6f9008126fa1839519050b2f66d8188455c93ff1f967438c98e8a12ddea449530ba26e67225c2d863ff0c991461bce6a02d0c47f22bc6c3222020e89618e00055879f6ea80b424a84d7e028dfefe207837212bbd688393f762710ed0680a462ef4de4970dacef1957c339355edca19760dc3a4ed2789c810d84fea1cfb29ccc55909458b28bb67946b9bdfdd2786ae52c8d117f4df38e8a23c2449db79c1a17012cbe53240f109ead705be6715ebfcbdddb92bd524300f35199c09e89a1af225bbedf435023436c2c7633552e09f452cb1cb82daa379e1617fc62b35b62899c6fcd06aecb33d8902d91d57f98c5021212830af9719f1ec0ffeb42c0d83d9589cb63b3a5801e525421e3207445f77a65fa9b2d491c9b112a056c4f11bc30839bb2a66a5f378e6fa48721e5fb5d34f1781ec615e530730d1286f70e7fb85ecc76cf86ca3ad29f30455a4e1b37d4500d0dbe1fcf4dfe81e6b31593eb4d130ea0de2af8c44eb30464f61f77c181c58b406510317e1e6e19d0d816497b7da1e04b5d50935133f0bfbb1f421c616d18efa83173a8717240c79476df4cef746d431ed0804b40bb1ee126f042eee0645991dc05202f1f7cd78472df527c2ba7952328b1ffb4781f79573cc4cf9d2167d0b208247a7693ecebe707d17e071b5486650659c789fdfc7ff9cbd04cff64cecba3be373bcb804ac6d5ad82573ab43a40148c5fc785f5cc4c27fe413c81d7535625ef6687d025f5c2c152e636fbce2db766939ceca45ff650dfe3307f4af96c00eb759bf636c5a3829e3ff6cea02ad33b6191463d86191946e86c517e30c401e696bb482012dc9028e25b25c646159536de0578e835bf1890e2c865115d70dbb28c24449eb0d7de5fe9f154c0f40d2ea8ea7a1f5e5e6e97bfb510b31c201e180d3c780ca4677e938caca018aeced4dd041a66cf6b033bc43f1793b7a6821bd425edb722a3d0bbceec3ca9a814a647229e59007331fa334b4298c7c46d3584d60702778eb521fc2090b5b4f528e14077200c555619b69e1ebe7b8dfd9ed4bd9f515e271b329f647a32d8990539c05c9a5030403a5308cffd982262892153886c8dba5191385742acd8fbec97d493d0fe18ab816ac957702037d12f68fc0bf4173e6dfd6092bb5a9b7e5dc9996ce15f9d64508f74bc0bf49e0fd403dcd9474a91cac60d88a78d2a498e45eb9d7d8d59185954f862ef9ac4f39e33f00d743c4b249f0a70fd3398fde76fcfdf0801524d27dacbefa177da06e92b99bc1485b7945492c80b63a091651c2af0db7bc3e9584c69190c1ae907a4a00b9a07969e3c102ad28f88f7375c89b4eb9a6f85d72554376a9fd218ef1a98050c26e9d5a82ef85029a37793958e8a00ca187c717d134845dcfd9cdc6ee93df9a482f52c4c7cf909a8c579c1de4c1e5e4a2f67d4c7220f376aeab41aa59e85728ca429b83c96560488637c77d01a62836a78e494d0dca79116b7a35b0d35eca65edc6d40e21836a6c597a75a3ded1d57283df9fa7581d8e75ea8993783bbd3409470b5ed9ab78a095b5a6bcb67ff7f285d7f4167c284501ecb5445f6008d92bc0836816582f074a1cae852f352ea13e8ee2552c223e28f07c60b0e2d672c0e87a48942119f6a353ee8a35c5627d6b7f033aa0e7eafed565d570cd51b4da64854eda72392eefb13ca5ed475fec301ae92a770015e8ffef38bb8bbe537b9474ac8d4e5b3b1b7d95d1dde901677888e7860e8900f16228ced39af013548c3a2461339dc80877a4f6787b466f1869413a5e91c789c3b494bbffb2aed1303b34aae0774fa7f3e756514bc0f94fe670d56cbc88aae380195c90e1947312710d4e6b414ec7f793ab29bf9b8a8d9ef6bf83abbe178d7cb1e9bc9f9158e27794f9579c7d23b087a5c014792f581b44dd0858818f6dc28c9fbc559e60d4d509f7c4902d60765ccf79148241c822f33ef0c3dcc8add701f66da08eac7e78d15844b6901b2404e4835b57ce5e49f5dac6c6251745a346c08d5828085ddf18ecd7d7d2278c32d85b2d52d03c5bac1cb762d5c3e46e4a8d29fd7442010ab9cac943e1dab306572ca03ddee07d1e077302cc70007654f5c5078741609db36ae05dd63e5a9b660269e9087d559c54065ca95b9833e5957b8434225b4571c10d63e7ff85fd778d5f261637438d475f64c53006a8c8e6922deeb4e7d01157f26f3eee9be74f608fffd7284dcdf86c12c1b8029e04d471a422c49e6e814ba1aca5170b4739f0669b7ea72b61e1021be80981ed2975bf78109b09fbf5e9501b6cbf2568219b86abbc6862d091e85a13bd8ee488d59b94a2ad937258bc7c9ee5f6bcb5dddad136739dbe8846747fb2f162cf3100cecb121b0b8052066b7b1b894114e8707d7f3760bbcad5c2372d7e8679761b64b6f2d2ed87dd5b83d966c19b96b9638acb264c056b224247d42c772cfd6565a92f4fffcdcbd35861c874740baca960b09d8500ed0afe2ac7b1a4f43bd6c804e10e703bdc0fc93a5f250216f3d0c66caa62db8a28b919bdbb09405db58a644255f5aa021cd7d55e3ebd93d9de9f05034bf42dd24c89aebfcef0ce8d798261cab196d311b99f13688530cae93020799d2e1eee55ecf4703c1f2519e1b2e6169d4ff5fbcea43da2efd4d7f1d26b19cffde5a68d2721462118699f3d6bb8f8c4479eee5f731cacbdfe30fac39a37ae5213efe28c818c0102e36814802d7c25a28bd768c35f7552c76aa7ce985ed51914e253fb72ec18bd7723400c11f7f2e0b98e6f851bc439736af0d3fa3f07d28bd2759f48326b0c407c66501026a7057aaa899a7fe56ff4ce2bbe4c322c5cd8c57d530f2fd7d29682d8a66fe372e0f37e33df5686bfaa3c329fd30237298fa1e7cb027ae84dd7406d57fa426cd203ba2fac4ea2882fc37fc1abc3f656da51a35b89d0c200d8d994902886bcf0826de1d8176e194461ef7a3798796ab760b4e0e45bf3231cac2c674e4e0b5299ceac2fb226b5168f503d885f77a7d4dc3607b6924d714907f944f0b82e9a2fa3d8d537a8a48a38f7692fa9cc12822cd23d54395e78c4422c8305686eef73eb49c82292cc78fba80a4ff5c8615e11c340a080d3eda4654f3e229c0a08c330a62523f1fad4284b2450bf6f95646ecbd71ef95a1dd5656403923ad002cea6573810a3de1dde0c11cc32c8c00dc7970032db25a21610576a2549863b5cbaf5c5454bf7d787bbe29a3e3ddb83978bd445bf0631b84bf5070187263ffdf16132e8f10e117992b0fe1c08c3764ac4a91c9b0a88e10d4a890e8cdab2af9fa0e15dfca64f6f0dbdb03f9c36e2ee195bfc16529b9cd0ab09aca3606035c980c280e4d771e8e7c2f1d1c73c7af63c499d17d6b0c3760e964638884ea146bf4f4031169a7116f7c461ddafadc34788787ae85203bb6b7f641070fc3853a2de50239e2b998c2f8e948612ea34ee68c5a031ceea61921665d949659a0bf54850f463891b62a51cceef63b73abd77ed763a864a48ae5915b37f1299bc1b206f4e7d6adf9d66f25f25a93265b9083c670558e9c58fb149b20a321f151becc7667bcc2d67b443347a78548c8a8aa6da4f14f9852136979ed765a38d92b9d51c5d9728011bb6c0763d41175a89798e9fbf235203f82dd030225764879224db3c04b95e796cb4d26da840e51ba21016521da600f525eb9db7d70468b6c338ea51c1559e011bc1c35ecec2e9b33db48a4a276fc7d9c527b90a024279bf188b0eb2495a91c897f97327500526b483486422166a62189b9f2e4bae80f6f9ec84bd663a5425deecae56c6f2adb02f1fed685146eddc9a7fd8dacdf23e218bd88139343f5db12f5f4da89c88c545302798a11de407540b14b7e47a4925f8f7ae2b06578e11bf8c670530322b493b97ac741c629e4624305a0d24fc7a58f0a8546524f18e973abae08249b9e9d559c37c66c34ece88820660d72b53c5cf1fd21bbb685f77c00feb8ff8fee9030f6b59cb66a2a0084050a90aa633280695557b4026138f4d1183fa72a381192c322171dde113a16654caf25aadbe8a6f96382a23a53b3af3cb1d783d1320b9f97d6e46e352f296eccb8ef933a37eb830db54f57c6ef21bf565bf0bbd96f9174a5d5a6f012dd6684c6c2e0cdf88b84396324301c76abffc8ccc4052e1dc9fbed33de7f40938f64b6ac4de8e407f1e91a0669eca19e0015affd4abfc6e018f6d9019c0b7f33597168fd43fd38dce1fd3b5e1a5260c08370a282b9644a54a9be530469861ab65430239f5cd11baa2b222816a2243d7a0642996d927a5def62cb829552f793177165a265e32885ae61219eea61c06fa3572ba3f3283978e92f500148bf10edb33c099cc7a30994cb0dc2baf92a7c73db74da3230a837df2df69f1013a77cea95da5829b758cb6571b6d5c205d35317f81f9ad6afcde6fc7f371493b2204a24bc99f72ee4db2e889340cb23de8db54cd35b26ae3ace461e86f7234abe2dbbca1c51e45f28a7b000d17100d194ab177af201261a679543ed39accbb69e1e2f4d5f68dee4ed004fb5aeff3cd672a7bb4974f79c4e8ef017d06a153b43490104adf23c96cc41af9e4a358a35a4f75b3f24d1a7b9a6083146e74b5123498225c207acd19d5527764e4b185eaea3f37f3964de9b1e8a605fd76a25c7cf843d7fbd0eb28226dc26cfa227b375ffb99bf2e5118b53e65d3359b287185237777ecadebfb7cee7f355d506044d0ba3b91380935814678dbef6b5ff211ae6d747ae7cd872580938958e5c40618049bb02a93038b260f25927f8f63d56440bb5c36d5a900a822faac6e944c0f8712386f47f1945d6320487b8c3db9869f638aa6b487c652c106e68a4caaef58f1af6377d1c3a195ce01f02cb6a9be30d5a0fe2a000f68544c8123b8776b7affb21865b5f13d85d8d30512d498171ac6544c8231a39c190c4508d9705957ace2bea565cdd54bc93f5387fb2c5e88170d27b460aafd1ef16301f00773fe021d40bd21794b27d5c9a0f93a6c4ca15db98c0aaa972fca58d29809059504a1fa784d35c97283d1c4180e684dc155cc666bde4d67913e68fb619d7f207b8b9afe9762f4ab4b6cff6b38811f8e59efbdc3729a0a1b4d64a5a4995bb16d04b57072512b4e5311f3cbbc7594d549bb3f28cb0cfcdd029947ef1e5f964a666558b94d6eb1c7cd7e4e2c824867e312a1340dafa6063ec916490e53029692057e248eef65b785515795ea3d9878bf85dcdc5bafed9f252772f676c7bc7d665f67d58347b2192f9f6686e8e4c6c5672eaa3e62795b87b15c3debe1457f2c021736a3628fd1cb583657c3c5cc5d8d5db63e3691ef02e3ff35adb9151b1042a8457add02dae5d9d1e9a66519d83c3251a671d17d07dab606484385662bbf1eb44af40614989e834abce8577e4ab11aa37fa2f975f1dd33aa82d901c6b302e0f3e4293bdbdc35af07038b861fbdb72314c0289f8514c15eb8207e1e0612d91fca535c88d3d151b9e3f45df6c2c39f494fbb98c81f4172835ebd6e520b962550e874f616d9fe68578b21205ac09b7bc168b291473dee83841bee681ce3b353e547a9555c6ff4d6c1bbc7198bae16ee0d4833684d0e140bd55c2a62ce27c201b3d9a00fcedd6a563364370861f9d201c22698d99d5cc903a82b2a69ca6c84614acda28677ba4d30e42ac0668b931a87dc5becafa0f8ce353314577991a2ad2958a4f6b3d4c772cc0e7c4450a6e41722ffb6a3a226127677007572f8c5fefa4a91fa6dd74d6be4294238ccd1c9befda5b797c8f9c9598247b5147ce6710304cf49d4adaac041ce029ff6dc7c92f43a959727a803c55dc61d29c871cc7c427287163b20da385ce2552cf522aac224fe89ca71ee85ce9796f709b68fabe7d1fed0f0be72bfefc24e36647d91fb050cd2d94ff310688434213a634d686235acd850d2e872238db02a01a6291fc0d8c104ddf959a622b88d37d9be0dd16bb38a29f3edfa65e6869eac8bea31619154a033b600ab7fb1948dfd4f89b9c8ba55bf9f01050291f4e74cbf590f3b88df8759d2da503c9814ed75b566c6f76c21e1e12fae3730d9c6b25b46966633f3fa54adaaf7afe51cbdf33cac008848c15653005f4ab10a015ef02eb4a77589c1f8f5c15e25cf69646a9c7cfb74e5b57736194438cdaf89402bca931f41c1cc27cd711ae8bc45b784f4f44459e86278d84d3eab292e4004a787fa9e245003328be458f7d56b56927c6ba12b3ba04fcb86252cb340969d0b5e7cd60d62e4396e385aa059063911ef58b8ab2198516ae9419fbe2c2879cacaf9add3880f32d75096a0ecc8f02f66ad0807d89ed9b364e097eeb11c0a3c7230a69b8bae18a0260c2d174cc4c62d7df8a078111597d7027bac39a35ded73426f859d4140ee94d2253d823bd85e0fa9b60be234c6acbefe346620d145125cde8fbe5825775fe3619cc010326ef34eb4c35d67081a4af9ac8e574444e6e9359ead27bc7926527aa4523f63f501b7bd5c555cc73c1636a4be8426bff66a353b8d424038a4e81d5e1e32b4d219f969c79274a8aa8c1d507e902a77edd8ed430f1e5b8871cb60775391b95a2d9a13b43d01e2a45306f45fa0e01d15438c1a296c0817c332c60a2ab4fccd4f4bfd891af151b4ff25fb79ef0333a88e207ab6c4d2bc160968f7b4319352bf128939863d099c3b6d8435d5b52264e922585bf384b9d0df9f59e58667d42e204b3dea7e219c24774c7bc25db27d9d9fc4bf84a4fc5d98da359b01b484caed484b2e5708d0db49ef39acb8eb4a42c43dfa65473202b30f68094c4a19a7b9461efd3aa09c0d41e903c8defb57b8965e9f2d83d94ec8f3045436e26f49e62b755edb665721838eea919290344e78f604e0f7dc95dfb5f86b1b86852b319efc619da177115f32ebb99b14c7b683d7a88d43b88bd421529e084cb5353f84f565263f3e7193f051894f49d67e3289b612b3b3cfc045fea88ec80852f01f6ee79b2480b7bcb0372c867a8ba67f84cb8e1bef66b7c24d1b96af11115db49d8dbefe37100d06a41ff41cd1272367175a1b0806caa5525b1322936cf558fb62afb605035824f649f3c436a6e57f2c1219501ccec02bf5e618985d5a453e7c901caadbeaab67464254bff262bca505ddd66eeb0121203606eb80a91a262543da8246b090a06e22f2b1b16d0ca8a7e5c579fd9308bd45cfb421fce5525cee094a33cf55c5e15782381ad2809b1fd79cf84690b567bda7aa53266869f8b35c9fb8a0cde647aaf6f87afcb657f02df2b441af0e743eeba4ce29cb7128cde6d14ccd7e9350203365e6744c80786893b88de1ba415fb23c5360d45f0b85aac7a6a30184dcec549e7bb8aa6ec08d64bfb163a6f9b11abe2e8ba17ced0450544fbbf4217785fa978995f6203885cb22413430b93f0fce756d4b313a0412024e33c8cbda34e8f35e9cd74303f9327ea5361570a885ef40b6b0a12174ce9de003477a00292c1a1018243d1309b2af635ada4922a31207d3c5bf1a388701b0e9d11e70b7032fae1a7ab4e114d3e7c541465589575b442d113be51bccaac6658f0cdb8a8f09775c5aa54ee252ebf7cff3f743a0d88f5d951033cf5676300e6fd107d6e49671af0aa887034597df1fe3ef9c56ef5fe58765a9fbd2b8ba3bc43caf2e7e4c0d260760ea5a2075c99e2eb80ecb24ae73e7cf90100c85da1995b15253babc244541fab7a97a409ecc3749867a93d1ce4ab8635cc925de8ad39db498c3f95eea3aa4a143b26646dac639194b132ed68ae604f4f032b5d59d38f4eb507b8a4f6783042b2e3fd8866e84f75e5789ea875dd5f30b21ac6738a4a672cba931be17ad05cf956abce9fb469bff64044845b249c335a1d439df38385e3eefdafa6531e50bba001acc8445be5a444d80f6540468aaa2cf0bc977534b46c67e60ec5a22f254bedadc4d4f98b1d947ce832e72be7ff61a13873ae69d46abb40469f39a11ceb1f2f21c0d224db623ee7e7542751fc090d7e4d65cf343f99365d4699214d19447a649e88754952cc60af4bb6baccd4464d31e5f950dc0c658cd2e971a738bbf8967d4449cac39f789a514836b96e7665d16cd597957b8bf791a266bbfbff3d13b7ad54b6ecea6b5a67b5522214aa813ddca2544509525e8b4b07742267a8a170a55410b310273afe410fcb02a9b43b835b34277effc4596aa346aa77d5868a02a3752faf548ac914b4a8ad53b38d38ca8a9438f2d347f5e073963ed0d1fba73784c82b608b3c911a78edd8aecf49b8024eca360e7e4469cddd3b2b5effd71bd0bceaeb62fff043ca876a6f76ecde6f2a8e75f9f9d2b32a052ef509acfd5833206847f78ef52da0eed92fc4b72de29039ab96c81f7019df141d0f3dafa12890c298e7091d746b446e014223953994e3ba54f89668f35aeaf4a0c3057358fca38126a6820e35a6aa484b362e892f22a7e92c95df0e690cbd85153852f0ee4a1d305b1f627ab65b46049b8363d845e5d98ae15526afdb41b74044cc8414688d99ce8153cc8d0395a16a2e29ea19e52437555bfd8156498ec9e06df893a0bbc2743932edef349190cc81972be1ebc39d220d862fcac543f4b54c1fc6f1bbad56e5373a5f76a8dde4055c7e913a761346d01d03d1717aff62d210e277625d1c1b488303f6e88f651e9780c3aa70bc22b6eebe184314786cd43574bf1ad5e26e663434798b2d8ff5ece3a6a221005b87c2f9b2144fd17e43d2177d8731d60fb7e725b056af27164fd12888ff3cff334a3b2d5c7873d09c0e65fa70625c31a5a50472771db4a209f1da2c6fdb8017a82132d75a18abfac4639c5c5cec80482d64c04fa3142fb8d9d06ffab477c22efbd52049bc6b3e8346cf9603d1208e0d5a6bbaad25f2e0ccd70ceac6bd1746f9815f8f485196edaca1457baff613826d9981e219cc78cc71554a406b7aa3ba7958e7f028a033a08efa0072100bd54c041517dfa3926d8d081c936d7606e572683283525e4552fe5017af4bfd30b53f0c7ffa6a90fb94141482cda1afb05a497d16f44795e91eaec23163baaee967702df5a93629ba0156b41f33f55c638356b2fb845bcb38e4e78d8339b7bd72e79055da074cc153c046f9beb4dee06a4ef4e99d8a56add8c2baaa5add3adab4afca94e3bc5c653a97e9abf3b725bd97720e82be4389754fb57d5294cefe73fc53305e98c0c61cd69d643e2e7f085f8d73500b3fce62b33e6f6e6858221d8f9743eb21f81d24ee7dda468b83e3928146e78c26f14d56e1c01f199514b0aca3e377bf0f8f3bc5ea84ca2abd81c408cd9c961a169478f880d27674b54322af256aeb14559fdc724f1432ae22aa90814557732c43dd809ce811004e4c1e2a9bdb8247e881143903a7603bd028e832b4c01fd9e582180ddc767c7ca3ddf01c1ef2eca6a31deb56ac6252ca273524dda672696a8f12304c16ab98ca937b604fd16db3d18275a788e90d163d679828067a9e8a5ccf28ae4b8b21344cf90c03d09a551efc4b43aeb49b3976053044d78ef952e2e86121349fd2e6b5b2684bc6528b71cb8d42745ee560e476d227dd222dd59cc58d3db701986bbec705835c96b4a6fcfe0eeb9391260fca5fbfc106fd982edd3b2f8196e07d6a5fcb862a1a441eeee06bbf3852450f884b6460a39ce4f39baa1f2971bb4ba5a104bdc580374e2335ca51e9df4076915f53b43955f998df729e5823d17c256d33f809fe018a45d5675321c694ebe1966e21d0ff3f65415c0c4514408f354445766c7ee367e888a3e2d3f00776e25f77fbccd2dec734e9c9e955ee0ad267b26d78c7a8d4f019496bc7f380cbd18c59f76917422f2dfdce649fc209a0167ce773f5b1e84d1028a78e17c23a65da83d0f0a50a7b6da81450d010069b47861cdbd71b5b022021dd2db85332ae2b3b0df6f842fb1c3fdbdf2b902ad3f253630d54667a4aa3b213f420b973787bd1e09589635278b1830940a309c4ede07d7ba70772c38f5e9ba78202a73569d46269044620efda96184b22d87d87a1fd3d90b935feff27044e650575731fe6a39b20e6643e77e3f12c8b515855703b8d62951fbc8a5fb416674dfe290ef488600defbcdd551192b575d8a8fb6e0f33d89a61656bfec2e8035c109889863cc75b1e3be68803ac8df4b43bef93e9bbea0f8333f2962992e13d7ada6aa6048dcc00f1647c4f1f22f9586dc13fe32470cecdfda1830490cb4e60402c3fd96b89e14b3fdac5da7f23e2dae7354d14a1c3468654ec7aa9564a33ad7a1f108880fe112d5c49f19a7f974cfeff9255ef27103d61ba5cd5428f5898499da651521b78a7bf7c64a29c0969539e79f31750d4f3bb43307a9ab08b4593c70e84acd09f197c58cc572e444be9408b4205347d4b8561b35cf3305abfa5c277612260ddef5468f09f2441f82de65a900fd8ca212ad1f1baea48609f1e0e253a42fd1119aeb8dd8ecc1db0dfec21a19d713c1e0defac379c4cc000cda509ee1fc238d883d94419a228de9ee735bb34c0d6fe15576dbec17e2069a3f3e3871c9b6f7d13eaf5a7542018f7baaf40f820e7391a1578427252bcc7d3c95a5b4f6c67525ee01d2328175f8c19c33ed7d7b0df661090ecbf9f7dd63e756a9496d15f32ba8cdf6fc852cefa40171ac975feef99b9d8c47a02dc2a5796bd62c16b762a1a2d9396bc1624cc16181c7eb8b5ee90f2b3085ecff72df0c671d21320cf44ac585b287aba8d9f8964e2211ffbe14472484bdf156165a88f86f5433c24ad8ce83944fe1668454bd3911ba702f3665a67b09f7b6198de96168532aa25a172156bfda3b3df32cfa4b77102473595ac0a9feacc792f57e9a9d2e087fdeb0c641030d98bccea299e8884d62059ef50cccbc3762efddadb4e043c7d845c0c9d2d0adcc6c40e0db359f6bb751ea76ef84380eb4bc35d7aa4347de525290f12df63cdc69a68bc6a5ee8284e4d02c66a24e1f5d257058f43592aaaf6631a1d63eb623aa972415a68d07007341c67be029224ebf8f68fc6befa080dd6d6b5f21b37cdef2dbf3bac7bc8bfde6f6819f4bbfa2b41a705d300ba456440abe953104ba724532f4045f4175a6efb502fe81d617f136197029b1fafeb1097c05e775a8d8feb38643d291d52fc1d28de8d9ef3d84153b68ed9948edd44220445509fe4648e5a50293d65086c2cd959b52126136e139a8d9943765488e6adc750fe27bce2f1f3aaed938d73469aaed1bb4cc39800f393ca8b1449eccd0b2253e20b54e5056339632f7717a3698c05386a6300f4c436729df85af12bbdeac5bc41954e086189d2882f07a86dcb17e98bba10acb2d59ec623d432dd881c6abd278f4509b6f87646ddf67cb62313027b654904619fcda5947e526dd2692d9c2f8b5d686db4a38e47803d4a5aa4c02bfee7260d0067c3cc2602db6eb1197a1c6b3a763bb31dab0cc5bef1e54291a8fc2977fd38aaf38fd2033576b7efcf55b3859855b7053bb40eb3642cc28ff79e297598042a030dc7696afd35e75d395490c05b4172a9e9afaff617d7db8d1f531a7d2337f0a314ade2442a69376e004921a1e053b6ca"
        )
        val state3 = Serialization.decrypt(TestConstants.Bob.nodeParams.nodePrivateKey, normalWithHtlcs, TestConstants.Bob.nodeParams)
        assertIs<Normal>(state3)
    }
}