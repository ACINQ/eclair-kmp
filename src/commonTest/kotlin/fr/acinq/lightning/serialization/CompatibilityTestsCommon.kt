package fr.acinq.lightning.serialization

import fr.acinq.lightning.CltvExpiryDelta
import fr.acinq.lightning.Lightning
import fr.acinq.lightning.blockchain.BITCOIN_FUNDING_DEPTHOK
import fr.acinq.lightning.blockchain.WatchEventConfirmed
import fr.acinq.lightning.channel.*
import fr.acinq.lightning.channel.TestsHelper.processEx
import fr.acinq.lightning.channel.states.WaitForFundingConfirmedTestsCommon
import fr.acinq.lightning.tests.TestConstants
import fr.acinq.lightning.utils.UUID
import fr.acinq.lightning.utils.msat
import fr.acinq.lightning.wire.FundingLocked
import fr.acinq.lightning.wire.UpdateAddHtlc
import fr.acinq.secp256k1.Hex
import kotlin.test.Ignore
import kotlin.test.Test
import kotlin.test.assertIs
import kotlin.test.assertTrue

class CompatibilityTestsCommon {
    @Ignore
    @Test
    fun `generate data`() {
        // generate test data
        val (alice, bob, fundingTx) = run {
            val (alice0, bob0, txSigsBob) = WaitForFundingConfirmedTestsCommon.init(ChannelType.SupportedChannelType.AnchorOutputs, TestConstants.aliceFundingAmount, TestConstants.bobFundingAmount, TestConstants.pushAmount)
            val (alice1, actions1) = alice0.processEx(ChannelEvent.MessageReceived(txSigsBob))
            assertIs<WaitForFundingConfirmed>(alice1)
            val fundingTx = actions1.find<ChannelAction.Blockchain.PublishTx>().tx
            Triple(alice1, bob0, fundingTx)
        }
        val bin = Serialization.encrypt(TestConstants.Bob.nodeParams.nodePrivateKey, bob)
        println("wait_for_funding_confirmed: ${bin.data}")

        val (bob1, actionsBob) = bob.processEx(ChannelEvent.WatchReceived(WatchEventConfirmed(bob.channelId, BITCOIN_FUNDING_DEPTHOK, 42, 0, fundingTx)))
        val fundingLocked = actionsBob.findOutgoingMessage<FundingLocked>()
        assertTrue(bob1 is WaitForFundingLocked)

        val bin1 = Serialization.encrypt(TestConstants.Bob.nodeParams.nodePrivateKey, bob1)
        println("wait_for_funding_locked: ${bin1.data}")

        val (alice1, actionsAlice) = alice.processEx(ChannelEvent.MessageReceived(fundingLocked))
        assertTrue(alice1 is WaitForFundingConfirmed && alice1.deferred == fundingLocked)

        assertTrue(actionsAlice.isEmpty()) // alice waits until she sees on-chain confirmations herself
        val (alice2, actionsAlice2) = alice1.processEx(ChannelEvent.WatchReceived(WatchEventConfirmed(alice.channelId, BITCOIN_FUNDING_DEPTHOK, 0, 42, fundingTx)))
        val fundingLockedAlice = actionsAlice2.findOutgoingMessage<FundingLocked>()
        val (bob2, _) = bob1.processEx(ChannelEvent.MessageReceived(fundingLockedAlice))
        assertTrue(bob2 is Normal)

        val bin2 = Serialization.encrypt(TestConstants.Bob.nodeParams.nodePrivateKey, bob2)
        println("normal: ${bin2.data}")

        val add1 = CMD_ADD_HTLC(
            10_000.msat,
            Lightning.randomBytes32(),
            CltvExpiryDelta(144).toCltvExpiry(TestConstants.defaultBlockHeight.toLong()),
            TestConstants.emptyOnionPacket,
            UUID.randomUUID()
        )
        val add2 = CMD_ADD_HTLC(
            10_000.msat,
            Lightning.randomBytes32(),
            CltvExpiryDelta(144).toCltvExpiry(TestConstants.defaultBlockHeight.toLong()),
            TestConstants.emptyOnionPacket,
            UUID.randomUUID()
        )
        val (alice3, actionsAlice3) = alice2.processEx(ChannelEvent.ExecuteCommand(add1))
        val (_, actionsAlice4) = alice3.processEx(ChannelEvent.ExecuteCommand(add2))
        val htlc1 = actionsAlice3.findOutgoingMessage<UpdateAddHtlc>()
        val htlc2 = actionsAlice4.findOutgoingMessage<UpdateAddHtlc>()

        val (bob3, _) = bob2.processEx(ChannelEvent.MessageReceived(htlc1))
        val (bob4, _) = bob3.processEx(ChannelEvent.MessageReceived(htlc2))
        val (bob5, _) = bob4.processEx(ChannelEvent.ExecuteCommand(add1))
        val (bob6, _) = bob5.processEx(ChannelEvent.ExecuteCommand(add2))
        assertTrue(bob6 is Normal)

        val bin3 = Serialization.encrypt(TestConstants.Bob.nodeParams.nodePrivateKey, bob6)
        println("normal_with_htlcs: ${bin3.data}")
    }

    @Test
    fun `read compatibility test data`() {
        // data was generated with lightning-kmp v1.4.2
        // README: it this test fails it means that we cannot decrypt and/or deserialize data created with on older version of the app !!
        val waitForFundingConfirmed = Hex.decode(
            "cade1d1f615ca3f572fd1a224334e71a90cafac52a5c4e540210be2ce7493789fe28f74b1223b75aaa08e0ec2546efbdc86769668d3085d6a2b596e9180e91ba694c57f84aa04834f60e0b1092e5be2bde4e722c12870145da5d7c7f865ae2cd4705f34f7d7ae8fe8b94aacc69b6fc7a06b57fd7e95ed1c15ac671eca0557f0862bfab9713af9eb4a58140dd011f2d3af99b29c05e6ee3c33264abe1a6009fdf2d2b8700a67082d640dde8b146f40973a7131522ba31592b12b4f71cbd087bb69a231cb55af8b82f205da8f89d13751e5cfebc66adedb194d915f48312455b7d878d7949788967953be8188db854852bec9c4e3b9ab49c45b6465a1d8844593d2b7ed43400320e442a543d79e7f31e13d0bf7c10ce48dcd5e1fe33272ed90831bf579f005f32bd09d4f43a6e74ec8df33c1cc4455eeabaadbc4252e290de0f09964d30e9128c4c6be831741a8771a1a4a44274f5fa09f5e654a9f04724692cb8d24c16df8d2f557b8c6b29908ab23e85f45e0a78943a4625c35d7ff3ab0d2f85b97cb9937b3daa94707d0560d2353c5b70ddf8669f19bab9a16ad79935e24a6e387c3bbe1cdcc95aebd7134a6eeaafed75ee5d4b2d48a98ca0d18ab9e13b991e12bb4e4f93e83cd000c62ac0fe899ebaf1d592fe649ec9ddf0f0c106dc0267d6480c9f84a764034be43ce7f796577a19129a4ea8d688302dc251a69bb779ccfdbc4e527dbceb2347054e3506a0572e297cad117e794009ea7f6d4fd7a5ff6a410652e2fb236633ccf703dbfa66465fdf15dfc04c589b3ecc8318fefabda7049868487ef8c7cad8e89dc445208a464d5f1705ea1f18596743b47965d9f033b97e50f3ce0b31f34f81be759c0114d9b3c0c3719e49b354924523cf1eedb2f70e1b0edc41eeed64d5a9c2038203911cbca3c1eceb12790f3ed94c1623db293d0cc427f0098d1962659424877393d94ce681968ea8f108f98ccc73792fcaae13ec7f9f45c75f788405071e322db2b9fd1d6a5ba971e08a9749672eb31a4ab40b799dac4c7dec7a5ed059a620d1e8ecf82249c96820043b8893164f20c2a7962b81b57f2b20ef95798f9fb4a668bbd2ced7773f4630f9bf53f5b60638c6caedf7dbe90e1820806360603393d0db12c8a65bae992752590173f44c143c6abc6faae6fee278a40b44491d2404ce62732784651ac2c38b535763a27a5a35e72076f82a2ddf46b6a77de3e6a1c1bd98128e24fb73f4d5d33b631ce7a3898f339bf09b5eca8fc45e95e0b4ae7eacd58512620d1eb420324a09067d5f5c2ac6fe100faee2dfece4bbc4367914a5305697a6669598238d709db9fc6364841d144512c9b41194245a789df292865574a2be6311fdcf2890c6e21aaff4532e6ac4e8ca782d7c0398434c1f73c6b8bb1551299fcfad0dcf87bfb62f23ec467f4b6acd73f668e6dd02ad65495b314be02ff4e84d9ab9c9cc4267830b3c1e90adc43425141cba405d89b9206f5d2ccc39c2d8ba92a27606ba5393962362f51669028a530b779c944533c13b06640e092d6b7f4cfcf7359af9a69e1fccbef1880be026d1cbac167263c995951826589da87ec8d74c9d4a9c1bbe614afd8ba3268ace9736a42322a1a61dbee5aab8b3cb000703e99aae6653a148b32837d6a46a3a299df2c4a70d926fa851ab288015fe32c8b633911da99c62561bb1577e739531287fbfbb9e794aeb2f996446404f8568a2512dc250869be0de764dd39462dfce13d360130997a2959fbfbda2565acd906309d315f72d57faa050dcad6000106ec81ff71ceb9e40c23657db78cd3f041ce6b027267863f203e7d7c836444a1c5c7670b6b684f497b38bed3a612f6bc10e938ee0bfad669b190b2d723bdb983b3e3528690e42496d05e346202fa92df0e02c97ebbdbbf23258130a0e6e59c16ab5a4c0f1e1187061de5f7f0cc841ccda5ca41d297baaf3bb7df9a0775cd1b1d0050525b877001baa9acbc71726f1633df2c47bf6f55aaadd9472705bb18f6ad1394f7e70e37ca7c1c0c902d63af2cd8810614808d8bdfd72ce6ad3d3317db5743bf4464bcc7f92648a6861f03581b717a143ee98fda9c8fc7432ea59e9a233a82671c8e9eaeccdf90d9d5a98c8d265f5bfbac30fb7796be948c16a22bce41cec4aa22fcf9c0f7aee7eccb4ed05fa433f00e5af01f722626e506b3fe9f9b2b518f66861b7113c2446cefefdaa508655e43d68ba6d2681f3b4c284a3f124047a07ca5c19f250e44dbfb523a99ceb7ea10f656ab1d877f680f744412d9c912ace8af6e570b132678986f7ae2b589a8f642da26d72e8cfc1400f475851b79b8c18134b8686e0b0735b40ce4804c9313081c04ee5edd8978c9b80bd7c90c666dc1bd85bb3eb4ae7ce90bac00102d7eee54207d2766db98e0b7fc42b42c69d65b52ebe55ab7a069fc6b05b8a172cba229256b926d18a94b7ac85d021ac07a303ba069ce9820451817b74c7036dfdfdf7575449b50980bd51a424e7e89b201bee100f2c1833cf9188f68ea1a9b1dbd6388a44c66d32c34bcc3485a28380b69d96176e57fdd1fa22d0d0a426e75e2c4f113700c7ee6abed8721c8543ea7e8cc593ad4091ff1df1cedf4877c73b3faff0d6d49789a295e10e6cee2a2899b760170f4d8403fa93abac99a482a89251f4be9a3f4044c4f55deaa7ce4af0177939520f5981c604f65420fb8125d08edf5a7683a0213925bf96a64f05d92218f2fe676dbe085fe34a41bbe4166f5879e288678018fae21e141b825f2d15a3449e45537d3aa005be392bd5f8e1eb9e83198c993674f1af6349a6926f8d78a6e178b809524079d11eaded1ca1733dbf0de4247d7a3823d77f528b9f35d996d6e61b5c0ffb3af6fe6f4fa4d7dee6b1d7e6a3e3c7c61835baac79824c839bf59dcacae9cdd1dac385aa193d6e03faa0f436526e5e84578287976399bbefe020a691eaef94151900d892793463c3690b7722539aa683bc479560629d0b5498805e7c236c576d906a14eb86279c57913038342b00624e7841a5cd37cad9dfd9e9cf3d37186eb90335be3a9d557d3f9094ff4298a06962ce03437c9413846b0775ad4429d2fd9ba7e83c0fcc59b5ae710d75b45d468d0e3dcdb59dab8d027a3eae4401b8a01e7255de0d63bd7146ee60fb89e5972118fcda68600bc89a279ed88fb8b92ece714d8ebbd6fa64e8212a788196a93a589e1ab3fb6901d89e8017bfece9d297aa5c0086d5d564b6bc7bf33844a59a3ec9de637f0e1abe2b15e5aa0256b1ac40cac6b5e3b80ea84cc7b96adcc274241fcd0371f3e54261e9332a094a149e117e1e030ef5e9c6cf08d16588823655786813df84eb65688edc06677b346e9f7cb2f4eb49d1fe503a280e59706fb10e16966064788f2e7d528a89888a515500bd65ffc7f5707337fc704c958f1ebe1a3c5e57c0bbd32f7bd1e3fbf121248404486143dca5f032a0478e684fa6c13cc375feee08e926b4f6b552d489011536537497e47f9419fa2f565cd34b0e2c2b164b205206c2adc9e5a2d41458876820c43e1ba71b6a56ffd4b931d8fca05d0092e625aef65d41dd9b55ae55b94f60f1af4f717d7dff15576056873a1f425c69f58a7bc4e3dc1b5a60359d4dde85a386ccc5e83e1307818aebc37601356f36e52fb16d2f3d6a8856609727cbd5b7b749255b8e614b331ce9b892f093f266e9b785e92458d96782146ec7ac933a8853e9dda53c472be8f43be823cdc863f539be78a57e7b2fe6937575a916a9a4044dea5e07f30f5b4bc68d33feecbd40e50f17cdaf2ca354dcc8e6cc99ddefb20b007053b625931a66cfba91f92f2f213c738cccf3a7a05d1e403f28192e2db80a3e0fbdcba181590bcb571d1ae59abe78af723f5440b6a6b33919ac8539a8c420ba77a9707271988fceb0e9ff0a6ae05eeceafa3c273a19a90e00e48729c4591bb8fe6b7f7fe80a9ef925ca914bb4df35b5de6f9f789f03a6be12e133289c3149475aed1035e51d9f9455475db10bc6d94b9ec40a032dc4e6f3625e15e463b54f5a45d0d504ff63d992c953d1ea261ff2f2a7367276066c02810b0f70b6f18ec352c752bc4528f7c6f7c142ebc62a65d538b7588a751d6f7f0ec1459687dfbe2aeeb5aefc42fa11794ff9a2a8eb02e89e5862d9f8f7962de83a3f07d0f6155a10d56cc50d67be7c1f1ed60cac9c17ee191e732dbc8c1b4d576ee9bbc880451bf5f4c0b368cf8bd8f76d0e6a8d44610bc1dddb00c6c985b5afa511780953b9ce4ac05a6f0ed9b6dc0bb9190c3836dcb1a6c6241f57385957c2769d8e8c4fa2935ccb09518944e12b2feaed95489cd24206e00bec838af4c4c9a414c9a8f08ca569a84076c0e7c0092f17877bc7bec29aafdb1bae462d9f91b8a6e17f188f8f007c4e16b3ada503d109f4025c3692af7b6f512eccaf3c2775a3cc8a1351a2e44911f39db184284aa517411a0123aa7e60cae2600a9b9e22204fea7584d27b305547fab29497356ef5bfef83cf418d4aad9f56d540dd175e92acd0a0c8b1bbe51ddb9e9bdde5e59b98d5d9b408d8d8ad38cbf0327f19d380cd9e9b9d4ae3e303750565dcfbeb354fba8a9cb254158c760b8faed833fa3da8046b962576ad3ee86954483af837597efb98b4016d625cb070e0759aeee4be4909482325833bb90b548fc588ceefa27159c2b2c3799350a7ed228de3e6f9f39b067672e0887c82c2ee8aa4d7ebc65f9474431e2c4400bf65a2c2bb2cc4c3a9e6be373644a13ec366660ebe6824f9543c9fa69538af27b3a7f24454ce452e6c5d62d284587cc0ef355a42ec7e1b7e847467bf38ce4abc38c10fc99972d3490694bd52c6c9ba5244abb60bd9c454a0ca03595873ac3e86674f206c976f410bb165d27f6cb057133e51751c28b9b20a873141c2209aa7e497181a99d531df8a370f599376d8308eddfee207122f56c2074117f642069f56c03b03253a4b6258014a1bee06a26d86dea69f04135359efc3579f24b486457b98fe057fde7dde803e960a562d46bae61840bf5c62b3d99b29b033d5d64aa837b4b4de03709abda3b41131632462939f44a1b1b75b746bd4d89b7748fe001bc5c379fcd10058875ee065592c955e9ba6b075bf25eb549a4ad7a25d86deb178296b091cf811018171defe75b52077cc2956b26039976c3410cf6007886e06734a76b2639ad2b9bbab9f213b3f124d5bf9bede9e41469c2092b4373f620f5a3742a471e8ce5bf8c1df7bbb5dfa1adfa42c49d188ee9109b9c98a60e91b4090be270ddf4f3a994c0d7b903ab6b8ee43bd2c251cb542b232c0b1ed6c6ce044c06cd5765156f311a2d7b876cd6aebed444570b4174ab419c4748a943d1b6526877addd0eebf272fb97d2f6912504feef8645e4d0614078872af6c0ed85c8fbd547b6c88e9e065a5ba43c02a65e1bbcb69c93ebb70742e06003a613afc59a24bdd175b27ef39fe8b779fb769d1187d5dc39b127dd4daf56af03fe35dcc8ea5fef6b3e866a5bce34e02a1407d7ead152b4aa4b7169c417fe8850b2aff5220d5554f07702871ee2c9f56e0316535f6fb1f6e108ed40d7bcd665ed55021ec27e4fdddbad1e16dc0198cc3a4180945d797ce0cfcbe95c3b528e7c34e80d034163c0a0b33267929f8f2334c95488b32e33c46b98cc562ad31b3de8dec2097655b52cd43d7707eebf934d0184f4c29f95d0ce9d3481bedb7e6e9b485c19627b5aa68ffc8f621cbe5ff31f7f14ffa6f684db518b5e0059f34d7d14e051a4ad5420a3ca61813d7bc8aa91d84ce25665277a68e368fe6faca61f6253869c6a87949807beff3f68a396f6c0fe97e8476f22ad6ef951a0be4758b6b904ba34f35979f3d60d3c11462809ee984dc0ecb9bdfe7ecf51ecd74bbe7fcabf2e1c757ad063ac47cf9078e1b7447cb65b619af3f7c2f2559208b1d4ac661e18d4bf31b568326ae14091f22b6627623584f40d27f53d301522b7ff90804f2c4192c550cab3476b732e410a025cc2aeaa8728bef93e52e02e01e21a1931b9722602ce1495340d2924b6ae8b1b4a4007fa80c18a5753f7920112ee13374d0b92a76d58c8ff966d527d2361cdebbe098dac6d0f3cd4e68fdd6a44ad7e9051021106ee480b5f116747d1338739488b50d1e990ff407016237e39571262b1dc981b16e8e042f08c81a0c4fe2758d5571d1ab9a85bb54b24f0db7a9aefbc7e617aad9c450ac38d818d3f2e6a9836d0fb6478d7e52115012f531032e511de50510e43cc9a4e87e87dc5ab5e180627da1e34e42c8887fa41ab3b36afcbec62dea2da117d55b9009218866229d2bea25827e2b44442304d5c6cdae9cd6"
        )
        val state = Serialization.decrypt(TestConstants.Bob.nodeParams.nodePrivateKey, waitForFundingConfirmed, TestConstants.Bob.nodeParams)
        assertIs<WaitForFundingConfirmed>(state)
        val waitForFundingLocked = Hex.decode(
            "6965b0a2f0d5a7c6cc347f1f1cbcc2aa8be085a1d6c95606fefe27b8833693f10a41ba52e33fab9b366f3d1c3f0d589e3dada7115656355f0b6d822ec4c8f07ade85da7846b706c11cc5112d8dc387419602e098a7ee29b5aa774b40ae252c09fd4c58b806081743010962c56457464178e12e88799cf110648f9c29337645c9665fb0ec4d741f87fd9f876b44203a3f6b5dc46aacfdb6eacd6c19c5553989bec4b552a938f831ae80be42d1f31666213629fceb3ee51bad0eb673daf581e49b0f7695fcca26fd40e46efa03576967f022deb1e4a13a195b0add8466fa527c36b18b141d084cb9ec9d82cea0b24aaf973b5f9cf6791fba80e278a7d298f8bccee3d1539be49403823997d3784255aa131f661f7f56e35a050030d517450a73c0832fa1e88dc73ef970011f14539f4df4ce3dfee33c9f2add4a5ffe348fa4b789059c0798ff2ec45aa64737ff82044c99dc64e1442cfce94504360d8b0cff17e43fe5a188b1afc29a738295332f05c9ee2fc392f9157a1a270ec9fce29e0118c2a10d84cc8e4c0abcb7972dbe59ad5bc62d3e892d5db0c7b096333ec19140a2e8b7e59a7bdbcf4fd98c31c55eee574d649edb8703412e9c5438ba8afe7ac040510eeebcafb5ad8a0b13c90d8a98b32b7bd4d4fcef5544149f1ef716bf2983a48afbc72df5ed888b638d707bdf0911ff5933a9c752f2f443deeb3daf093868ab8bd24505c8d2c191f634a6934cc554f913d9e6a15b2e791bc4d3d93231f26988f2e59daca2306692de7d467f16bd5dc26aa48f3029b52b8d10242d03c796b15f5ef21ea5682ba0d23db9f26b58e4cb3f3f91727d61552d5f797337f86547ffc535d12d77b78ff01e5d68b75e869f231e5b5c57face641335456a64e70b7c60076dd06cc9e3f241080b27cefd4c2ac56aa7762404cbf0a47802f34eb7716e31f61615f35bd84e3f34a50df4860d70ebef7bbf5de375f35b0145fb8a449ab8d441ac61386c7fb693069ce25179b71b3151f732ea9dbb8580fa5198542ae07f41fcfec4e9752c990756e84d97709006a859d766596bdd5c2b018b77bd2b807e682043326427e6ee68798c252e3d9735c1c1689d77fd65397b2e91986f23dce3decea5ac88be2bb2f83e41bf4ebf3c95b9413a17e43b7b9e0469189bc9233ce3923ebf10b73a5df532800d38766048c48dcf11d49cb9e3025d6eb536322b70a548927e10b1fcb7d89475f2f5d3c3b588d24cf5afed63e1e94934815ea96c78001471ea2c52dd2a4154d4a592af6920aa91182e670e3695ba984ee004dd729f1e4cb7c60b7db02f847c73544cb413b96f257d64f578853d36eaa0dd26d6c28b9eef8ae8b9128f3c53993c204d2c3617a168ec142c54ba35e5375553a1955e25c9edd8d5da083ff9d58dcf46ad1334c2f140a1caf37fb7b9cccac8ecdecdcf8e1f560cd65d9c279ae6dfeb696b64e9c6f5c8cceb0d3f86fdd8267aa466a25c926698b887efe5aa6d1ce535a692bd317e318c28321b816c9db2436637f9bdc97e96af8a04c962259ce2a98a8f535d7cb94ad564aa2d4114757748d2513f82362cb977453429578a969664d3c511949538b2832469383e55e33e5d65675cf9d66d01d6cc54198d9b2450c41f628725bd984e7ced0aed581fa3150bb066bccdc01a97bcc19f57281b026d9e3ebccd105e2b0397225a3faf5c5b8f0153a58e2b8198930cc824061148bed90b3ed718bbdbcdb2ea7545764afafe36c04429bcaa446e58dd1c50fed5156881df6df086c890015b4e22b2f17adac7c9e6ef54f66af263263c0297c62a69a94c317e7315db8e049a4451f7dd87f4c3d39881e36fef7c0ff5bf9a13d5ef54393c03f317126d4819b87f5ad33f65dd2b296b190a621387b9d3d7732ed78fe21f68df8e47ec53cfb5bc75a14b5b83221e6e5eaf53ea177ecdb86657690049f37c1e4ad214f04c83133bf53227b093193f926746bd7c9c1d3e53c348fb8d719f7d03ecce52a428b194a8eae0f5d224d0d19ff34b26cef6069fbd98d860e6337583078d264366f5262f72ecc94c3e3981bdf3bd695f72529352a462093a1adf1eca5822979d4444727f08042633dfdee857e99a2595f194d0ff43757cf7f03be43b976ae10e7715e82ba6241600aec4f9382ff257d4e198cf610acfa152190b7ab5f2fbbda77c18ec4a183255d0b5bd1337599b79bd967fa8ffc37f60ddd27942ea89e4ae0b5707e64d8cd8776b024faf6018ce0b1274ab1fb723cd103f16856b536c4b48894b528dfd950afc76900307f33e44615c1185e378591edac21e4d7ffa3eec0ab6932d5577838e128a8162dfa10891b3330546061c3db72a0c4239d98fae6b943c9aa5bd643a9a3030ac6e3344c0b3eb601f1655d1ccdf154a53872d59d3783d42118ee3e13bd424dbd10c399b3ea9a80719871290c37c64e5a310079a06401b02f560a99a9f8db7c317627efe5ca90803f3d934828aa8f197441f5619349993629ec50c7501f0f1863b070fbbbe72fe5ac171c9e55cd0cbb7c8addef63be6b4d48684bf40aac0cc2f0aa380d5304e3439b0b4d146c63480b0a3dd3cfa2c858edd7e83641ed0245c6ce80d6588662a3f472049c72410c0dafb5f404568501f68d0d3d8e173fc31c9127c36d017a9956c1ea8f49d72c7d0bcd791a98d34fd109de4aa9ad1f13f3523c07cf37e9f64c4df9a8c18c6f5dba36f9f3114bb72a89df4092d5ebe56d3701fda9e86532f0fb03e75018e1dd4c9f119d100c37185423ac76be0daf62a01fb532b52558ae458dc7598b4038005f044f253c623e29df44342dfd26a0e6106db10076062b9f5fed05efea5762e4956d67b086a3f8c078c3e23052e780e3ed6da60def7bf7c9e7b2faed523cb62f6be91c5cc4d42549e5fb4f3b041f4cd69511816c8d6ce1663f6705b0824411bf8a1b3ee7c4d37ad8e997d942d3afd02bc7cc9f65ae317ac083452749c2420347b965aa321bf7b60eb4f127e909d754e2d08ec9b3abdcb751dcf70f05e6648966836c7ca3058ea12195988edd6e1bfe43a16241785e6af0e360d4c16781e593bec3087162eb070588a359a174c2eaa80a7609d23b4c78872aabe6f33ada41879822e549cdd91d6387d3725f890e732f3ed6beabf974ed9c7e13b3d8a60b8ed7385b894c1deba5718a80202b814efac313e5241792e4aaeca61607426c127cc67b1c68a1c09bdd5fd1b747d4d482f5e20da2e331db3b6f0fb13750f542da62a9bfa670bb9016c13b2ef85764950d5b12cf5fef85874a370cf399d82f5ebdb82c85930ab2840f88ec058a600e204f5c49826c8870262ed0180a8164fec575056e489fc1b1e1692054c808a4fd881f21b0f5e41843b14c5670770a1d3372f569fa629d6f04e85b55f20ca23cfa22c4778060022565ac7d4ba1fc705cc6ecf5bb046767cdc717b3560c0733b378b504e527252c09ce3d2ffb8132d5750242f8e230a60d8fd7abd7f448d6a717a16b2cd7600c4a2030d9bd7379b213653256ade39dd124fed5dc8147d88b9474eaacaa1ce529123425d4f1a423d5810aa213847870ca78bbf8b00783b5016de2aa39d5b2bf580395cac6add3e5718b1835c07cbf05812ebe287aaf788786f9dba7dffcf83af5d8451ea71b96527e38047323f848deda24038dfa4505ec118fc6e04e31eb801d6b01fad355e8bd85ca1a12404571b009324c064b9b2ccb32977a3d3579c43f0227907da122bd6bf83543db90c6e365f5f997bce625fe1f34879293ace7629cc478006cb57a8fd5fd390422a67b4088a2a4cc3e4743c0d90dece735376b753646be0a6bfd09d74e355bf0251aebb2b31936fa08969583b86b8a2d48f4dedfc92ad447669a6ece0b3ba31ae0992eeb8e81e5549016d5ec3fca20f70d3c95c1fd922b1dd191d27c74c6e40abcdff6a355cc8f4ae8c476ad7ce8c5cb1413fa398f8208d8c13c150a853d6f1cfbeac3d1c286792b33eb4f119104daffd71ed3ba4c08fb40bced30770d22d651c387be4df1adea732cb565866badad761c4090bbc92a3fb187653a4ebe7b655409a7dad2d6a813fdc17eac1f37f3d4e038697184af510ed11da6d46c42c10d90db88c0c77b7f7c94910474edec15af34ca8c8c9c48a07a423f04e361adcf34074c47953286a4bf5e4b9d5476a1374ef73de5a9714cad40b47b0976af7d97b139b29ad6c03bfed9a649b6138cb6e836af11b5a14b0d5383f26d6ea978e6d5b6608fdeed6142a1d3da49be9c36c9fb082b8ea9ff911a55bf5a2d54d02c3057b82bd83e588c482c130c02172de395d999d326a546d133803db315177937abc649021c5252c7403b4981b7620a4041889539e994bcdcb26df3b91a2b64a1447d09b09e367eade8e5f0be9e7eb39710e71dc16a1c8c74f436e74c26a29b991bc62ff5fa6092a017ef0e2cbb8a1d9e0a10334f687b3cadeeab98c69f740f607b59f9e16a3e3d7ffa67a73733ff06e21ce298e6b116f79595ce00ff1c8b0ffc562bcaede4e94c342a282088b57695aac5ecfed78c79c43b396430c026d1e303cae8d1204bf37eeab3b8b1f548915387063db49f18f016b0dbf49b88b984f1ec449731e615b80724eb6c1b81322243bc3b02e22a69b289d7b12d3384132db314d47db4b6ce38247ac9acf37e0a02b5b70ea22038f340c583cf6cb504abdfe3b522e62971a0f4ee2afa8718e993df3e2e2c2784869d0ce8c4257ea00ae025d86026c1bd05e46fb77608c59c6583b5686097e49613af50c0bcbb3d596adb04ebfbc7f636d4b8961d751b4d52b8cffb7ef3c80cc214eb0453f43a1b709de2b0a7443a0d3164f5af6c1706c45d8a46e2de97a835affb72e5b632bf01541e2777c6c7f1da293ab0d7d60265610555b959cedff184998e10ccb31ddb1442b16c0c06b8b8bc5ee45a7880c01b6f32cdcf7d8739e60fc900ed198fd5ba72eecd34c0fdc2a23776b9c43941f5768308f05945589face7109e76eae239053854fb3dcf3d5c37bc3635dc6ebd844e936a0b59719fa4b01a0e9e689a592476e88cbbdc80977e2272c9259d820acea6b626ab722867d608625c8150e9296cb5401c0767bef06970e49f89265c618204a3c837353379f3c95e63901ad3aaca451a7e261079374c314ebdd0ff3feae0f528ee485752befcf21b82903e34e93345c78a58505803a26041a139e8f575cea7563103561a67cd2da5d936bdf111b3e7eb9c082233e31d13eb82699edc9da3203c5853005cf359d507ae76466a88c812bd8e8e235dadabd635d7249bf4536414c3d77d0db5f69c0a1655b9a3fe2ccdc12e7d83b84e99c14329d6693eafc285baa5b6e82e8928478a4711081b4066ffc38e0fa8ae746e47551330fcf78bd3f58e2965f51b76819cbbfd21f46d7f89c0b248b95e4dab7e13d23895dd0fd6b9cf61ba271fc22acb6048bef88ad6454201ed630f09ba1d81dd53d3a81de661411329101e8bd5be9a9ad78f34335856aa3cb8650eb8a3964df6cc73a27467775f962ee76bd4b0d23ee1a731b407e1aa80bb42e140a1599baaaa18fb5586a4398c5b34f215c98695b1bfe88444a371a2961da8d47d32436dd29ebdcaea7085e4cd0cdf59298258320bac59e0f3ed16e9660d5fba99cbb5a59673906fe2194d87554afc362cf112c8cbeaed035db8cc97fd05c0dc1abddd0962a5eea42a584f61d8d6e708dcd26413277697b2a141e25152af797eb57652cb1031168586f6bbc133e26d3609b04acaed8269ec67d3e87f8fe46e652ef4c9afb88f89b3cc8418441b435761e9fbd8d76927562db7b6d49b37587fe05b2c447ec46569c40d39acb6adf4cb1c08914c4d08eb87a598104c61094fa329e4fd4dbcdba39ded4dc4768c16ce0a83636d31c2b950caba6984fbe968634047a0f1275c92bcd6183d28e200be5a43b03a6e9077ac4eca3abedb7877b309101982025ef3f91a7e001908c3fd565bbfd71ed137c8e084249a0563259723cdc9ede0075c1ed0176cb15ee0763344fa81762189b0ffc4d1de6fee739e7cfad57941b4148a1626a8f27dd43cabd8bf974ca9f0a3c19900dde87311bb41a782a6ec4f0e3a397bb32c1aef82468942bf61f04b715f47b5ba40a8d3ff09be935608e558ace92cd927b4eca2e26c4030891c260764d5547699375802bd1ac7c4d3d031312fca73ae72e1ae5073c75511fe726f58ac05c0ae9174bc8ee9d7da8850cf92917db134d490fdaf83a911cc85ac8d9bc43cbb08df45c261ea2ffae8b73d109672b5698e27d1cc6c8e3d71b371c6176198a829c079fae19abe3e826b600d63b14e483f19162a77e04ff3ddf561c0607cbe716554b5002948d8aa5e299bb37973d20765b911ced1b93396a"
        )
        val state1 = Serialization.decrypt(TestConstants.Bob.nodeParams.nodePrivateKey, waitForFundingLocked, TestConstants.Bob.nodeParams)
        assertIs<WaitForFundingLocked>(state1)
        val normal = Hex.decode(
            "7733c350acb9c7fe44d9c72819e782a3fa2d3d556a3565c23b79fe7c85011d8bc2a63494b8ce0ee0148ab213b3470fa1f48ad9a6a9cc29e0a6e297781f80be0654d3df625c47514c61498751b10d6cbfb1916ef3713c1de38feb2c8b4ab983217bb03797fe90098f1024827005b202e5997ea6fc59e095c134c025fe224c44986899e0c0fcac343f1c5b6f3188d9d2dc2a22ee976006198488309267d3281afc0cf2cfa732190a8d7eede1932a80f14d81cb47178201af74cb2358308a95f0586f7037a4694428be38514d5ff9fd09728cc5b7f710e24c25c8ea55c0de2bfe8f364947186f066787589739ad728abad7173c8fc1c247eaa89f6d200df2cd951e0b5aeb561a680932989533417b0073078708d410e34a73e8dd1f052f237783a2a6e7c39c4ef80a273a5ab9f79297c5946fd5b6a11b78fbe42875a9b6b63f0a4faaa9bc8b0eeaec5581fe5904714afc1f5762cb6c505585e151f6e11d405d1bb1b9188885139302c854284af475fd31dd77d0db29a10e65874b9ce751a36b5c74dcde1d91c5ec8e3adf61769a18e94b94ba197d7cbd61c5109e88879ce21e38698f8894f62abde7b37680a72d5b595f4b10ff4fa08136da7bb998d5c12953409d829d13e88897e4c2387841909d78e8e5ff614e21f0ebd989fc1bb3728b2a6d0157788cbaed73c133d6b9c509ee45388a12f6d5731c178f65113b5b4c9cf92ee2a214b728c35d05d59169b1c82555b7a6f4ef8d3e31b33f6176083fbfa6952791a18b76b4731d89a4dc2b3b00d6cf57be7c9d9e5d66d9413b854e2842255223d935a69872b869e050fe1b7182a22e0bf9e4a5f8b21579f04bcdb197a1bfc6973a33722dc66dcae6e33e577248833551d5edd0baa0ec6372674e048eb27596cdf252a11e3e97f175435a5cc97d5e98d0790c70a9a64b725367b44f3dda6ea6df4caa8b12dc8ca47b0ef383646ae0ecee1b35c26f652b36629b95dbada29614aa868d3ebca1d0c6d9e86bfdbc7572c11ce4f048afac1105ba7cc4c71a30881673837952c636a70a48c1631f3549326b905801ffbc1a627a4d29107137c98daa80c933bd5b32f656f4fa6a7fe7f93972d1d159d7ed327ab277eee8247292d6ce0972678b1dd1095bc454bff530f09aa1f847da1adeebfeccf91901d652060b6ab4cf6d3a7ff3a43b9dd8ae8a1d3e952a0e82405e691ff1d05109746090bc973cd6e900fd844468a35ad8a20bbebb3aa2408b523721edc6de7e5a690e0f4bf55f7697d237de6a7b63f4a8540d78bbd8afac4dede29801efa1323ac64462659f7176f132cb01f9ccd060272c2c730529ee5f35ad867fe6f2e7533cb48ae3828c644e0a57dc1384e7333cf0f2365e858ae2cb41655402bfdf1e8da055bc2c1f50b243bb531dd06dc9cb4ca31f4c27ec1881e1153d46e9599beffb7d1f8a2eec05db9993e333417b380ac1384cdb6071f1b0b4c11c907d213a44ff901fc1dde746d7e4d1cd46fba482288d005c66ce12f4794f001e1ee93bbb651f7bcc730a03bddaef54c7047454cee4d19d0ed9bf8bcd24ef2566049c46318a8f808d99a52a1aaae2af359ca39cbcd930f104253729e726c0ee82a6e474bcb42909848dcd6bec53e1515eec338d079bb2154b8a67bee13d02f4f2445ffe6f0374e6856e28e37f8d04ef3797c339382f69be351f8d3cfcdafe35307aa65c78cee138cfb1d5bce12c4ef1ef658d63b9a15c1b6afa851136239b03067b3ed956ffd0ab0cd1527b5dac5193d6b41dad2a2b5960597f17f2b3822869cdc2de66255fab145ac2cab1641efdfd4ba4ba4205ae7ddec99d3e7a85b15900b46915eb45a970b701eabf46352ac05f4d3e40f5890cc33db1d28e7addd6c979497de2bd4c8fc5882eb2d3a1eec3b0f42db285fb05d0b42dd15f1b55dac60c6b07cb7e886c84c94ce6d03db8acdf00b6058cebd6f1b8416b13f204d860a8060c5e4c4abbb11f91b0533a67b0460929d1f4bea3f9a7970d1ce1416828eb34933a66c2fb563019b7dce75b417fb4cc47d3e0721398c9f1036808f88169ec4e6d9f77f81e4cb503bdf4754e0cce343b25760660aa00af38d0abc455bf100c3dc1b8d359838b360334a2fe4a523a6785bae1102f397dc196907f1de077feb53513798688e3c94bf0543a4b39807faef47b2424923f525220751342fe493b0928293fb4aaec8d4383bf4c1462c79728ac5491d6130ce5e17495dacaca46f7b579257a0801ba9078b6d68b6e4747403dc93dacb6310683c13393e6fafd7d6ac827c1bdc63b16863761daf41516d35a6c98ca91fa7bdd217f8b50ae430cba2013937103c41d1275f3a8a19923dfdea224a6098ce6a583efbfe7d41a4ede2496a8aff0c53da271871688daae4d21a6f443107bcc8bbe806a71d950d0397ce509dbc9f7b9873a56635ad9805bcec0d0fc30e8ecc55513dd2e3a1f499ae02c39e2e3e472e4396b54be8db22bb17634077999cb16184dbfb06746be3fc93307ca3086fdce78fe9d6f57811ed2fcbda4687af966a50d52c5f23cfba7fdd253eb69acf281db33d37a1f48870515affcd2b7e44a4b9ab7c4c8cd498786429e77441f0e03cc319598ae647a5e001fce4ee754b0fffa1e3805f033cf72847baeec60741ac4d462a485865bf4dfc13cad16d0af7d1720e520b98f1bbb148d66cd2f2b1dbaadcca8f7ec0011f8ff760fcab5085560f2cbe0a987ec0ac0e44461d84b76c5af10fb9a21abba0e5dde93c24cfcec16c10532a007ebaaf61e7bad5d37d6340ff86ed0a897eff10d4380ce860c336f7ca036a8c3db8aae755476304a844414ecab43479ea71e7ca2fc4d22c0c52e175d5247c2b8ef8e5c164b45154dbd3a645dce441889361cd0f21872d111b93d82d80b23138b8845bb2b63363f3a742491d1fb3826260c5387759f6bac0c2ef6a36210008ec662f7c04f3465804b3178b5ee0ea8558686113e897c8240fffc73b72a9f25d6b929ca037743c9b419997c7440a227276e9bc1805e867fb61748c3ff6f3634c7919cba38176c444cccbc95d72b77e5d2f72d8687430a14c2dd32ca51a6be740f34b7d7bc720e4ba427b35383e8fa0fbdffd3f1c4383f7a516919707a168c5301830cde37269b98b19b866131c5cd52a7b32bc9a514f51141bf805741cbad435cae85b6c0e184e6474577b9b96f79dbb961dd65cffca5d5a5eac4d9c4b5718afe9e0d30b5fb66a480738ed7b73b5ee7d7c7da356a1da985d1f1f426d5b4667c3258dfb9ce2468bfa3f342d3071dcd86a5e536acf29fd78f06967e8f3d049bc97ecb7d9c66708a62852f343e6316c069678afc3fab09e141a789dac8607c9d8782555043a512472fb04c5ee23414217d4ec40a0a38a84270e359c543325c5106e0b8700af7a00b05540c7d9fb0322bd010078d081ba23ea1a4cef5750eb01487bbbfe285bd6948125df73006a83b12d0e31f3bf125d8d2365f7d114d31a71feac24865174edd16ec3aa6f8ec7adf82f831e872b90d255f2941f6f3b685aefa783268f482fff98ab115f2a22ab980eb54479c2dc57cb8f968038faed60e6ea36441040f0f92b460798d9d6a22f52ed3399672e7286409d1a0b89a72d68c5ae78b30315df6a3e876101720dd981692bf11f03c8f306f9e29a14aca6d526972f4b61fb84ab9f2aaf5ea0ad90fe4e6c2efda170614973062d2dfa5c42dc22c3bdaa32177735638a1d674654577e490ea524f3a08186b7f08d45282e76d51ad724006191818e7eccaf6238d5650af6d09b334554b940f3e26f3ce8d5c576f3b795d979f89d585112f48db5ac90459f4d67215421c4b48f43d7c7d592501006572382cfdbaaf6072afec622060358d3a05c32714bff1928f0732bf7a7502207372fbdccca91bda9247a3a0b1ae512e978c5df1e2c4750d359ed144c84c52b1ed01c3e6c5dcf94ab171debf5131515bebcf674f342e707ace45bae69bb09c4d18678aaa624ec6c3eb46968853791bdaa97688edee2c9034824118fbbf1bcde4ff08e82bdc61ff2cdfdbf7f56515a9a8d24c4e1f0bf40a5c9d140d6d62d22e38a35dc6757251d4db422ed650049cfbc57c7e81b17c420cf73e062b54c32ca0ee91041c2bd435152e0c9df84651ac47144cae3ade33ef10ea98163107d95dc388e0517738dd6243b48de076337b9ee63668340a249b4a2e6df42c0a0eebf85c1e760e6895fabc604ef43081b391a2ee83764c3fc855ae623110f80d57fa8fc8f63d49fae76db7add874a63ca4946f705349228b90b4d08ffb8e94c3e4d3a949a2c741421c46d0e115221e98d8f12e9cc4cedb5acdac3461ade68d8144a86df61852b2c17114bb1f963e21b6671cb880f7fd22391ca29540a1b40468391f022d59650eeafa41f25a659b537dd5ff724c8a3a1ee1213582579f32e8e430df93376af8ce7b8c0d2b316406b724afbaefa77b65027ace44561878e3f31966d3f60e9fca0a39eedaa727f3da587fac5a61b7ed5cb38487b9dd4b9008377f8893d109f8d4c43de048117ab407999854dbd43076311b201fc4437e7a4678d6a4a923db8d1043ea9f7e847fc6719ec699ece5971d949c3bf67eea324a62378207a3bc5803201cb40ca93c73f6d5bbb2a21f1d82a0074823ec055eb4aabedde988cc9ae9ac196dcd317bdad4f42a894709bd00542f3fa8d70a7ab0d30b72f0b92576a7e3e6523ec3a443df9cb46f3531c7d14511179779bbd91a52785ca62358c8112afb1d18b7b994952c428bd2c92b4aaa8b838ab45a0ba7108010468de1f10746286dcabdac1442cdbc898793a012df9e7550cb0bbc2255a5dc11d23d275a24b7175ec4f794a0e174d073a7908009c1940719169be8a831c4b28e9d39c63243fd25afbc3e09d252727f23bb9e6a715d7d9b04c4de2d03e51b47ea9a6f6695a467f5d0f8323b808d420efffd3f01158520bbd59824797e5e94798851a7b64a4141c5c21435742ad75cefd873f13f601b34f0f123c00708a35fcfb3a4e77b618948e44a9ebfb64d73442d21858fa15a1cc726525b8ef5e9d82f6b4151af7b6a4ad8c3b02dc6270ac3b01d7b9f7f651176f61cfcb607cbd78cf4bcf98d121f5b244e51e188ce75cf28badcbca6032bf46c30fcc5cff1fd00bbccf367dc1b31f3f1f5ae18c84f9b0806d4dd2fbc3e9a783ab87f0e306edd4812648dccb395103454c3143e98e7446e491fe1b7ee5d190e6d56a6ea12280089facff352ac065cbb57b53f33aee3c55658d6bccce01e84d2bbb66a7fecb0bb01190b72698fbbec2ff567aaab2b3ab48d8c2b3d0add448caba56f2b86b747fa16db0f0161b0a782408e24da6216afbd599f1dafc4b7ffff7b71f1c47b283856fcbb6b61f40781343d26cbd9ef4ac4fce523f65b3388e2a7489b9843a4448b2accbb63db4369"
        )
        val state2 = Serialization.decrypt(TestConstants.Bob.nodeParams.nodePrivateKey, normal, TestConstants.Bob.nodeParams)
        assertIs<Normal>(state2)
        val normalWithHtlcs = Hex.decode(
            "589133ae27360738d1fa2449549f806df034368518e68bb4db648154b903cfe4818750545bdb3c4df83967e424b523505607c0f8490c20f2785c00bf229bc8a31a97f967d4067aa1598e5dfae938d0c2da9bdbe56084fd14b2851551e600e51baa77f8a6ef95dc7d58a8f4a29748397fb3b74b92cc2972d56bc41abf629a6d64cd2466e697446c0572c16eb35e2f51019f36cc308d62ae3d6c14932fc7b6b0359f37af71e34b189b2cc0a2443560cd311fbaae5e463702bdc963054d11d4bdb614eb01b2b5ff270ad01009dcdbab51714cf5acd3ea90dced9db02350c0600547e68d38b58a0ef3d60d70044679b2fc41a6318bd00c8353e4e838623777be64884f90d9bc8a99287410b8406b1c01d7649cbc9d3ee27ceebf9255583c9cade90073c29d9f60db7bb1536b84734587b122aa3677ae57f5c6f20ffb2b15b9a30235a26079850d432ad6cb0a4b03f706b3d3e190bfd0b92e209f915ccfb2243c19fd349535b9e44d16c477e11d7ec41f1e1be6eef4f59fdfc985cdf4d7b559731245436771d12a583144ace57253c6ca4afcbe6f2b7ea3497932073528ff3aa81c69c50cbbaf0e7736c2a3725f44be4a2d1c21eec47e839ee7afa4ae7708bff9df5fbe4425c12d61023ba34edc7e9a4dc977b595dbd4b97d199cb0bc3d0cab5572241a3300868fef2a49b212c4d61eb48f53353aeebb1fc3026407d30bf70afe2bb881446e4ff6dcd0297e276c738aaf04030539b9546025f1674aa598f848acb7a472afd77921b8cf04241c48cd7825d186b3bef0cff489105f041cc443e5de17cf3c43af5cd71acab476721950d75919a71a16f67ea8527575bca4f54c7a36cb9f628023b73eb0715db3bebd0662855710893a9e2a37b2d71bb35a3b0b03c575f56e13edb6e2a2711e87c4fc7610be113be079ff93b12ff70680cfcf2ec017d55f710f6b33ceaf614bbd5bfdb106ca1d4ff65744a73470a7e1a32808c3cdf00572d988a132bbf469563078ae9a0438d29fb671d34b0421effa0750f89cf8ae816d640504156ecf84a1854b9d15f4381d5effe2c4a87e6c9b262dd3ee030dbb32ff0be7982e2e930bcba4c27e8248eacba9e37487b588f3efaa6b5758f113f379dd1f0c91ebd3d9c6499cbbe595bba560b56f14000f6fc5e673a6d2e8a258b7ae8703496ab75dc9e27070a5d404f9e9754c4d270dd0b916c69556f978bbd4641380d071201575c1ac9fcdf897a0fae1c312062db321b9bfac1732cd84d1d1ec39cec8dfd9e0ee03d1ae9464d8f540e9a33d56cb12b7b4214b622ce04396d2652dac6bce2e4ae2f715cb45003187b131138bb6e2a27840b2f2ca705444170be58ed9d1c07e7be4f8907aca42d6776a43f47e6d47838699a3636cac79ef7a06231e2041e855cd1996fb86785edc0c5a1d92feda8d8dbe822eceeba0bfe75b656f41a623f16751dbbb7dbfa94ee6d04bbe276f8ffc398d31f9c34f808e2fe97674bccbfb4e69c690a3e34256619daf206103843239a72460c049f7459fb4f44f16db4d0bad48185aa0b0d3d416ab7641df041940ff465b29b20ef91e2a8007a27f3c940feeae21b7bc05e26517c595f524955acbc918c15e05388d6dae8f41c6bfe879320c198bb53272f47176424d9a2d69fee03ea4fb47f3fb7e20f10fb4658945f8a80c517d6514d0c12ff7034cb968b886e1d64fa0920779cfaaadc2371fcbec53e9b566b82ef048c8019d993d4b9ee3537d2847f535329ecb37c38275d6cf56126ee31ff00bf524b87e625b3c6f624e49899fa4e729804e57cf64de6fa891cd3658fee792c25049e2d30e2bc0bbc1f6e2fab10f0fb324486aaaecc9a9f602723285d98618af761bc7b66f5b72fb72ba6a1380e711f583aae4fc38e1b444fff03bab65eb42a2a455b120b128015f0c54f297e55fe54eb727160847344d1bb6a6394b5c5843d703dcdcadfc2f170b647f149d1b944b9deca873aa274c9c302e2fcc14e4796ccba3209fb4ba9c18b300af8f6a7dd0400d228c394ed7c4d41274b196dd617f96cf72e6c846ab0bb74d968e84ec362c7bd84b76bb1f69e66ea0c88b9d53fd541b4cf2a4a96557304727d3c18f987343982e1f60c8dc4d8c5a0c482bbc2aed1b2ba1afd9f0c4c377c78d49721bc4f911eeb7173014484ac4e5423eb827323e02c8b84ac6bb5948755b866891ba0046a2a773ef8ea04970c3b19235d043cb0ea6c7ac74d13f31a3e9b11d81a51a6ffc0befeffb54c1c696e36b04b5d877c39433df4d8c408856f2342e9da56eb7a5c794e1f728fb3d38888e0c02145620ba0ea0b51e3be54ab9880a5d5ab6b5ed69cde1b32e502862045690fbcb02c4fe0de1153d82874fc0e2a11674486ce75e2bba8b266781e899df8264fa7bb27139278c5f447326d13c246d4ecfa0a3af904f7707bbb59ec4e4d66ae3f30bd22627b4fdc5325ad05993d25d081560d87a7f0e30bc5d17f17e56b41fb91859dc9c40b69c63a8f8ec3764050c1f79971120b23a1d2cc4d68f6a8ed496a7e27305af0368854c64dafd473ad36f404269db31a27440a11b1e92a01546b82eecd65311ad71112a7bdc93430881abe3827a156b64f676c495edc4d1baa282108189aab72b4df375dffd809c64e7976c8766b7ca2fa2be4ee701e7ef465a74b832da5a6649255bcdc218e0cbff59c761df6c26ea18cc9349a581fbcefc3fc3fe46dc82d459c00073d72148c8d52744c549afc27c8df9927268fc3a0b79ae63dd8c6edb070d0639823ffcf717102cd1b6ed096aaeae147fa5875a1e5bfccab42ee438d93e1ec3dd34cabbc2011e39a9f16c9faa91e518a46b15f3659396f33d904bfb8e983fd93d47a6ed3ef85d9f1779ec76458351af7ff73e0e23ad83e958ff2dd459f32e520c2cd995c09ada953c5aeb2601df4310003260c751655c6fee575c3591f711158d4b97b63b79343c49d2464ea258e939bb59706488b1f26f35694cc1fcc3d5ed80b6c92d330cb8b5d1d4c825df6f21082a622e922f4a75b291eff089afef1fac55a49b1ab3b73001b4514a8074b235847658ce3e433ad49c9cd666694eb0913c5d167c18c808876bf98baeeaf4b64c6abc0033334b8ab0e24b3b3377aea5f83c79eabd5e646e7242c95fa1c9e4a6d2e2c5e1a35caad86371933f71befbdfc0079c84f882cca2c8c4c24ffbb8a684ac38ac84429c5098ccba817ae663a54e5ec4473436cb1f99745eb6755fe3cd0123aee6ee866df4b217b7324066a095ed49dea027f5e2ec330103d15b6c531bb9b0be0447be5e4cfd8756611d26889e72bb472cde47b09fb9ae1447b4c50a1d01313886556d9ec41170b715d2611f98402aabf0f0e67411ea10da38778c6e1322a56cb178289611176b42fe8be5b07bc6024b78c1713e81cd99fbcacc8725af6e4c1c8d929ae9c8e99258f15e3950972d0d14c3bd89c4e2049f5d801c33eb9af908ef1b34b5bc9c7fef6dcd0a08781ab013ab5e74c269a15fc280ace4c86c1faa4a5d5513194a81deab3031e83689ef471bb4b1e76e8154f33118d2e3d97d24b1bc0f53c42de57e3362d5d04bdc4ade9056a492cc95c251502461d7d6f18b115ead2e49037ba7874399248a1a81b35cc405c37bdd283e15f20c68eedf19c50d07c38b0d3559c16609be89faf20eb737845cb8d26464d4d467f30f1234a741c969e52af08866e2bab48facd5710c8d43ed7eab490d03b0e00a1a1f5335fbb988bd5e573d56c218d82119d13753b62c737e283918697fe0c5762e923b095945d39b20e601eab4a6ddd5831ddc2c07a042353ad5ee12f3285acac7ae6665544d3c8db1a509541e24e03739aaad7eec94c129bd3f6a5ec1726bda9de7b446f1c64a2255edceb9b7ae471026cad15732b6ba111d16fc4a7d36fc270c049a12626d290692c236c5e33da56d3817036dafbfb8f3f457f74ab379310762a0f60b4a577980c7c2fbb2fa0420635f5abd1055b8e58dce0eff3c23f6039e9b237a9e863541b3e43201ba032041cda916c5bc2d023104c49510120a9ae56692672cbc6c19f10624e2da2e916b5d99c0e16525306eb6279450c0980f9df55f87ef9495c173856dae7f64adf328e38a660cff0a815f2f1c92fb25fa7d3abdc21cdebfe3acd681ca851172a53ff4572610942ea0a7fb71a8404a80dd73537eb59fc12134d5bfd83397f752936fdb15bc4d1a981daf5ca88ce7977df333738f92995d94281291e6dd2adc1398daee9684e543a1abcf350523fb9c81fb04d4a263752844b3bb2616f609f5b0a0da62e3dd28c7cc9cc26f29c499e0bdaa477f12a0f16034689332b8edc745374525ff2fac1238b478236600c2a824d22764b23e4bf6d104c2df6c5c3f8c2efc6256a94c9b46476397a2b2892d0aeb10af41863c9155fc4074df19eeae02834768b0e7c042fcb3c95e862f3ad299bd3a6a3e85b29f67e9406ed74c43c26942c06b56463fe38c4f331cbe78fda75bbd2f59236799b0cf30998ef712bfc5399a04d419b574cb71b3dc69193eede3c5237db41f75d998cef7078e73e1609e0f1c9005a1747be7d172db30b59d897e7a60e27beaba357147cce97b4f4f98ffa2d4243aeb350f9d28b328426acb26ed0395eaff3b495d5ba7407af33e5a8c95820d3a877eca72c1dfd6326245b67382c0b5209994b8665cdca58a1ed45b156ca6e7b6c7f5152422bc3fc1ae9703416af444601b6a2b1e6fd7b60ff5b008474b8411f523a7359685cce96436898cdbe90b42ca0798dbb808ac579276200ef0d8f01240a3183226f64abb49c9b0bdf24e44a4f4448f4feb433550e9f0ca17fb2dd20aa8fdefe27682de73895647abb6ea8b5c6fe3a746b0efdbd05ae137edd7cc14ca2c75126e5e70a3dac39a58e0bfb3314ed57bcccc3fbde82d2c52bfbafc8953f48dff6090926f563d9031d797ddfef20b938b65b0a61c1b813ce37bc72231c5e86e69da86d6020eb77916881e03ac563d458fe32799fa766d7ad6afbccae0a2f03e81d68d73354754c90e4b7c9321a4c3b4d1c15ecc244eaf3990bc3f40c5fee58d46cbfc73997b8c6c96abed1c3d32a3e9d9f7e0f77be51f5cbe7556f1b0a0a39f5d17d71bb83268b71d5e5eb3979e4380ee1cd1b9bd641ce436ab0985694bf41b447e3a02a8bf2e2cea28516e2aaf2746f9630e57446b6e9ab06ed755f8a57bce46165520e176267b72e896625722aedec4ddb86d145a2249b0ff283dd90685d7b81c28aa96314c0cc51e1748aab36f8d610c78e0dbe10d78450516daacae7ea116b1c08ce2eda77f6d63c5412ba5d8c31c3a4a80f32ff736c477d57759fda6dd4a582dc553d676c978a85bdec9c2c6adee459b0f5f92d4a99f00ccb1a0e5c09cfb80d990bbb5d365c59dc28ed7f9bbc5bffec6467bb8e626b155671d2057beab8465eab96f902209db1cf6926f5b9a106345dd6f4a1d0b2bd7870577a65d3acf8f48c6c33bd1dac52c47396bf8a580b48c363d2ce78af49e56d039ec32ad41605f325779f9f015e00a2f89e75f78bb8832cc41ca6061667f7b1f6db9a812e3ec7dfbd57b6f20b7dfb3196bb68fdffe37de03f4b63a469121dbcd2a2b365883d2c73cf4ebef8337fc8e29b790edc5fd7920abb041e0c63255f7fd12a95f2fd9f61c1ccfc3605642863a0caf96068ec7a5a31fc2b50c4eaeca61704fd6729d4902f1c5445823709b9532155e2db11b482c1c0936f94f90b5e40437a1dec8492fe0a8e43ca9b8b2f04d3481c47f7269b5f77851c9b160a24d54a43880bf27b8dc1d29dc61ccbe6d6dae81f8708dd81b4363e0d68f4f703112d2834b3b5871f9f3f374fc17ae98ee3a45378d7e7349cb5a1e0da333c5b971fe3c441d3f638bc769e8dc33ca81fbeda187b5013ee39c7c6faad55d95694c191d43cbe50fde130b824f68a9339046fe937bd076a5f94d131d349df589ad197e83367f514124bda200695e5bdb81dd28743918653a76722c4114d317f9070abd20c14e85868c9c1d77a682bc84b8719e407470567f9b851f930848a6ef2e77922377ba4ce875645ca4521a5d5213b589b7c236196e3cc18edb77688c840a3e1f80f2278df32a5c3158af7883fcdd7d49637ce722d487fa9e1c539a8301c194bc9bb24c5ba486c4b88136980a0cd997cb0eede9793ac3dd3074eefff839d504c9beddb5eaee1fe84eb91859f0c4b314071efc6462eae03e2ea882e637677843e727fed86e740dcd4f0f7a4e398d8960ecf9cd4705b4e8e7504d2bccdd95e966e0c9ddbc99c9682099b7f54ab091157869087dc9167ec63a7e86e8e038663c13b36ca1d7183301574027e690be36e279297454be04165096d7f3071a26b94f8f565d0a8ef7a98726cb9f478faf6727fed8f9ef08b9288a964063204287fd08bdba9a9c33e0264bf4790174931e8f19852c154d80c016e880b490dd36afedc236120ecd9d6f110d8423067a46315bb2284f8fd64c95b8670ea9f2931a08a83a01e978e2ee4983ca92eea454d16efa1a7f07447be29e060303437abb83755b28a4eefa77e37c50738e39ac919f520076d76777986c6d6db5afb2f4960a4e69f32adbcebe64dbfddb84bffa2bc5add1ee55538045d0e03183ad5e16bb7985a26cca2ac378bee93667c30ca7f5f6f76e744bb95d07755aab141204f075a768ab917e6f940d093d11207b38e8978d5e42a1f4d7dcd0a2f09262ee02675800b361f0d9b8813f0be3d0bec5adb5825084093fe55861e0113a1c0ebf39bc02e920225deba7ad2dfe3bd1b25db840eb18824e3a96670c38fa224bec0f3ed79a522269a3fe753e479b8c40c8f09ae480abaab12c3239d0468f298aecee8e91c171afedb24f59fa445132d8dbb9120cde155a61e7b0e1e53839d79f782257804ee49014edfd5cf8ce4e7ab44878faac63bd4accbf2c2d627c59e950ca032932d2d54ca2edb8e099fafa4dae5aa9f7ace1ea56851cb1d3dbf6df3652a6a299d2dc81ea052625606a06dbdd04c60d20df7188acecd107e12ba206e4fb58efcabbb8b39fce47a0290fb3ba80f8994d9ae17fab47e393c4597c32d34d0bbf05831983cbe06bacdd00ce98142b766082ba6a6d9789ba299cc2551ea8f5692849488d19e7d3565227cbb8bb4ef71a962fd46cc7113f359ff5727788ca53c9ad8aee3a1760154b67e924d107629f3db6d59081c6751fe37b16e08febe0a668b9560c00df887e9de5770f789430b5c39f530b639e34e1b0999f542ebd99e357cc1b6c781895c310d89bac7eeef786ed931d58737183ad8efd117194c3490324a2db097cef5b39389e1383eaf35e6f02cac611473e5b7a8b6258053a48e3bec13c1b54dfc3050da5f609d749051e34a915784244cb54ee3473feae7f304382920b9bf3df894cfa1a655d9af02e0c867dab308e0b69b1ad38cc54c02dc67c784b044225c8eafb8f6f1cd1cc73e8e76f0bdd67baf06595641ad8582e22974aad384b284fb05f1fe742b7338e994c608ebf235c208dbc92b21547a5240ca6bf6e608ed844847b5e5171d9dd9e4714521b8fed7086ac7e3822799a6730552d669533218d4f9e54012919ac078675c675ae88506c3f6e96edf1f8b069d8daffef9102f23146ce1166012e36e3651224756df179b52eb2d952bab3b944b14b1d5b09e0aa3d54175ba0f17866415c815b2c0d0021a3d13a0e7ec6abdfa1eec6eb4252dc0b60e12bd40a0bb53d8294889709e5c7d0ca3f2a108091561a594ab422577b025255a21fc192853efa1320a0c28455f1e70306c0163b56740be37170801d1a42c0ae27969c3b96d2d95401b851379392bcf6da90a03214ca88af01a80422609cec12ae8e848a568bc254b78051fc12718fd700da0f92f275091b64a4ca0c997503ac039aa4b53b3da8170ed40ada1b64aa66d6575267c1e976db9df0a3fce422f2950259c27079c183dfd0404d6589ed21497274b4c06a9fa4181a660cd1c841446f0fc8602735fe69622e8bde4367cd7dea1dca704f88261ad534fa556c01f2c570ee6ad6491deecda513a68ea0300449c7ca314fee6a998e5792e3d6d281ea26cd6f817649cbb59307d9f1a40ccd05cc7a6391599aa076648ba18f53e2e3a530bd9ac582d10267de6500d1788349627c061bcc515712b6669d447caf4a0c8d775e6a92ba8c28ea447ee7296fef13b668714e87e0acd35964535036173e198c48bfc77b044cf0f4d5bbb6e57576e1ec87ea880a8037f6508e4accac5bfd108be57ccfaf93ba14b1f3123cbb314880d532f664f58abede806c5785b39755241a33c837d2bb6fbe1205d128a0a627d8b2288835bcc6a009951bdcf7ff156128c7084658a63ff37c754464f530d721e354ae5d928b89374012e9550101b5108b8e9e67985345708694c5ae846e6a1d38dc3b10dbd066a1b125ef74d015c5cc1e007d6b709f31665a90367b8e1b29e320af7fd9e670853ca55624607397909a82065d323bc36b721e7d109bd176ecf6b1f63305688e8e2ada2f5722965caf324a8f711ced9ea5c185fd3e0d9535d03929f7d11b98bf34f4f0ce86e11072c049d198b4674ea8a6c805403b5aafc1e61bd3403a944de2eb1ecc79cb1c12ae0bb4c2bf311f3b42b2b40b43bf5824f1740cc78a37e58980f8bf65512a202216c9ce8f546e3b558e3fb93af6756714c36a97b5a5cb6e81003a314a82634047e9b2b0ac315c166f96e768703bdee1425c340871d14847ebc56dc20267b21492bb35d4e4aa3bba5b5a04947d4d15ba751f2c34d7cf939901208a2500222002ce1a7e12d1195791727670dbb1395998c96603059ed9c227354c31d55c440e831b62c09afbed039c347243f9be4c357b2e399c5f3c7cb39030d818023c3dab2252e02779063a1e32305b247e4e284e57e0d85759e7faad53ab50273b70b64724a0fd0c0f1bd7c4e260ef86d9699659801eb4298964bda3d16c53052dee3df8b9d28e0696e195349945b8b3227d7d8692d346eba1b992ed13f4906c8b173bb125e6633a5bd1cb817761150a089c97b3f1a9f6d358fe51ae7106fba4cd46cc086e5976a9420d9fee1377e6796465bf3e87f41bdb5a8721fa3dbfa0dc3dcb420c23fd8c36c74461e5987e1b41f25ae0dcc828f23ab5612207ad35ca383fa301b2128c470a84592f60a754efeba14e3560cd9cadd1caed07f7165b8ad618db40b6d83666c1b620638ab958c4e167f8f29985afe756d5a094b05039bb6498db362f3b088c5d84e4a814940a5469542eea3ddc8e4908ab6af6a93842e8ab9d7656391bf703cefa77018715f18efbcc93dd48844e5c356db0e4832ce2909660977de2a48c965a3d3910872c137074b99121bf531e3d912c7ef7374779985482d36da22af1ce5df99f3ef6d65949a9ccf9526c8a4e2ce20e0c8fd1503a74bc564f0a4272ff3d989ace79004b95cebdb9eccc95be99bd68bc3797dd6a6bd89bf5b6d7d1e9cd028a7ed8e0b1369a4d4e5ee18de2912c8cb63e38824224826e16bc35790ab73f04782a23a11dc3bfa04d0376dfe490488efce030b832d1f16f83ba2dc2f99098d1ba7bc07b2ba5c1daf3c499edc7564a910b1919e720309a3c207d4b8eba932cdfc1dd20a42824a1b24522e181cc2081a62cbb8b4643908f1c37555802bb8ca0fe7cf3500d2a5982d51a969569875f62f84b9c551af44275d7f8f94b74f1ef96cdb929c2f89ab8c85c97919312e390b79cac2bdea2ba4d9a738c5ad25384acdbe67e414004e9e46d4d1ce5924a20202806333dacee603df332b791ed66f8f8ef2f07b66f8789cbf04b8bcd152d96877150ca391e29cae54c4f892c0df53f3ee9cad983079b6d523be7be6d0a284a3436067de700b4e5a4135cbecaedab014d925e88e34da7a2bae2233914a85cb0ce844620f351303ee6364abf7bfbdbd62b9b27f7ba4d15b4152090f704d71d97504d75214f3ac3ca1428937ed2cac1732f352db9245053a28fc6f235c435a38f0123411c72669c4fcdf03f41a3fea948187f18a15c23846476b1c75950b8a197eefca615222a9a27ef951438d4f7361937bdd0be1f6d6370d6cf72a0cbc68ff4a6c3bb5083797999c37f099861239bede99d45516d756949e1784e0046d311145cb952aa3d8c14728ba628268eb3ab2f64a089445e28f21ae5c61cb57c1be88948434834807e1f2a06e5e54d43b1eb2d3b975ed8a5bb121be64cb006071c1da100ad89777812216be4bea8ec3f2ac1bf9c77f57645cf268e2318991ac8cd5ac82a81736ea9c3e816f4d19d03bcb069573aa840a37c005def715152e5bb85e7232782a3c5d3066b9ef2002e66a72ca88803978b4688d9e087019790369611e9cfd14a7fb132090430e42f4cf6a57de214814c8aa42c962f4c8fec0f696357043c43603cc41a14bcb3bee45cea3bda73befe825a8e768e2def9e9fed54f548b17b6a08db54d786fd10f60d38cc8f70e3244b228d9dd404b4f1bc23ff3ffac153acb2c28f8c0cbd40c26145e55eb558f0478441d9175829539a67955f115f7b837a4becd4de4452449018a8abd2bce835f8616df377eb6b0674c3e7e93e0db58369cd864069948d2904f05e012e650bddee9e914603b0cbee4204caad52c76646e40a29ced649c32fb31d12a1a9ccda72cc03be74eff645f9c4a3f6ddcdc53618c116f68ebd63bb6031054a22606fecea8359bccf50a359ab2046ff465384b26de3d0d11a555926bb09f17604181bb79afdaad88ff5487fb268169c1264b1c6f4570f7e1b2d4081e24633a739d49c03e2886bfb5865e7beba4699e79533c8c395b1fe2c4f98daf10083eb6b23403a0ace1970dae192fac0e8f1cc33e7854418fc2681267af7993d38d9c3600fcfe1646102242aa11c6e765aa8d4ed6ef83decb5747bcc0894f9ef60cf310bfd3e2d3d681776911023a3ecde1319168d8d135f4a74aadbad1aa4b75f5fb77301dc824dab505f6f9baae5411e041ddf235228ff2e9cb75b9e5ea0bdfa578c6e0e24c7368a083419189eb6ba52dc1a0e92b9a2a06ff90c45207284706958f549148df54e007fbb458e4dbe302140da85d655d98f835c1b7b0fa9a3450e57f1ee22b533253c20637be3e944a47f1604c2ed75fa3fbfea17c82eaa5507112604abc7adcc763901881ddc644a8a27588169fac3fe4be88bbb240242065d7dbb45a8c088a268f4162b82059f1426b6b4e22c637ebb2ad3ad9399d3776b7c0732407430d767d3730d2cc6442a53c963b2a6286b6b44155cb0727b61c09fcfcd3d315a3ba123616c2ca4af6516896a706ee6d8abc9cc9db69db15d4b4ce3c8a67f794273e0e474502712e4c1b51060cc0d5bc99b6385c3b212c0565527672ace25ec81fc70c92c09f8005782f6948bdaec6e4e470bc137691975b158cb1cc4ab60f1f34c10fcff80f3ca311c866c9bd3f10c607bfaf1ae2658c01f3d7547ef69a080f5949aba87f6762145fe2a9c6377c256c98016104d5b911e3bbce9f157866d17d596661579cd40df8619c5b0e5649883a9b9fa81f9b8b31d62e84cee1976d46be51ab7564b0b426b0bec98f7dfcd056d01cfcf8164b73ba221155c0bdbddb4d962d9aea81524b92c64123db0a61c92beab70ee54337ada93286b9f664e03519f6f70da24914122fa4336f2240e73670309a5bdc0fd0f2468598890414e7b1b56064b1fd52e7de1a21b06bc2805def162a0efca7a4e1a0b8a8e0b784b79fe165a4c3505be8c976b64badb51a0ed9295c971b9c6cd46481025634429f82fee524dbce63a5d9e3bff18762174f12fb0de82ed3a65cd44d0ad7ca81c9226950af6f628ee3145d59fab383eb610d3ed4ee8c0a7cb8bd827b9d33298b0b1edda0fb1009a87b6059583ce204c5885d8ef24c75d0305c30bc5468a2560027420936052d927447f5c894441ed33071d7fd4f46cc53a71c8bd504da582aa11cd404804ed7b830d84aae679ca845296d8ba12a64dce58b8c3e05fc7ddc37d925c5bd3b5c5bb45f1eb2383dd8a8b7d7b9a7b8d8687ca2f67959004cd1f3ee99eb8cfade2d8a152ac8c29430e4341aff52056d138b52f082e4d097855e56dda2e4884f8b99b1f3551f7d2ca24ff11c331019dfdb039273d02eeb0b1a40d45012d2eab85fd7f7494b3b202d22b6055df7e83a75f941cfa7f46702367ea323e45070e5b4b2d5148eddac2f93829947e82ab2efe27db1ea60ae47c7a6cd3e32637ea90532b070c813c6ea79c9626bd8141552e82533ac62e7f441736ec2edf221aa9ba66a8e67aaf8500cee1533a70f51ed5aa0485e6a422446601780fb962899a502ea45826c9c10374ff9d5c4875fcb0aa8c57ac29cfb055aa458a20e39fc64badd351353638fd1ff95984687812d25089906571980309e3e3d041cd9d0ef6de05057bb56034c9f8763cab3e919d98b4c3aff2aee173c838897a2154d8af7cbede1eb76a0f8eed66c77785542ee7fdfa544ae886ff116b4ef80273ce03ccbffe6f06788a6087f441e212c96f0597483512daafe2d4264cda5b21a22674d0f840c048319d4e0c5985e5fa656662102bfe2d5266be7955b6dd6d4898f4bf336dbc9c5d7b38580b307ebdbf0708ecd106cca249a2288e34d2dac03a5580c1ecf589e995b67d2d48b11196d7cb76ed54282153f2ac647d0d2f0fa85033a2c87051acbb9e7ddd745bc0a2583921d3f65254510bf420fe7e5057c685f9776cd4fded4af5c2be20e505c8cb116fef0eb42be2ac1d20b1fbfe202aeb9c5e72b31b52d9aa073e2b9ea34f20ec5e6ca29af88fffdd612994a7b88ce2cca48ed855a4110433c93a6c0270ad38f045a0f636ca4d974bd3f4b024819042b3be49e14df853788626cc63d834ac78c2aff53a39b0542c00a9deb4eb36c0a0d01445c7357e49e3d1dc640dd72f3b45defa4b969b46ae8565377f3c739b83ef19c9901850bcd97484a8211b671077560ec1c7566dbf8e43666805addef842a83f321befe0cc4219249895143131dc9612154f3b6376a2058007cee8641e10ee8ad5335feb0c1a70b364427521a9249a5321463b83f8010693f6973cc838a76d8ac1e8f9bebd43ada305d0e97c1a9dedd2003dde28abe4732067d9ceb78c059103ea057498c19e0a817130dc807e50d6e32081a75178567df54ae598b8b3fa66e102c56664bf7c7a294703efbe7fd0b59c417b8bf4351139053446a05d51b5d9ab225311516159f11924945855442b284cb9796a9ad55c0a142a66587682325bb7257947099757552b5654d841ef1f1261828347bdbeabfe01c0bc7b129c22c8f2843062f262b69a57582eb22db3bf2916fdc7fcaed9eedb48c193efcb4e544ffe6c40fdc44c348be6080b726eaa4735388cc324a12b6805932869f5645b01058b2ae9dade49ca7d70e8ad6ed62cd01442119cb13fbbb9ed9ed42f67f089bec99eff1d89145737bb862f4ceff1291ea5b17c17ae64523e12fd0c8ef5cd70d94203d977e322b0e216bd9a599dbc3a9f06317c966424755f7a3dfd19b1da94311bdebe018cb144d43a6bbf0ffc1a0032f84b8dbe4dcd9e27afa064ab7c5446e204e57e8a0c7314a1623c4573d1ed720539675245b7fc817c542a6d1586f8cf2e90fbed24f64c420791983cdaa807eb0b4005497170feb0c38010691d9c4c3174b9e5f255c3c7427d65e5a219006f9a4940c9efee27ba84622f92dd6f41687c67b64e1d175d3482ff758777fcd0f964fe1c8396947d2eaf3ff281d89c181522b410251d92e61417dd269b967232252bc2ccdc404c0841c62d3ded8b19c4f91289c0d7da606fd12e5d8629f68886cac434da4ae243fc7010603ea7e18ab95f3c6a5bb34be55c2ab43c6823a173d8a6cfc3643d0251e56da085ab25b321b98eccdd33ea5e0e8416b2b089991f67a953c9408ee8dfd86d5d199ed5a191fd0d07e3a327968fc4d8416651d3580b1c77e940fd674d32ba2dbc30866a46c75cdf22ee48002a8f81021b575e71b77445cd00f0e33dbc900cfaf8c4ef4d4b8afb4b8600ec87abfc1e1b2c7e8a9c652e0e6ee8e47e04269dd577410e8c72c78045b5305d3820c550a84bf9650afdc0ce4d1358306d3a23fca29c9e47bd45f9a9"
        )
        val state3 = Serialization.decrypt(TestConstants.Bob.nodeParams.nodePrivateKey, normalWithHtlcs, TestConstants.Bob.nodeParams)
        assertIs<Normal>(state3)
    }
}